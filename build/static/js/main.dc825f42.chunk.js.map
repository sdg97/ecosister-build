{"version":3,"sources":["reducers/mapPopupReducer.tsx","reducers/notificationReducer.tsx","services/cache.tsx","services/paths.tsx","constants.tsx","utils/urlManager.tsx","utils/turf.tsx","utils/utils.tsx","reducers/mapReducer.tsx","reducers/visitorReducer.tsx","services/carTrips.tsx","reducers/userLocationReducer.tsx","services/geocoding.tsx","reducers/originReducer.tsx","reducers/destinationReducer.tsx","reducers/pathsReducer.tsx","reducers/uiReducer.tsx","utils/translator/dictionary.tsx","utils/translator/Translator.tsx","components/Notification.tsx","components/FindPathsButtons.tsx","components/TopPanel/TravelModeSelector.tsx","components/TopPanel/ResetPathsButton.tsx","components/TopPanel/LocateButton.tsx","components/TopPanel/ToggleLanguageButton.tsx","components/Icons.tsx","components/TopPanel/ToggleOdPanelButton.tsx","components/TopPanel/RoutingSettingsRow.tsx","components/TopPanel/ShowInfoButton.tsx","components/TopPanel/UseCurrLocButton.tsx","components/LoadAnimation/Icon.tsx","components/LoadAnimation/LoadingIcon.tsx","components/LoadAnimation/LoadAnimation.tsx","components/TopPanel/OriginInput.tsx","components/TopPanel/DestinationInput.tsx","components/TopPanel/OrigDestPanel.tsx","components/TopPanel/BasemapSelectorButton.tsx","components/TopPanel/BasemapSelector.tsx","types/aqi_spec.tsx","components/TopPanel/AqiMapLegend.tsx","serviceWorkerRegistration.js","components/ServiceWorkerWrapper.tsx","reducers/authReducer.tsx","services/auth.tsx","components/Auth/UserStatus.tsx","components/TopPanel/FavouritesButton.tsx","services/userInfo.tsx","reducers/airQualityLayerReducer.tsx","reducers/pathListReducer.tsx","store.tsx","components/TopPanel/FavouritesSelector.tsx","components/TopPanel/TopPanel.tsx","components/TopPanel/favicon-32x32.png","components/BottomControlPanel/FilterButton.tsx","components/BottomControlPanel/ToggleBottomPanelButton.tsx","components/BottomControlPanel/TogglePathsButton.tsx","components/BottomControlPanel/BottomControlPanel.tsx","components/PathPanel/MaxLengthFilterSelector.tsx","components/PathPanel/PathList/CarTripInfo.tsx","components/PathPanel/ExposureScoreBar.tsx","components/PathPanel/OpenClosePathBoxes.tsx","components/PathPanel/PathList/PathListPathBox.tsx","components/PathPanel/PathList/PathList.tsx","components/PathPanel/PathAqBar.tsx","components/PathPanel/OpenedPathInfo/OpenedPathAqExps.tsx","components/PathPanel/OpenedPathInfo/OpenedPathInfo.tsx","components/PathPanel/PathInfoPanel.tsx","components/PathPanel/PathPanel.tsx","components/Map/Map.tsx","components/Map/MapControl.tsx","components/Map/AirqualitySensors.tsx","components/Map/sensorIcon.png","services/aq.tsx","components/Map/AirQualityHeatmap.tsx","components/Map/AirQualityStreetByStreet.tsx","components/Map/UserLocation.tsx","components/Map/PathShort.tsx","components/Map/PathSelected.tsx","components/Map/PathsEnvOptimized.tsx","components/Map/PathsEdges.tsx","components/Map/OrigDestPoints.tsx","components/Button.tsx","scenes/WelcomeInfo/CookieConsent.tsx","scenes/WelcomeInfo/ToggleLanguageButtons.tsx","scenes/WelcomeInfo/WelcomeInfo.tsx","scenes/Home/DimLayer.tsx","scenes/Home/Attribution.tsx","components/Auth/LoginModal.tsx","components/Auth/RegisterModal.tsx","components/Auth/UserRecover.tsx","components/Map/HomeMarker.tsx","components/Map/homeIcon.png","components/Map/WorkMarker.tsx","components/Map/workIcon.png","App.tsx","Root.tsx","components/Map/SelectLocationsPopup.tsx","index.tsx"],"names":["mbPopup","mapRef","rmNotifTimeout","cache","cacheKeys","setToCacheWithExpiry","key","data","maxAgeS","timestamp","Date","getTime","unshift","length","keyToRemove","pop","keepCacheUnderMaxSize","getFromCache","ageS","Math","round","index","indexOf","splice","removeCachedItem","serverUrl","process","REACT_APP_ROUTES_SERVER","ExposureMode","TravelMode","getConnectionTestResponse","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","console","log","axios","get","sent","abrupt","stop","apply","arguments","getCleanPathServiceStatus","_ref2","_callee2","_context2","concat","getPaths","_ref3","_callee3","originCoords","destinationCoords","travelMode","exposureMode","coordString","queryUrl","cached","cacheTtlSecs","_context3","dCoords","oCoords","processPathData","fetch","json","status","error_key","CLEAN","_x","_x2","_x3","_x4","debugNearestEdgeAttrs","_ref4","_callee4","lngLat","_context4","String","lat","lng","_x5","adjustExposureScore","score","toFixed","stretchScoreFromRange","value","rangeMin","rangeMax","processPathProps","props","aqScore","missing_aq","aqc_norm","noisiness","missing_gvi","nei_norm","quietness","greenery","gvi_m","_objectSpread","noisinessScore","quietnessScore","greeneryScore","pathData","path_FC","features","map","f","properties","extentFeat","hmaPoly","UrlStateKey","Basemap","MapId","defaultMapId","CITY","BasemapByMapId","Map","STREETS","STREET_BY_STREET","STREETS_NIGHT","HEATMAP","LayerId","menu","speedByTravelMode","_speedByTravelMode","_defineProperty","WALK","BIKE","noPathsErrorByExposureMode","_noPathsErrorByExposu","FAST","SAFE","initialMapCenter","REACT_APP_DEV_MAP_VIEW","egOrigin","type","label","locationType","odType","geometry","coordinates","egDest","paramCache","setStringParam","name","location","history","searchParams","URLSearchParams","search","set","forEach","v","k","push","toString","asPoint","coords","point","asFeatureCollection","getBuffer","geojsonFeature","dist","buffer","units","getBbox","bbox","within","feat","feat2","booleanWithin","getDistance","destCoords","distance","toLngLat","getLngLatFromFC","FC","concatSign","number","getSecsFromLength","m","getSecsFromModeLengths","modeLengths","timeSecs","walk","bike","formatDuration","showSeconds","undefined","withSign","roundedSecs","timeMin","roundedMins","formattedDuration","unit","getLayersFeaturesAroundClickE","layers","e","tolerance","x","y","queryRenderedFeatures","getLengthLimit","rounding","ceil","getLengthLimits","greenPathFeatures","pathLengths","sort","a","b","reduce","acc","limit","pathCount","filter","count","cost_coeff","getInitialLengthLimit","lengthLimits","costCoeffLimit","_step","prevDl","_iterator","_createForOfIteratorHelper","s","n","done","dL","err","initialMapState","initialized","zoomToBbox","basemap","mapId","basemapChangeId","loadedLayers","center","zoom","zoomToFC","fc","setMapId","urlManager","BASEMAP","setLayerLoaded","layerId","mapReducer","store","action","turf","userLocFC","includes","initialVisitorState","visitedBefore","usedOds","gaDisabled","visitedKeyName","getVisitedStatus","visitedC","Cookies","visitedLs","localStorage","getItem","visitorReducer","filteredOds","od","odObject","slice","getItineraryQuery","origCoords","getTripInfo","query","headers","itineraries","duration","co2min","co2max","method","url","plan","legs","t0","error","initialMapPopups","visible","closePopup","remove","mapPopupReducer","geoOptions","enableHighAccuracy","maximumAge","timeout","initialUserLocation","watchId","expireTime","userLocHistory","startTrackingUserLocation","dispatch","updateUserLocation","navigator","geolocation","watchPosition","pos","longitude","latitude","userLocationReducer","baseUrl","REACT_APP_DT_GEOCODING_URL","getParamString","params","str","geocodeAddress","text","resultCount","uri","size","lang","sources","REACT_APP_DT_GEOCODING_KEY","encodeURI","self","findIndex","fFeat","LocationType","OdType","initialOrigin","originInputText","REACT_APP_USE_DEFAULT_OD","originObject","originOptions","originOptionsVisible","waitingUserLocOrigin","setOriginDuringRouting","getOriginFromGeocodingResult","place","ADDRESS","ORIGIN","roundCoords","coord","getOriginFromCoords","locType","originWithinSupportedArea","origin","originReducer","USER_LOCATION","initialDest","destInputText","destObject","destOptions","destOptionsVisible","setDestinationDuringRouting","getDestinationFromGeocodingResult","DESTINATION","getDestinationFromCoords","destWithinSupportedArea","destination","destinationReducer","initialNotification","look","showNotification","notifTime","rmNotification","Promise","resolve","setTimeout","clearTimeout","notificationReducer","initialPaths","cleanPathsAvailable","showingPathsOfTravelMode","showingPathsOfExposureMode","showingStatsType","odCoords","selPathFC","shortPathFC","envOptimizedPathFC","pathEdgeFC","openedPath","lengthLimit","waitingPaths","showingPaths","carTripInfo","routingId","testGreenPathServiceConnection","startTime","connTestResponse","tookTime","_tookTime","performance","now","paths","confirmLongDistance","window","confirm","getRoutingOd","dest","routingOd","originPlace","destPlace","newlyGeocodedOrigin","newlyGeocodedDest","geocoding","routeEnvOptimizedPaths","prevRoutingId","_origin$originObject","_dest$destObject","_yield$getRoutingOd","setEnvOptimizedPaths","getErrorNotifKey","_ref5","_callee5","pathFeats","shortPath","envOptimizedPaths","initialLengthLimit","_context5","len_diff","utils","edge_FC","selPathId","_x6","setSelectedPath","clickedPathAgain","storeSelPathFC","clickedPathId","id","pathsReducer","b_available","selPath","path","Lang","initialMenuState","EN","info","odPanelHidden","pathPanel","pathPanelContent","setLanguage","setItem","showInfo","setOdPanelHidden","hidden","OD_PANEL_VISIBLE","hideInfo","expires","showPathList","uiReducer","langs","it","en","IT","errorKey","errorNotifKey","dictionary","Translate","_PureComponent","_inherits","_super","_createSuper","_classCallCheck","_createClass","rawKey","trim","dict","_this$props","this","children","translateWord","PureComponent","connector","connect","state","ui","OuterFlex","styled","div","_templateObject","_taggedTemplateLiteral","StyledNotificationDiv","_templateObject2","css","_templateObject3","notification","origError","destError","origOrDestError","_jsx","_jsxs","T","Button","button","Tooltip","onClick","StyledBikeI","MdDirectionsBike","StyledWalkI","MdDirectionsWalk","ButtonRow","StyledIconContainer","_templateObject4","selected","_templateObject5","getSetTravelModeFunction","travelModeOfTheButton","setTravelMode","ButtonContainer","ArrowBack","IoIosArrowBack","resetPaths","odFc","_ref7","_callee7","_context7","_x8","Locate","MdNearMe","StyledIcon","userLocation","zoomToUserLocation","getCurrentPosition","currentUserLngLat","StyledButton","toggleLanguage","toggleToLang","iconStyle","Filter","FiFilter","ArrowDown","IoIosArrowDown","Close","IoIosClose","List","IoMdMenu","IconButton","padding","leftMargin","hoverJump","_templateObject6","CloseButton","ListButton","up","ToggleOdPanelButton","OuterContainer","ResetContainer","SettingsContainer","LanguageContainer","useLocation","useHistory","ResetPathsButton","LocateButton","TravelModeSelector","ToggleLanguageButton","UseCurrLocButton","handleClick","svg","attrs","version","xmlns","xmlnsXlink","Svg","Icon","spin","keyframes","Spinner","StyledLoadingIcon","className","color","viewBox","fill","d","LoadAnimation","OrigSelectorDiv","Input","input","WaitForUserLocContainer","span","ResetLocButton","CloseIcon","OrigOptions","ul","OrigOption","li","_templateObject7","noShadow","_templateObject8","OriginInput","_Component","_this","call","wrapperRef","React","createRef","setWrapperRef","bind","_assertThisInitialized","handleClickOutside","document","addEventListener","removeEventListener","node","event","current","contains","target","hideOriginOptions","_this2","_this$props$origin","useUserLocationOrigin","setOriginInputText","setGeocodedOrigin","setUsedOrigin","resetOriginInput","toggleOriginOptionsVisible","ref","placeholder","onChange","odPlace","style","option","gid","Component","mapDispatchToProps","stopPropagation","inputText","replace","visitor","DestSelectorDiv","DestinationOptions","DestinationOption","DestinationInput","hideDestinationOptions","_this$props$destinati","setDestinationInputText","setGeocodedDestination","setUsedDestination","resetDestinationInput","toggleDestinationOptionsVisible","OdContainer","hide","StyledLayersIcon","FaLayerGroup","Wrapper","OptionContainer","BaseMapOption","AlignCloseButton","setBasemapId","_useState","useState","_useState2","_slicedToArray","showOptions","setShowOptions","handleSetBasemap","BasemapSelectorButton","AirQualitySpec","getCategories","pollutant","getCategoryIndex","rangeInfo","getRangeMapping","Error","ranges","i","minValue","maxValue","instance","EuroAQISpec","categories","description","rangeMapping","unitOfMeasure","PM10","NO2","O3","SO2","_AirQualitySpec","Container","LegendBox","TitleRow","ColorRow","ColorBox","LabelRow","LoadAnimationWrapper","ZoomTooltipBox","formatAqTimeInfo","dataTimeUtcSecs","dataAgeMinutes","seconds","getDataAgeMinutes","utcSeconds","date","setUTCSeconds","hours","getHours","ampm","formatUtcSecondsToAmPm","aqLayer","airQualityLayer","mapZoom","_props$aqLayer","loadingData","waitingStyleUpdate","updatingStyle","getInstance","backgroundColor","isLocalhost","Boolean","hostname","match","register","config","URL","href","swUrl","then","contentType","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ServiceWorkerWrapper","waitingWorker","setWaitingWorker","_useState3","_useState4","showReload","setShowReload","_useState5","_useState6","updating","setUpdating","updated","useRef","onSWUpdate","waiting","useEffect","postMessage","initialAuthState","user","showLoginModal","showRegisterModal","loginSuccess","authReducer","API_BASE_URL","LOCALSTORAGE_JWT_KEY","login","username","password","post","access_token","getUserData","jwt","Authorization","UserStatus","useSelector","auth","useDispatch","removeItem","StyledFavouritesIcon","FaStar","FavouritesButton","updateHomePosition","homePosition","updateWorkPosition","workPosition","addFavouriteAddress","address","initialAirQualityLayer","hasData","styleUpdateDelays","setLoadingData","setDataLoaded","setWaitingStyleUpdate","setUpdatingStyle","setDelayedStyleUpdate","time","handleDataNotAvailable","airQualityLayerReducer","initialPathList","scrollToPath","pathId","pathListReducer","reducer","combineReducers","pathList","mapPopup","createStore","composeWithDevTools","applyMiddleware","thunk","FavouriteOption","disabled","hasError","FavouritesSelector","showFavouriteOptions","setShowFavouriteOptions","showFavouritePathOptions","setShowFavouritePathOptions","showSaveFields","setShowSaveFields","_useState7","_useState8","newFavouriteName","setNewFavouriteName","setAsFavouriteAddress","_user","showOnlyFavouritesButton","showOnlyFavouriteOptions","favouriteAddresses","p","MAP_LOCATION","_x7","_ref6","_callee6","_context6","setDestinationFromCoordinates","VisiblePanel","LogoRow","LogoImg","img","EcosisterLabel","LogoContainer","LowerTransparentPanel","LowerWidePanel","LowerLeftPanel","LowerRightPanel","_templateObject9","showAqiMapLegend","SATELLITE","src","width","height","alt","OrigDestPanel","RoutingSettingsRow","AqiMapLegend","ShowInfoButton","BasemapSelector","FilterCount","FilterButton","envOptimizedPathCount","ToggleBottomPanelButton","StyledPathTypeLabel","toggleToExposureMode","buttonLabelByExposureMode","toggleLabel","toggleToPathType","getPathToggleFunc","ControlPanel","pathPanelVisible","ButtonFlex","togglePathPanel","showMaxLengthFilterSelector","TogglePathsButton","OuterDiv","FlexRow","CloseButtonBox","TooltipStyle","StyledMaxLengthOption","MaxLengthOption","ll","setLengthLimit","MaxLengthFilterSelector","PathRowFlex","CarTripInfoBox","CarTripInfoButton","formatDurationMins","setCarTripInfo","carTrips","fontWeight","Meter","Bar","Label","ExposureScoreBar","expScorePct","labelKey","lowScoreDim","saturation","min","getGrayscaleFilter","defaultProps","ArrowForward","IoIosArrowForward","StyledOpenClosePathBox","close","OpenPathBox","ClosePathBox","StyledPathListPathBox","border","boxShadow","TripInfo","TravelTime","Distance","MetersContainer","MeterWrapper","OpenPathInfoWrapper","getFormattedDistanceString","digits","abs","openPathDisabled","pathProps","PathListPathBox","setOpenedPath","mode_lengths","PathList","_React$Component","linkVisible","pathRefs","fast","prevProps","updateRefs","setState","scrollIntoView","behavior","block","inline","Fragment","CarTripInfo","StyledAqBar","withMargins","StyledAqPc","pc","aqCl","first","last","PathAqBar","aqiPcts","aqs","StyledOpenedPathExposures","PathPropsRow","FlexCols","StyledAqLabelBox","StyledAqExposureBox","StyledAqExposureRow","AqClLabelBox","AqExposureRow","aqClExp","OpenedPathAqExps","aqClExps","aq_cl_exps","aqCls","Object","keys","aq","Number","aqCL","ExposureBarsFlex","BarsLabel","PathAqExposures","openedIsShortest","unsetOpenedPath","aq_cl_pcts","showingPathList","showingOpenedPath","OpenedPathInfo","PathPanelContainer","LoadAnimationContainer","PathInfoPanel","MapboxGL","accessToken","REACT_APP_MB_ACCESS","_len","args","Array","_key","mapContainer","isReady","loaded","flying","setupMapWindow","updateWindowDimensions","preventDefault","passive","forceUpdate","resizeMap","resize","container","boxZoom","trackResize","attributionControl","on","addCityBounds","touchZoomRotate","disableRotation","dragRotate","disable","initializeMap","updateCamera","getCenter","getZoom","REACT_APP_DEBUG_GRAPH","GREEN_PATHS","SHORT_PATH","unsetSelectedPath","lineGeoJSON","Area","addSource","addLayer","source","layout","paint","prevState","_this3","_this4","mapStyle","position","top","bottom","right","left","margin","innerHeight","overflow","touchAction","Children","child","cloneElement","el","MapControl","getFitBoundsOptions","innerWidth","componentDidUpdate","unloadLayers","mapState","easeTo","fitBounds","setStyle","once","setBaseMapChanged","moveLayer","USER_LOC","ORIG_DEST","PATHS_EDGES","SELECTED_PATH","layer","mapCenter","AirQualitySensors","intervalId","fetchSensorsData","ok","displaySensorsOnMap","sensors","finish","sensor","createElement","backgroundImage","backgroundSize","AQI_american","AQI_european","entries","pollutants","join","popup","mapboxgl","Popup","offset","setHTML","Marker","setLngLat","setPopup","addTo","setInterval","clearInterval","aqServiceUrl","REACT_APP_AQ_SERVER","getAqMapDataStatus","aq_map_data_available","aq_map_data_datetime","getAqLayerData","dataMap","id_ig","interpolatePositions","_interpolatePositions","positions","requestData","statusText","AirQualityHeatmap","createGrid","polygon","gridSize","grid","_bbox","minX","minY","maxX","maxY","square","gridPolygons","updateAqState","assignGradientColors","getLayer","getSource","setData","maybeUpdateAqData","repeat","server","_args","componentDidMount","isSourceLoaded","setLayoutProperty","JSON","stringify","values","centroid","matchingValue","find","getCategoryInfo","aqLineColor","_toConsumableArray","flatMap","c","AirQualityStreetByStreet","STREETS_MAP","sourceId","addStreetsLayer","setPaintProperty","uniqIds","existingFeatureKeys","has","getUniqueFeatureIds","setFeatureState","Streets","UserLocation","circleStyle","loadLayerToMap","updateLayerData","PathShort","setFilter","_this$props2","getCanvas","cursor","clickedFeat","PathSelected","PathsEnvOptimized","aqLineColors","colorScaleByExposureMode","PathsEdges","lineColor","OrigDest","originPoint","destinationPoint","odFeatures","origDestFC","setSelectLocationsPopup","setMapReferenceForPopups","closeEl","MapboxGl","closeOnClick","closeButton","anchor","getElementsByClassName","blur","display","small","smaller","smallest","green","white","bold","shadow","SmallText","DisableGaWrapper","DisableGaButton","disableAnalyticsCookies","ButtonPair","InfoWrapper","InfoContainer","ContentContainer","Title","P","WarningP","ButtonDiv","WelcomeInfo","ToggleLanguageButtons","RiErrorWarningLine","CookieConsent","DimDiv","OsmLinkContainer","OsmLink","Attribution","role","rel","title","ModalBackground","ModalContent","LoginButton","RegisterLink","LoginModal","setUsername","setPassword","loginFailed","setLoginFailed","modalContentRef","handleLogin","closeModal","clearFields","closeModalOnTouchOutside","RegisterButton","RegisterModal","registrationFailed","setRegistrationFailed","handleRegister","UserRecover","firstTime","recoverData","WorkMarker","markerRef","AbsoluteContainer","TopPanelContainer","BottomPanel","App","urlState","odPanelVisible","getStateFromUrl","setStateFromUrl","loadSelectedLanguage","maybeDisableAnalyticsCookies","showWelcomeIfFirstVisit","testCleanPathServiceStatus","DimLayer","AirqualitySensors","OrigDestPoints","HomeMarker","Notification","FindPathsButtons","PathPanel","BottomControlPanel","TopPanel","langC","langLs","visited","gaDisabledCookie","gaDisabledLs","aqStatus","aq_data_updated","Root","Provider","Router","Route","component","StyledPopupDiv","SelectLocationsPopup","setOriginFromMap","setDestinationFromMap","_Fragment","render","ReactDOM","getElementById","popupElement","subscribe"],"mappings":"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","file":"static/js/main.dc825f42.chunk.js","sourcesContent":["import MapboxGl from 'mapbox-gl'\nimport { Popup, Map } from 'mapbox-gl'\nimport { Action } from 'redux'\nimport { LngLat, MapPopupReducer } from '../types/types'\n\nconst initialMapPopups: MapPopupReducer = {\n  visible: false,\n  lngLat: {},\n}\n\nlet mbPopup: Popup\nlet mapRef: Map\n\ninterface PopupAction extends Action {\n  lngLat: LngLat\n}\n\nconst mapPopupReducer = (\n  store: MapPopupReducer = initialMapPopups,\n  action: PopupAction,\n): MapPopupReducer => {\n  switch (action.type) {\n    case 'SET_POPUP':\n      return { ...store, visible: true }\n\n    case 'SET_POPUP_LNGLAT':\n      return { ...store, lngLat: action.lngLat }\n\n    case 'CLOSE_POPUP':\n      return initialMapPopups\n\n    default:\n      return store\n  }\n}\n\nexport const setSelectLocationsPopup = (lngLat: LngLat) => {\n  return async (dispatch: any) => {\n    if (mbPopup) {\n      mbPopup.remove()\n      dispatch({ type: 'CLOSE_POPUP' })\n    }\n    dispatch({ type: 'SET_POPUP_LNGLAT', lngLat })\n\n    mbPopup = new MapboxGl.Popup({ closeOnClick: true, closeButton: true, anchor: 'bottom' })\n\n    // React uses id for rendering popup content\n    mbPopup.setLngLat(lngLat).setHTML('<div data-cy=\"popup\" id=\"popup\" </div>').addTo(mapRef)\n\n    // prevent initial focus of close button\n    const closeEl = document.getElementsByClassName(\n      'mapboxgl-popup-close-button',\n    ) as HTMLCollectionOf<HTMLElement>\n    if (closeEl.length === 1) {\n      closeEl[0].blur()\n    }\n\n    dispatch({ type: 'SET_POPUP' })\n  }\n}\n\nexport const closePopup = () => {\n  if (mbPopup) mbPopup.remove()\n}\n\nexport const setMapReferenceForPopups = (map: Map) => {\n  if (!mapRef) mapRef = map\n}\n\nexport default mapPopupReducer\n","import { Action } from 'redux'\nimport { NotificationReducer } from '../types/types'\n\nconst initialNotification: NotificationReducer = {\n  text: null,\n  look: null,\n}\nlet rmNotifTimeout: any\n\ninterface NotificationAction extends Action {\n  text: string\n  look: string\n}\n\nconst notificationReducer = (\n  store: NotificationReducer = initialNotification,\n  action: NotificationAction,\n): NotificationReducer => {\n  switch (action.type) {\n    case 'SHOWNOTIF':\n      return { text: action.text, look: action.look }\n\n    // hide tooltip on how to set the destination when popup is opened\n    case 'SET_POPUP': {\n      if (store.text != null && store.text.includes('Click on the map')) {\n        rmNotification()\n        return initialNotification\n      }\n      return store\n    }\n    case 'SET_SHORTEST_PATH':\n    case 'RMNOTIF':\n      return initialNotification\n\n    default:\n      return store\n  }\n}\n\nexport const showNotification = (text: string, look: string, notifTime: number) => {\n  return async (dispatch: any) => {\n    if (rmNotifTimeout) {\n      // wait for the current notification to get removed before showing the new one\n      rmNotification()\n      await new Promise<void>(resolve => {\n        rmNotifTimeout = setTimeout(() => {\n          dispatch(rmNotification())\n          resolve()\n        }, 1500)\n      })\n    }\n\n    // show new notification after removing the old one\n    dispatch({ type: 'SHOWNOTIF', text, look })\n\n    await new Promise<void>(resolve => {\n      rmNotifTimeout = setTimeout(() => {\n        dispatch(rmNotification())\n        resolve()\n      }, notifTime * 1000)\n    })\n  }\n}\n\nconst rmNotification = () => {\n  clearTimeout(rmNotifTimeout)\n  rmNotifTimeout = null\n  return { type: 'RMNOTIF' }\n}\n\nexport default notificationReducer\n","const maxCacheSize = 10\n\ninterface Cached {\n  timestamp: number\n  maxAgeS: number | null\n  data: any\n}\n\nconst cache: Record<string, Cached> = {}\nconst cacheKeys: string[] = []\n\nconst keepCacheUnderMaxSize = (key: string): void => {\n  cacheKeys.unshift(key)\n  if (cacheKeys.length > maxCacheSize) {\n    const keyToRemove = cacheKeys.pop()\n    if (keyToRemove && keyToRemove in cache) {\n      delete cache[keyToRemove]\n    }\n  }\n}\n\nconst removeCachedItem = (key: string): void => {\n  if (key in cache) {\n    delete cache[key]\n  }\n  const index = cacheKeys.indexOf(key)\n  if (index > -1) {\n    cacheKeys.splice(index, 1)\n  }\n}\n\nexport const setToCache = (key: string, data: any): void => {\n  setToCacheWithExpiry(key, data, null)\n}\n\nexport const setToCacheWithExpiry = (key: string, data: any, maxAgeS: number | null) => {\n  const timestamp = new Date().getTime()\n  cache[key] = { data, timestamp, maxAgeS }\n  keepCacheUnderMaxSize(key)\n}\n\nexport const getFromCache = (key: string): any | null => {\n  if (key in cache) {\n    const timestamp = new Date().getTime()\n    const ageS = Math.round((timestamp - cache[key].timestamp) / 1000)\n    if (!cache[key].maxAgeS || ageS < cache[key].maxAgeS!) {\n      return cache[key].data\n    } else {\n      removeCachedItem(key)\n      return null\n    }\n  } else {\n    return null\n  }\n}\n","import axios from 'axios'\nimport * as cache from './cache'\nimport { LngLat, PathData, RawPathProperties, PathProperties, PathDataResponse } from '../types/types'\n\nconst serverUrl = process.env.REACT_APP_ROUTES_SERVER || '/routes'\n\nexport enum ExposureMode { // i.e. RoutingMode\n  CLEAN = 'clean',\n  FAST = 'fast',\n  SAFE = 'safe',\n}\n\nexport enum TravelMode {\n  WALK = 'walk',\n  BIKE = 'bike',\n}\n\nexport interface AqStatus {\n  aq_data_updated: boolean\n  aq_data_utc_time_secs: number | null\n}\n\nexport const getConnectionTestResponse = async (): Promise<string | any> => {\n  console.log('testing connection to gp service at:', serverUrl)\n  const response = await axios.get(serverUrl)\n  return response\n}\n\nexport const getCleanPathServiceStatus = async (): Promise<AqStatus> => {\n  const response = await axios.get(serverUrl.concat('aq-status'))\n  return response.data as AqStatus\n}\n\nconst formCoordinateString = (oCoords: number[], dCoords: number[]): string => {\n  return `${oCoords[1]},${oCoords[0]}/${dCoords[1]},${dCoords[0]}`\n}\n\nexport const getPaths = async (\n  originCoords: number[],\n  destinationCoords: number[],\n  travelMode: TravelMode,\n  exposureMode: ExposureMode,\n): Promise<PathData> => {\n  const coordString = formCoordinateString(originCoords, destinationCoords)\n  const queryUrl = `${serverUrl}/paths/${travelMode}/${exposureMode}/${coordString}`\n  const cached = cache.getFromCache(queryUrl)\n  if (cached) {\n    console.log('Found paths from cache:', queryUrl)\n    return processPathData(cached)\n  }\n  console.log('Requesting paths from server:', queryUrl)\n  const response = await fetch(queryUrl)\n  const data = await response.json()\n  console.log('data from server')\n  console.log(data)\n  if (response.status >= 400 || data.error_key) {\n    throw data.error_key ? data.error_key : 'notif.error.routing.general_routing_error'\n  }\n  const cacheTtlSecs = exposureMode === ExposureMode.CLEAN ? 300 : 3600\n  cache.setToCacheWithExpiry(queryUrl, data, cacheTtlSecs)\n  return processPathData(data)\n}\n\nexport const debugNearestEdgeAttrs = async (lngLat: LngLat): Promise<void> => {\n  const coordString = String(lngLat.lat).concat(',', String(lngLat.lng))\n  const queryUrl = serverUrl.concat('edge-attrs-near-point/', coordString)\n  const response = await axios.get(queryUrl)\n  console.log('nearest edge at', lngLat, response.data)\n}\n\nconst adjustExposureScore = (score: number | null): number | null => {\n  if (score === null) return null\n  if (score > 100.0) return 100\n  if (score <= 2) {\n    return 2 // this we can still visually see in the exposure chart\n  }\n  return +score.toFixed(1)\n}\n\nconst stretchScoreFromRange = (value: number, rangeMin: number, rangeMax: number): number => {\n  if (value <= rangeMin) return 0\n  if (value >= rangeMax) return 100\n  const score = (100 * (value - rangeMin)) / (rangeMax - rangeMin)\n  return +score.toFixed(1)\n}\n\nconst processPathProps = (props: RawPathProperties): PathProperties => {\n  const aqScore = !props.missing_aq ? (1 - props.aqc_norm) * 100 : null\n  const noisiness = !props.missing_gvi ? stretchScoreFromRange(props.nei_norm, 0.05, 0.56) : null\n  const quietness = noisiness !== null ? 100 - noisiness : null\n  const greenery = !props.missing_gvi ? stretchScoreFromRange(props.gvi_m, 0.08, 0.6) : null\n  return {\n    ...props,\n    aqScore: adjustExposureScore(aqScore),\n    noisinessScore: adjustExposureScore(noisiness),\n    quietnessScore: adjustExposureScore(quietness),\n    greeneryScore: adjustExposureScore(greenery),\n  }\n}\n\nconst processPathData = (pathData: PathDataResponse): PathData => {\n  const path_FC = {\n    ...pathData.path_FC,\n    features: pathData.path_FC.features.map(f => {\n      return {\n        ...f,\n        properties: processPathProps(f.properties),\n      }\n    }),\n  }\n\n  return {\n    ...pathData,\n    path_FC,\n  }\n}\n","import hmaPoly from './Borders.json'\nimport { ExposureMode, TravelMode } from './services/paths'\nimport { PolygonFeature } from './types/types'\n\nexport const extentFeat = hmaPoly.features[0] as PolygonFeature\n\nexport enum UrlStateKey {\n  BASEMAP = 'map', //deve diventare BASEMAP ID\n  OD_PANEL_VISIBLE = 'od',\n}\n\nexport enum Basemap {\n  STREETS = 'mapbox://styles/joose/cjvbyzwuk31oe1fohk6s9ev4b',\n  STREETS_NIGHT = 'mapbox://styles/joose/ckg3ie4ln1pqp19rzjfpjf5c1',\n  SATELLITE = 'mapbox://styles/joose/ckf9du1ua28cj19mk96oidub3',\n}\n\nexport enum MapId {\n  CITY = 'City',\n  HEATMAP = 'Heatmap',\n  STREET_BY_STREET = 'Street-by-street',\n}\n\nexport const defaultMapId = MapId.CITY\n\nexport const BasemapByMapId = new Map([\n  [MapId.CITY, Basemap.STREETS],\n  [MapId.STREET_BY_STREET, Basemap.STREETS_NIGHT],\n  [MapId.HEATMAP, Basemap.STREETS_NIGHT],\n])\n\nexport enum LayerId {\n  USER_LOC = 'userLoc',\n  ORIG_DEST = 'origDest',\n  SHORT_PATH = 'pathShort',\n  GREEN_PATHS = 'pathsGreen',\n  SELECTED_PATH = 'pathSelected',\n  PATHS_EDGES = 'pathsEdges',\n  BASEMAP = 'baseMapLayer',\n  STREETS_MAP = 'streetsMap',\n  AREA_BORDERS = 'borders',\n  HEATMAP = 'heatmap'\n}\n\n\nexport const menu = {\n  lengthLimitSelector: 'length_limit_selector',\n  pathList: 'path_list',\n}\n\nconst walkSpeed = 1.25\n\nconst bikeSpeed = 4.3\n\nexport const speedByTravelMode: Record<TravelMode, number> = {\n  [TravelMode.WALK]: walkSpeed,\n  [TravelMode.BIKE]: bikeSpeed,\n}\n\nexport const clickTol = 12\n\nexport const noPathsErrorByExposureMode: Record<ExposureMode, string> = {\n  [ExposureMode.CLEAN]: 'notif.warn.no_alternative_clean_paths_found',\n  [ExposureMode.FAST]: 'notif.error.no_shortest_path_found',\n  [ExposureMode.SAFE]: 'notif.error.no_safest_path_found',\n}\n\nexport const initialMapCenter =\n  process.env.REACT_APP_DEV_MAP_VIEW === 'True'\n    ? { lng: 11.3426, lat: 44.4947 }\n    : { lng: 11.3426, lat: 44.4947 }\n\nexport const initialMapZoom = 11.5\n\nexport const egOrigin = {\n  type: 'Feature',\n  properties: {\n    label: '11.3443 44.5082',\n    locationType: 'map',\n    odType: 'orig',\n  },\n  geometry: {\n    type: 'Point',\n    coordinates: [11.3443, 44.5082],\n  },\n}\n\nexport const egDest = {\n  type: 'Feature',\n  properties: {\n    label: '11.3464 44.5096',\n    locationType: 'map',\n    odType: 'dest',\n  },\n  geometry: {\n    type: 'Point',\n    coordinates: [11.3355, 44.4676],\n  },\n}\n","import { Basemap, BasemapByMapId, MapId, UrlStateKey } from '../constants'\nimport { UrlState } from '../types/types'\n\nconst paramCache: Map<string, string> = new Map()\n\nexport const getStateFromUrl = (location: any): UrlState => {\n  const searchParams = new URLSearchParams(location.search)\n  let basemap: Basemap | undefined = undefined\n  let mapId : MapId | undefined = undefined\n  if (searchParams.has(UrlStateKey.BASEMAP)) {\n    mapId = searchParams.get(UrlStateKey.BASEMAP) as MapId\n    if (mapId) {\n      basemap = BasemapByMapId.get(mapId as MapId)\n    }\n  }\n  const odPanelVisible = searchParams.has(UrlStateKey.OD_PANEL_VISIBLE)\n    ? searchParams.get(UrlStateKey.OD_PANEL_VISIBLE) === 't'\n    : true\n\n  return {\n    basemap,\n    mapId,\n    odPanelVisible,\n  }\n}\n\nexport const setStringParam = (name: string, value: string, location: any, history: any) => {\n  const searchParams = new URLSearchParams(location.search)\n  paramCache.set(name, value)\n  paramCache.forEach((v, k) => searchParams.set(k, v))\n  history.push(`?${searchParams.toString()}`)\n}\n\nexport const setBoolParam = (name: string, value: boolean, location: any, history: any) => {\n  const stringVal = value ? 't' : 'f'\n  setStringParam(name, stringVal, location, history)\n}\n","import bbox from '@turf/bbox'\nimport buffer from '@turf/buffer'\n// @ts-ignore\nimport distance from '@turf/distance'\n// @ts-ignore\nimport booleanWithin from '@turf/boolean-within'\nimport { Feature } from '@turf/helpers'\nimport { point } from '@turf/helpers'\nimport {\n  EdgeFeature,\n  EdgeFeatureCollection,\n  FeatureCollection,\n  OdFeatureCollection,\n  OdPlace,\n  PathFeature,\n  PathFeatureCollection,\n  PointFeature,\n  PointFeatureCollection,\n} from '../types/types'\n\nexport const asPoint = (coords: [number, number], properties?: {}): PointFeature => {\n  return point(coords, { type: '', ...properties })\n}\n\ntype FeatureCollectionReturnTypes = {\n  (features: PathFeature[]): PathFeatureCollection\n  (features: EdgeFeature): EdgeFeatureCollection\n  (features: PointFeature[]): PointFeatureCollection\n  (features: OdPlace[]): OdFeatureCollection\n}\n\nexport const asFeatureCollection: FeatureCollectionReturnTypes = (features: any) => {\n  return { type: 'FeatureCollection' as any, features }\n}\n\nexport const getBuffer = (geojsonFeature: FeatureCollection, dist: number) => {\n  return buffer(geojsonFeature, dist, { units: 'meters' })\n}\n\nexport const getBbox = (geojsonFeature: any): [number, number, number, number] => {\n  // @ts-ignore\n  return bbox(geojsonFeature)\n}\n\nexport const within = (feat: Feature, feat2: Feature) => {\n  return booleanWithin(feat, feat2)\n}\n\nexport const getDistance = (originCoords: [number, number], destCoords: [number, number]) => {\n  const dist = distance(asPoint(originCoords), asPoint(destCoords), { units: 'meters' })\n  return Math.round(dist)\n}\n\nexport const toLngLat = (coords: number[]) => {\n  return { lng: coords[0], lat: coords[1] }\n}\n\nexport const getLngLatFromFC = (FC: PointFeatureCollection) => {\n  const feat = FC.features[0]\n  if (feat) {\n    return toLngLat(feat.geometry.coordinates)\n  } else return null\n}\n","import { speedByTravelMode } from './../constants'\nimport { MapMouseEvent, Map, PointLike } from 'mapbox-gl'\nimport { LengthLimit, PathFeature } from '../types/types'\nimport { ExposureMode, TravelMode } from '../services/paths'\n\nconst concatSign = (number: number): string => {\n  if (number < 0) {\n    return '-' + String(number)\n  } else if (number > 0) {\n    return '+' + String(number)\n  } else return String(number)\n}\n\nexport const getSecsFromLength = (m: number, travelMode: TravelMode) => {\n  const speed = speedByTravelMode[travelMode]\n  return m / speed\n}\n\nexport const getSecsFromModeLengths = (modeLengths: { walk: number; bike: number }) => {\n  let timeSecs = 0\n  if (modeLengths.walk > 0) {\n    timeSecs += modeLengths.walk / speedByTravelMode[TravelMode.WALK]\n  }\n  if (modeLengths.bike > 0) {\n    timeSecs += modeLengths.bike / speedByTravelMode[TravelMode.BIKE]\n  }\n  return timeSecs\n}\n\nexport const formatDuration = (\n  timeSecs: number,\n  showSeconds: boolean = false,\n  withSign: boolean = false,\n): string => {\n  const roundedSecs = Math.round(timeSecs)\n  const timeMin = timeSecs / 60\n  const roundedMins = Math.round(timeMin)\n  let formattedDuration = ''\n  let unit = 'min'\n  if (roundedMins === 0) {\n    if (showSeconds === true) {\n      unit = 's'\n      formattedDuration = withSign === true ? concatSign(roundedSecs) : String(roundedSecs)\n    } else return ''\n  } else {\n    formattedDuration = withSign === true ? concatSign(roundedMins) : String(roundedMins)\n  }\n  return formattedDuration + ' ' + unit\n}\n\nexport const getLayersFeaturesAroundClickE = (\n  layers: string[] | undefined,\n  e: MapMouseEvent,\n  tolerance: number,\n  map: Map,\n) => {\n  // tolerance: pixels around point\n  const bbox: [PointLike, PointLike] = [\n    [e.point.x - tolerance, e.point.y - tolerance],\n    [e.point.x + tolerance, e.point.y + tolerance],\n  ]\n  const features = map.queryRenderedFeatures(bbox, { layers })\n  return features\n}\n\nconst getLengthLimit = (length: number, rounding: number) => Math.ceil(length / rounding) * rounding\n\nexport const getLengthLimits = (greenPathFeatures: PathFeature[]): LengthLimit[] => {\n  const pathLengths = greenPathFeatures.map(feat => feat.properties.length)\n  const pathProps = greenPathFeatures\n    .map(feat => feat.properties)\n    .sort((a, b) => a.length - b.length)\n  return pathProps.reduce((acc: LengthLimit[], props) => {\n    const length = props.length\n    // get limit as rounded value higher than the actual length\n    const limit = length > 1000 ? getLengthLimit(length, 100) : getLengthLimit(length, 50)\n    // add new limit if it's not in the limits list yet\n    if (acc.map(limit => limit.limit).indexOf(limit) === -1) {\n      // create label for len diff to be shown in options input\n      const pathCount = pathLengths.filter(x => x < limit).length\n      const limitText = limit < 1000 ? String(limit) + ' m' : String(limit / 1000) + ' km'\n      const label = limitText + ' (' + String(pathCount) + ')'\n      acc.push({ limit, count: pathCount, label, cost_coeff: props.cost_coeff })\n    }\n    return acc\n  }, [])\n}\n\nexport const getInitialLengthLimit = (\n  lengthLimits: LengthLimit[],\n  exposureMode: ExposureMode,\n  pathCount: number,\n  costCoeffLimit = 20,\n): LengthLimit => {\n  if (exposureMode === ExposureMode.CLEAN) {\n    // disable initial length limit for fresh air paths\n    return lengthLimits[lengthLimits.length - 1]\n  }\n  // return length limit that filters out paths with cost_coeff higher than 20\n  if (lengthLimits.length > 1 && pathCount > 3) {\n    let prevDl = lengthLimits[0]\n    for (let dL of lengthLimits) {\n      if (dL.cost_coeff >= costCoeffLimit) return prevDl\n      prevDl = dL\n    }\n  }\n  return lengthLimits[lengthLimits.length - 1]\n}\n","import { turf } from '../utils/index'\nimport { Action } from 'redux'\nimport { LngLat } from 'mapbox-gl'\nimport { Basemap, UrlStateKey, LayerId, MapId, BasemapByMapId } from '../constants'\nimport * as urlManager from './../utils/urlManager'\nimport { OdPlace, MapReducer, FeatureCollection, PointFeatureCollection } from '../types/types'\n\nconst initialMapState: MapReducer = {\n  initialized: false,\n  zoomToBbox: [0, 0, 0, 0],\n  basemap: undefined,\n  mapId : undefined,\n  basemapChangeId: 1,\n  loadedLayers: [],\n  center: {},\n  zoom: 0,\n}\n\ninterface MapAction extends Action {\n  originCoords: [number, number]\n  destCoords: [number, number]\n  fc: FeatureCollection\n  userLocFC: PointFeatureCollection\n  originObject: OdPlace\n  zoom: number\n  center: LngLat\n  basemap: Basemap\n  mapId: MapId\n  layerId: LayerId\n}\n\nconst mapReducer = (store: MapReducer = initialMapState, action: MapAction): MapReducer => {\n  switch (action.type) {\n    case 'INITIALIZE_MAP':\n      return { ...store, initialized: true }\n\n    case 'ZOOM_TO_FC':\n      return { ...store, zoomToBbox: turf.getBbox(turf.getBuffer(action.fc, 300)) }\n\n    case 'ROUTING_STARTED': {\n      const FC = turf.asFeatureCollection([\n        turf.asPoint(action.originCoords),\n        turf.asPoint(action.destCoords),\n      ])\n      return { ...store, zoomToBbox: turf.getBbox(FC) }\n    }\n\n    case 'ZOOM_TO_USER_LOCATION': {\n      return { ...store, zoomToBbox: turf.getBbox(turf.getBuffer(action.userLocFC, 250)) }\n    }\n\n    case 'SET_MAP_ID': {\n      return { ...store, basemap: action.basemap, mapId: action.mapId }\n    }\n\n    case 'BASEMAP_CHANGED': {\n      return { ...store, basemapChangeId: store.basemapChangeId + 1 }\n    }\n\n    case 'LAYER_LOADED': {\n      const loadedLayers = store.loadedLayers.includes(action.layerId)\n        ? store.loadedLayers\n        : store.loadedLayers.concat(action.layerId)\n      return { ...store, loadedLayers }\n    }\n\n    case 'UNLOAD_LAYERS': {\n      return { ...store, loadedLayers: [] }\n    }\n\n    case 'UPDATE_CAMERA': {\n      const center = {\n        lng: Math.round(action.center.lng * 100000) / 100000,\n        lat: Math.round(action.center.lat * 100000) / 100000,\n      }\n      return { ...store, center, zoom: action.zoom }\n    }\n\n    default:\n      return store\n  }\n}\n\nexport const initializeMap = () => {\n  return { type: 'INITIALIZE_MAP' }\n}\n\nexport const zoomToFC = (fc: FeatureCollection) => {\n  return { type: 'ZOOM_TO_FC', fc }\n}\n\nexport const updateCamera = (center: LngLat, zoom: number) => {\n  return { type: 'UPDATE_CAMERA', center, zoom }\n}\n\nexport const setMapId = (mapId: MapId, location: any, history: any) => {\n  const basemap = BasemapByMapId.get(mapId)\n  urlManager.setStringParam(UrlStateKey.BASEMAP, mapId, location, history)\n  return { type: 'SET_MAP_ID', mapId, basemap }\n}\n\nexport const setBaseMapChanged = () => {\n  return { type: 'BASEMAP_CHANGED' }\n}\n\nexport const setLayerLoaded = (layerId: LayerId) => {\n  return { type: 'LAYER_LOADED', layerId }\n}\n\nexport const unloadLayers = () => {\n  return { type: 'UNLOAD_LAYERS' }\n}\n\nexport default mapReducer\n","import Cookies from 'cookies-js'\nimport { setOdPanelHidden, showInfo } from './uiReducer'\nimport { Action } from 'redux'\nimport { setMapId } from './mapReducer'\nimport { defaultMapId } from '../constants'\nimport { OdPlace, UrlState, VisitorReducer } from '../types/types'\n\nconst initialVisitorState: VisitorReducer = {\n  visitedBefore: false,\n  usedOds: [],\n  gaDisabled: false,\n}\n\ninterface VisitorAction extends Action {\n  odObject: OdPlace\n}\n\nconst visitorReducer = (\n  store: VisitorReducer = initialVisitorState,\n  action: VisitorAction,\n): VisitorReducer => {\n  switch (action.type) {\n    case 'VISITED_BEFORE':\n      return { ...store, visitedBefore: true }\n\n    case 'GA-DISABLED':\n      return { ...store, gaDisabled: true }\n\n    case 'SET_USED_OD': {\n      const filteredOds = store.usedOds.filter(\n        od => od.properties.label !== action.odObject.properties.label,\n      )\n      filteredOds.unshift(action.odObject)\n      return { ...store, usedOds: filteredOds.slice(0, 10) }\n    }\n\n    default:\n      return store\n  }\n}\n\nexport const setStateFromUrl = (urlState: UrlState, location: any, history: any) => {\n  return async (dispatch: any) => {\n    if (urlState.mapId) {\n      dispatch(setMapId(urlState.mapId, location, history))\n    } else {\n      dispatch(setMapId(defaultMapId, location, history))\n    }\n    if (!urlState.odPanelVisible) {\n      dispatch(setOdPanelHidden(!urlState.odPanelVisible, location, history))\n    }\n  }\n}\n\nconst visitedKeyName = 'visited_22_03_17'\n\nexport const setVisitedStatusVisited = () => {\n  return async (dispatch: any) => {\n    Cookies.set(visitedKeyName, 'yes', { expires: 5184000 })\n    localStorage.setItem(visitedKeyName, 'yes')\n    dispatch({ type: 'VISITED_BEFORE' })\n  }\n}\n\nexport const getVisitedStatus = () => {\n  const visitedC = Cookies.get(visitedKeyName)\n  const visitedLs = localStorage.getItem(visitedKeyName)\n  if (visitedC === 'yes' || visitedLs === 'yes') return true\n  return false\n}\n\nexport const showWelcomeIfFirstVisit = () => {\n  return async (dispatch: any) => {\n    const visited = getVisitedStatus()\n    if (visited) {\n      dispatch({ type: 'VISITED_BEFORE' })\n    } else {\n      dispatch(showInfo())\n    }\n  }\n}\n\nexport const disableAnalyticsCookies = () => {\n  //@ts-ignore\n  window['ga-disable-G-JJJM7NNCXK'] = true\n  Cookies.set('gp-ga-disabled', 'yes')\n  localStorage.setItem('gp-ga-disabled', 'yes')\n  return async (dispatch: any) => {\n    dispatch({ type: 'GA-DISABLED' })\n  }\n}\n\nexport const maybeDisableAnalyticsCookies = () => {\n  return async (dispatch: any) => {\n    const gaDisabledCookie = Cookies.get('gp-ga-disabled')\n    const gaDisabledLs = localStorage.getItem('gp-ga-disabled')\n    if (gaDisabledCookie === 'yes' || gaDisabledLs === 'yes') {\n      //@ts-ignore\n      window['ga-disable-G-JJJM7NNCXK'] = true\n      dispatch({ type: 'GA-DISABLED' })\n    }\n  }\n}\n\nexport default visitorReducer\n","import axios from 'axios'\nimport { Coords } from '../types/types'\n\nconst endpoint = 'https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql'\n\ninterface CatTripPlanResponse {\n  data: { data: { plan: { itineraries: { duration: number; legs: { distance: number }[] }[] } } }\n}\n\nexport interface CarTripInfo {\n  distance: number\n  duration: number\n  co2min: number\n  co2max: number\n}\n\nconst getItineraryQuery = (origCoords: Coords, destCoords: Coords): string => {\n  return `{\n        plan(\n            from: {lat: ${origCoords[1]}, lon: ${origCoords[0]}}\n            to: {lat: ${destCoords[1]}, lon: ${destCoords[0]}}\n            numItineraries: 1\n            transportModes: { mode: CAR }\n            ) {\n                itineraries {\n                    duration\n                    legs {\n                      distance\n                    }\n                }\n            }\n        }`\n}\n\nexport const getTripInfo = async (\n  origCoords: Coords,\n  destCoords: Coords,\n): Promise<CarTripInfo | undefined> => {\n  const query = getItineraryQuery(origCoords, destCoords)\n  const headers = { 'Content-Type': 'application/json' }\n  try {\n    const response = (await axios({\n      method: 'post',\n      url: endpoint,\n      headers,\n      data: { query },\n    })) as CatTripPlanResponse\n    const itineraries = response.data.data.plan.itineraries\n    const distance =\n      itineraries.length > 0\n        ? itineraries[0].legs.length > 0\n          ? itineraries[0].legs[0].distance\n          : 0\n        : 0\n    const duration = itineraries.length > 0 ? itineraries[0].duration : 0\n    if (duration === 0 || distance === 0) {\n      return\n    }\n    const co2min = Math.round((distance / 1000) * 100)\n    const co2max = Math.round((distance / 1000) * 200)\n    return {\n      distance,\n      duration,\n      co2min,\n      co2max,\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n","import { turf } from '../utils/index'\nimport { Action } from 'redux'\nimport { LngLat, PointFeature, PointFeatureCollection, UserLocationReducer } from '../types/types'\n\nconst geoOptions = {\n  enableHighAccuracy: true,\n  maximumAge: 30000,\n  timeout: 8000,\n}\nconst initialUserLocation: UserLocationReducer = {\n  watchId: 0,\n  expireTime: '',\n  error: null,\n  lngLat: null,\n  userLocFC: turf.asFeatureCollection([] as PointFeature[]),\n  userLocHistory: [],\n}\n\ninterface UserLocationAction extends Action {\n  coords: [number, number]\n  lngLat: LngLat\n  userLocFC: PointFeatureCollection\n  watchId: number\n}\n\ninterface Position {\n  coords: {\n    latitude: number\n    longitude: number\n  }\n}\n\nconst userLocationReducer = (\n  store: UserLocationReducer = initialUserLocation,\n  action: UserLocationAction,\n): UserLocationReducer => {\n  switch (action.type) {\n    case 'START_TRACKING_USER_LOCATION':\n      return {\n        ...store,\n        error: 'Waiting for location...',\n      }\n\n    case 'SET_WATCH_ID':\n      return { ...store, watchId: action.watchId }\n\n    case 'ERROR_IN_POSITIONING': {\n      const error = store.userLocHistory.length > 0 ? null : 'Have you enabled location services?'\n      return {\n        ...store,\n        error,\n      }\n    }\n    case 'ZOOM_TO_USER_LOCATION':\n    case 'UPDATE_USER_LOCATION': {\n      return {\n        ...store,\n        userLocFC: action.userLocFC,\n        lngLat: action.lngLat,\n        userLocHistory: store.userLocHistory.concat([action.coords]),\n      }\n    }\n    case 'RESET_USER_LOCATION':\n      return initialUserLocation\n\n    default:\n      return store\n  }\n}\n\nexport const startTrackingUserLocation = () => {\n  return (dispatch: any) => {\n    dispatch({ type: 'START_TRACKING_USER_LOCATION' })\n    dispatch(updateUserLocation())\n  }\n}\n\nexport const updateUserLocation = () => {\n  return (dispatch: any) => {\n    const geoError = () => {\n      dispatch({ type: 'ERROR_IN_POSITIONING' })\n    }\n    const watchPosition = (pos: Position) => {\n      const lng = pos.coords.longitude\n      const lat = pos.coords.latitude\n      const userLocFC = turf.asFeatureCollection([turf.asPoint([lng, lat])])\n      dispatch({\n        type: 'UPDATE_USER_LOCATION',\n        lngLat: { lng, lat },\n        coords: [lng, lat],\n        userLocFC,\n      })\n    }\n    const watchId = navigator.geolocation.watchPosition(watchPosition, geoError, geoOptions)\n    console.log('geolocation watchId:', watchId)\n    dispatch({ type: 'SET_WATCH_ID', watchId })\n  }\n}\n\nexport const zoomToUserLocation = (userLocation: UserLocationReducer) => {\n  console.log('userLocation in zoom to user location', userLocation)\n  return (dispatch: any) => {\n    const handleNaviUserLocationZoom = (pos: Position) => {\n      const lng = pos.coords.longitude\n      const lat = pos.coords.latitude\n      const userLocFC = turf.asFeatureCollection([turf.asPoint([lng, lat])])\n      console.log('pos.coords', pos.coords)\n      dispatch({\n        type: 'ZOOM_TO_USER_LOCATION',\n        lngLat: { lng, lat },\n        coords: [lng, lat],\n        userLocFC,\n      })\n    }\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(handleNaviUserLocationZoom)\n    }\n    const currentUserLngLat = turf.getLngLatFromFC(userLocation.userLocFC)\n    if (currentUserLngLat) {\n      dispatch({\n        type: 'ZOOM_TO_USER_LOCATION',\n        lngLat: currentUserLngLat,\n        userLocFC: userLocation.userLocFC,\n      })\n    }\n    if (userLocation.watchId === 0) dispatch(startTrackingUserLocation())\n  }\n}\n\nexport default userLocationReducer\n","import { GeocodingResult } from '../types/types'\n\n// edits 9.10.23 by Roope Heinonen\n// update digitansit api url to correct one\n// add api key which came mandatory\n\nconst baseUrl =\n  process.env.REACT_APP_DT_GEOCODING_URL || 'https://dev-api.digitransit.fi/geocoding/v1/search?'\n\nconst getParamString = (params: Record<string, any>): string => {\n  let str = ''\n  for (let key in params) {\n    if (str !== '') {\n      str += '&'\n    }\n    str += key + '=' + params[key]\n  }\n  return str\n}\n\nconst hmaBoundaryPoly =\n  '25.5345 60.2592,25.3881 60.1693,25.3559 60.103,25.3293 59.9371,24.2831 59.78402,24.2721 59.95501,24.2899 60.00895,24.3087 60.01947,24.1994 60.12753,24.1362 60.1114,24.1305 60.12847,24.099 60.1405,24.0179 60.1512,24.0049 60.1901,24.0445 60.1918,24.0373 60.2036,24.0796 60.2298,24.1652 60.2428,24.3095 60.2965,24.3455 60.2488,24.428 60.3002,24.5015 60.2872,24.4888 60.3306,24.5625 60.3142,24.5957 60.3242,24.6264 60.3597,24.666 60.3638,24.7436 60.3441,24.9291 60.4523,24.974 60.5253,24.9355 60.5131,24.8971 60.562,25.0388 60.5806,25.1508 60.5167,25.1312 60.4938,25.0385 60.512,25.057 60.4897,25.0612 60.4485,25.1221 60.4474,25.1188 60.4583,25.149 60.4621,25.1693 60.5062,25.2242 60.5016,25.3661 60.4118,25.3652 60.3756'\n\ninterface GeocodingFeatureCollection {\n  bbox?: [number, number, number, number]\n  features: GeocodingResult[]\n  type: 'FeatureCollection'\n}\n\nexport const geocodeAddress = async (\n  text: string,\n  resultCount: number,\n): Promise<GeocodingResult[]> => {\n  const params = {\n    text,\n    'boundary.polygon': hmaBoundaryPoly,\n    size: resultCount,\n    lang: 'fi',\n    sources: 'oa,osm,nlsfi',\n    'digitransit-subscription-key': process.env.REACT_APP_DT_GEOCODING_KEY || '',\n  }\n  const uri = baseUrl + getParamString(params)\n  const response = await fetch(encodeURI(uri))\n  const data = (await response.json()) as GeocodingFeatureCollection\n  // filter out duplicate results by label\n  return data.features.filter((feat, index, self) => {\n    return (\n      index ===\n      self.findIndex(fFeat => {\n        return feat.properties.label === fFeat.properties.label\n      })\n    )\n  })\n}\n","import { Action } from 'redux'\nimport { ChangeEvent } from 'react'\nimport { closePopup } from './mapPopupReducer'\nimport { zoomToFC } from './mapReducer'\nimport { startTrackingUserLocation } from './userLocationReducer'\nimport { turf } from './../utils/index'\nimport { extentFeat, egOrigin } from './../constants'\nimport * as geocoding from './../services/geocoding'\nimport { LngLat, GeocodingResult, OdPlace, OriginReducer, UserLocationReducer } from '../types/types'\n\nexport enum LocationType {\n  ADDRESS = 'address',\n  USER_LOCATION = 'user',\n  MAP_LOCATION = 'map',\n}\n\nexport enum OdType {\n  ORIGIN = 'orig',\n  DESTINATION = 'dest',\n}\n\nconst initialOrigin: OriginReducer = {\n  error: null,\n  originInputText: process.env.REACT_APP_USE_DEFAULT_OD === 'True' ? egOrigin.properties.label : '',\n  originObject: process.env.REACT_APP_USE_DEFAULT_OD === 'True' ? (egOrigin as OdPlace) : null,\n  originOptions: [],\n  originOptionsVisible: false,\n  waitingUserLocOrigin: false,\n}\n\ninterface OdInputAction extends Action {\n  originInputText: string\n  originOptions: GeocodingResult[]\n  originObject: OdPlace\n  name: string\n  coords: [number, number]\n  error: string | null\n}\n\nconst originReducer = (\n  store: OriginReducer = initialOrigin,\n  action: OdInputAction,\n): OriginReducer => {\n  switch (action.type) {\n    case 'UPDATE_ORIGIN_INPUT_VALUE':\n      return {\n        ...store,\n        originInputText: action.originInputText,\n        originObject: null,\n        originOptionsVisible: true,\n        waitingUserLocOrigin: false,\n        error: null,\n      }\n\n    case 'SET_ORIGIN_OPTIONS':\n      return {\n        ...store,\n        originOptions: action.originOptions,\n      }\n\n    case 'HIDE_ORIGIN_OPTIONS':\n      return { ...store, originOptionsVisible: false }\n\n    case 'TOGGLE_ORIGIN_OPTIONS':\n      return { ...store, originOptionsVisible: !store.originOptionsVisible }\n\n    case 'WAIT_FOR_USER_LOC_ORIGIN':\n      return { ...store, originInputText: ' ', waitingUserLocOrigin: true }\n\n    case 'SET_GEOCODED_ORIGIN':\n      return {\n        ...store,\n        originObject: action.originObject,\n        originInputText: action.name,\n        originOptionsVisible: false,\n        waitingUserLocOrigin: false,\n        error: action.error,\n      }\n\n    case 'SET_ORIGIN_TO_USER_LOCATION':\n      return {\n        ...store,\n        originObject: action.originObject,\n        originInputText: action.originObject.properties.label,\n        waitingUserLocOrigin: false,\n        error: action.error,\n      }\n\n    case 'UPDATE_USER_LOCATION': {\n      if (store.waitingUserLocOrigin) {\n        const originObject = getOriginFromCoords(action.coords, LocationType.USER_LOCATION)\n        const error = originWithinSupportedArea(originObject)\n        return {\n          ...store,\n          originObject,\n          originInputText: originObject.properties.label,\n          waitingUserLocOrigin: false,\n          error,\n        }\n      } else {\n        return store\n      }\n    }\n\n    case 'SET_ORIGIN_FROM_COORDINATES': {\n      return {\n        ...store,\n        originObject: action.originObject,\n        originInputText: action.originObject.properties.label,\n        waitingUserLocOrigin: false,\n        error: action.error,\n      }\n    }\n\n    case 'RESET_ORIGIN_INPUT':\n      return { ...initialOrigin, originObject: null, originInputText: '' }\n\n    default:\n      return store\n  }\n}\n\nconst showingCoordinates = (inputText: string): boolean => {\n  const numberCount = inputText.replace(/[^0-9]/g, '').length\n  return numberCount > Math.round(inputText.length / 2)\n}\n\nexport const setOriginInputText = (event: ChangeEvent<HTMLInputElement>) => {\n  return async (dispatch: any) => {\n    const originInputText = event.target ? event.target.value : ''\n    dispatch({ type: 'UPDATE_ORIGIN_INPUT_VALUE', originInputText })\n    if (originInputText.length > 2 && !showingCoordinates(originInputText)) {\n      const originOptions = await geocoding.geocodeAddress(originInputText, 6)\n      dispatch({ type: 'SET_ORIGIN_OPTIONS', originOptions })\n    } else {\n      dispatch({ type: 'SET_ORIGIN_OPTIONS', originOptions: [] })\n    }\n  }\n}\n\nexport const setGeocodedOrigin = (place: GeocodingResult, destObject: OdPlace | null) => {\n  return async (dispatch: any) => {\n    const originObject = getOriginFromGeocodingResult(place)\n    const error = originWithinSupportedArea(originObject)\n    dispatch({ type: 'SET_GEOCODED_ORIGIN', originObject, name: place.properties.name, error })\n    const odFc = turf.asFeatureCollection(destObject ? [originObject, destObject] : [originObject])\n    dispatch(zoomToFC(odFc))\n  }\n}\n\nexport const setUsedOrigin = (originObject: OdPlace, destObject: OdPlace | null) => {\n  return async (dispatch: any) => {\n    originObject.properties.odType = OdType.ORIGIN\n    const error = originWithinSupportedArea(originObject)\n    dispatch({\n      type: 'SET_GEOCODED_ORIGIN',\n      originObject,\n      name: originObject.properties.name,\n      error,\n    })\n    const odFc = turf.asFeatureCollection(destObject ? [originObject, destObject] : [originObject])\n    dispatch(zoomToFC(odFc))\n  }\n}\n\nexport const setOriginDuringRouting = (originObject: OdPlace) => {\n  return async (dispatch: any) => {\n    dispatch({\n      type: 'SET_GEOCODED_ORIGIN',\n      originObject,\n      name: originObject.properties.name,\n      error: null,\n    })\n  }\n}\n\nexport const hideOriginOptions = () => {\n  return { type: 'HIDE_ORIGIN_OPTIONS' }\n}\n\nexport const resetOriginInput = () => {\n  return { type: 'RESET_ORIGIN_INPUT' }\n}\n\nexport const toggleOriginOptionsVisible = () => {\n  return { type: 'TOGGLE_ORIGIN_OPTIONS' }\n}\n\nexport const useUserLocationOrigin = (\n  e: any,\n  userLocation: UserLocationReducer,\n  destObject: OdPlace | null,\n) => {\n  e.stopPropagation()\n  return async (dispatch: any) => {\n    dispatch({ type: 'RESET_ORIGIN_INPUT' })\n    dispatch({ type: 'RESET_PATHS' })\n    closePopup()\n    const lngLat = userLocation.lngLat\n    if (lngLat) {\n      const originObject = getOriginFromCoords([lngLat.lng, lngLat.lat], LocationType.USER_LOCATION)\n      const error = originWithinSupportedArea(originObject)\n      dispatch({\n        type: 'SET_ORIGIN_TO_USER_LOCATION',\n        originObject,\n        error,\n      })\n      const odFc = turf.asFeatureCollection(\n        destObject ? [originObject, destObject] : [originObject],\n      )\n      dispatch(zoomToFC(odFc))\n    } else {\n      dispatch({ type: 'WAIT_FOR_USER_LOC_ORIGIN' })\n      dispatch(startTrackingUserLocation())\n    }\n  }\n}\n\nexport const setOriginFromMap = (lngLat: LngLat) => {\n  return async (dispatch: any) => {\n    const originObject = getOriginFromCoords([lngLat.lng, lngLat.lat], LocationType.MAP_LOCATION)\n    const error = originWithinSupportedArea(originObject)\n    dispatch({ type: 'RESET_PATHS' })\n    dispatch({ type: 'SET_ORIGIN_FROM_COORDINATES', originObject, error })\n    closePopup()\n  }\n}\n\nexport const setOriginFromCoordinates = (lng: number, lat: number) => {\n  return async (dispatch: any) => {\n    const originObject = getOriginFromCoords([lng, lat], LocationType.MAP_LOCATION)\n    const error = originWithinSupportedArea(originObject)\n    dispatch({ type: 'RESET_PATHS' })\n    dispatch({ type: 'SET_ORIGIN_FROM_COORDINATES', originObject, error })\n  }\n}\n\nexport const getOriginFromGeocodingResult = (place: GeocodingResult): OdPlace => {\n  return {\n    ...place,\n    type: 'Feature',\n    properties: {\n      ...place.properties,\n      locationType: LocationType.ADDRESS,\n      odType: OdType.ORIGIN,\n    },\n  }\n}\n\nconst roundCoords = (coord: number) => {\n  return Math.round(coord * 10000) / 10000\n}\n\nconst getOriginFromCoords = (coordinates: [number, number], locType: LocationType): OdPlace => {\n  const label = String(roundCoords(coordinates[0])) + ' ' + String(roundCoords(coordinates[1]))\n  return {\n    geometry: {\n      type: 'Point',\n      coordinates,\n    },\n    properties: {\n      label,\n      name: label,\n      locationType: locType,\n      odType: OdType.ORIGIN,\n    },\n    type: 'Feature',\n  }\n}\n\nconst originWithinSupportedArea = (origin: OdPlace): string | null => {\n  if (!turf.within(origin, extentFeat)) {\n    return 'notif.error.origin_outside_extent'\n  }\n  return null\n}\n\nexport default originReducer\n","import { Action } from 'redux'\nimport { ChangeEvent } from 'react'\nimport { LocationType, OdType } from './originReducer'\nimport { closePopup } from './mapPopupReducer'\nimport { zoomToFC } from './mapReducer'\nimport { extentFeat, egDest } from './../constants'\nimport { turf } from './../utils/index'\nimport * as geocoding from './../services/geocoding'\nimport { OdPlace, LngLat, DestinationReducer, GeocodingResult } from '../types/types'\n\nconst initialDest: DestinationReducer = {\n  error: null,\n  destInputText: process.env.REACT_APP_USE_DEFAULT_OD === 'True' ? egDest.properties.label : '',\n  destObject: process.env.REACT_APP_USE_DEFAULT_OD === 'True' ? (egDest as OdPlace) : null,\n  destOptions: [],\n  destOptionsVisible: false,\n}\n\ninterface DestinationAction extends Action {\n  destInputText: string\n  destOptions: GeocodingResult[]\n  destObject: OdPlace\n  name: string\n  error: string | null\n}\n\nconst destinationReducer = (\n  store: DestinationReducer = initialDest,\n  action: DestinationAction,\n): DestinationReducer => {\n  switch (action.type) {\n    case 'UPDATE_DESTINATION_INPUT_VALUE':\n      return {\n        ...store,\n        destInputText: action.destInputText,\n        destObject: null,\n        error: null,\n      } // no need to set destination options visible yet (let's wait for geocoding results)\n\n    case 'SET_DESTINATION_OPTIONS':\n      return {\n        ...store,\n        destOptions: action.destOptions,\n        destOptionsVisible: true,\n      }\n\n    case 'HIDE_DESTINATION_OPTIONS':\n      return { ...store, destOptionsVisible: false }\n\n    case 'TOGGLE_DESTINATION_OPTIONS':\n      return { ...store, destOptionsVisible: !store.destOptionsVisible }\n\n    case 'SET_GEOCODED_DESTINATION':\n      return {\n        ...store,\n        destObject: action.destObject,\n        destInputText: action.name,\n        destOptionsVisible: false,\n        error: action.error,\n      }\n\n    case 'SET_DESTINATION_FROM_COORDINATES': {\n      return {\n        ...store,\n        destObject: action.destObject,\n        destInputText: action.destObject.properties.label,\n        destOptionsVisible: false,\n        error: action.error,\n      }\n    }\n\n    case 'RESET_DESTINATION_INPUT':\n      return { ...initialDest, destObject: null, destInputText: '' }\n\n    default:\n      return store\n  }\n}\n\nconst showingCoordinates = (inputText: string): boolean => {\n  const numberCount = inputText.replace(/[^0-9]/g, '').length\n  return numberCount > Math.round(inputText.length / 2)\n}\n\nexport const setDestinationInputText = (event: ChangeEvent<HTMLInputElement>) => {\n  return async (dispatch: any) => {\n    const destInputText = event.target ? event.target.value : ''\n    dispatch({ type: 'UPDATE_DESTINATION_INPUT_VALUE', destInputText })\n    if (destInputText.length > 2 && !showingCoordinates(destInputText)) {\n      const destOptions = await geocoding.geocodeAddress(destInputText, 6)\n      dispatch({ type: 'SET_DESTINATION_OPTIONS', destOptions })\n    } else {\n      dispatch({ type: 'HIDE_DESTINATION_OPTIONS' })\n      dispatch({ type: 'SET_DESTINATION_OPTIONS', destOptions: [] })\n    }\n  }\n}\n\nexport const setGeocodedDestination = (place: GeocodingResult, originObject: OdPlace | null) => {\n  return async (dispatch: any) => {\n    const destObject = getDestinationFromGeocodingResult(place)\n    const error = destWithinSupportedArea(destObject)\n    dispatch({ type: 'SET_GEOCODED_DESTINATION', destObject, error, name: place.properties.name })\n    const odFc = turf.asFeatureCollection(originObject ? [originObject, destObject] : [destObject])\n    dispatch(zoomToFC(odFc))\n  }\n}\n\nexport const setUsedDestination = (destObject: OdPlace, originObject: OdPlace | null) => {\n  return async (dispatch: any) => {\n    destObject.properties.odType = OdType.DESTINATION\n    const error = destWithinSupportedArea(destObject)\n    dispatch({\n      type: 'SET_GEOCODED_DESTINATION',\n      destObject,\n      error,\n      name: destObject.properties.name,\n    })\n    const odFc = turf.asFeatureCollection(originObject ? [originObject, destObject] : [destObject])\n    dispatch(zoomToFC(odFc))\n  }\n}\n\nexport const setDestinationDuringRouting = (destObject: OdPlace) => {\n  return async (dispatch: any) => {\n    dispatch({\n      type: 'SET_GEOCODED_DESTINATION',\n      destObject,\n      name: destObject.properties.name,\n      error: null,\n    })\n  }\n}\n\nexport const hideDestinationOptions = () => {\n  return { type: 'HIDE_DESTINATION_OPTIONS' }\n}\n\nexport const resetDestinationInput = () => {\n  return { type: 'RESET_DESTINATION_INPUT' }\n}\n\nexport const toggleDestinationOptionsVisible = () => {\n  return { type: 'TOGGLE_DESTINATION_OPTIONS' }\n}\n\nexport const setDestinationFromMap = (lngLat: LngLat) => {\n  return async (dispatch: any) => {\n    const destObject = getDestinationFromCoords([lngLat.lng, lngLat.lat], LocationType.MAP_LOCATION)\n    const error = destWithinSupportedArea(destObject)\n    dispatch({ type: 'RESET_PATHS' })\n    dispatch({ type: 'SET_DESTINATION_FROM_COORDINATES', destObject, error })\n    closePopup()\n  }\n}\n\nexport const setDestinationFromCoordinates = (lng: number, lat: number) => {\n  return async (dispatch: any) => {\n    const destObject = getDestinationFromCoords([lng, lat], LocationType.MAP_LOCATION)\n    const error = destWithinSupportedArea(destObject)\n    dispatch({ type: 'RESET_PATHS' })\n    dispatch({ type: 'SET_DESTINATION_FROM_COORDINATES', destObject, error })\n  }\n}\n\nexport const getDestinationFromGeocodingResult = (place: GeocodingResult): OdPlace => {\n  return {\n    ...place,\n    type: 'Feature',\n    properties: {\n      ...place.properties,\n      locationType: LocationType.ADDRESS,\n      odType: OdType.DESTINATION,\n    },\n  }\n}\n\nconst roundCoords = (coord: number) => {\n  return Math.round(coord * 10000) / 10000\n}\n\nconst getDestinationFromCoords = (\n  coordinates: [number, number],\n  locType: LocationType,\n): OdPlace => {\n  const label = String(roundCoords(coordinates[0])) + ' ' + String(roundCoords(coordinates[1]))\n  return {\n    geometry: {\n      type: 'Point',\n      coordinates,\n    },\n    properties: {\n      label,\n      name: label,\n      locationType: locType,\n      odType: OdType.DESTINATION,\n    },\n    type: 'Feature',\n  }\n}\n\nconst destWithinSupportedArea = (destination: OdPlace): string | null => {\n  if (!turf.within(destination, extentFeat)) {\n    return 'notif.error.destination_outside_extent'\n  }\n  return null\n}\n\nexport default destinationReducer\n","import { turf } from '../utils/index'\nimport * as paths from './../services/paths'\nimport { ExposureMode, TravelMode } from './../services/paths'\nimport * as carTrips from './../services/carTrips'\nimport { zoomToFC } from './mapReducer'\nimport { setOriginDuringRouting, getOriginFromGeocodingResult, LocationType } from './originReducer'\nimport {\n  setDestinationDuringRouting,\n  getDestinationFromGeocodingResult,\n} from './destinationReducer'\nimport { showNotification } from './notificationReducer'\nimport { extentFeat, noPathsErrorByExposureMode } from './../constants'\nimport { utils } from './../utils/index'\nimport { Action } from 'redux'\nimport * as geocoding from './../services/geocoding'\nimport { getErrorNotifKey } from '../utils/translator/dictionary'\nimport {\n  PathsReducer,\n  OdCoords,\n  PathFeature,\n  LengthLimit,\n  OdPlace,\n  PathData,\n  EdgeFeatureCollection,\n  PathFeatureCollection,\n  OriginReducer,\n  OdFeatureCollection,\n  DestinationReducer,\n  EnvExposureMode,\n} from './../types/types'\n\nconst initialPaths: PathsReducer = {\n  cleanPathsAvailable: false,\n  travelMode: TravelMode.WALK,\n  showingPathsOfTravelMode: null,\n  showingPathsOfExposureMode: null,\n  showingStatsType: null,\n  odCoords: null,\n  selPathFC: { type: 'FeatureCollection', features: [] },\n  shortPathFC: { type: 'FeatureCollection', features: [] },\n  envOptimizedPathFC: { type: 'FeatureCollection', features: [] },\n  pathEdgeFC: { type: 'FeatureCollection', features: [] },\n  openedPath: null,\n  lengthLimit: { limit: 0, count: 0, label: '', cost_coeff: 0 },\n  lengthLimits: [],\n  waitingPaths: false,\n  showingPaths: false,\n  carTripInfo: undefined,\n  routingId: 0,\n}\n\ninterface PathsAction extends Action {\n  travelMode: TravelMode\n  exposureMode: EnvExposureMode\n  b_available: boolean\n  routingId: number\n  odCoords: OdCoords\n  shortPath: PathFeature[]\n  lengthLimit: LengthLimit\n  lengthLimits: LengthLimit[]\n  initialLengthLimit: LengthLimit\n  origCoords: [number, number]\n  destCoords: [number, number]\n  envOptimizedPaths: PathFeature[]\n  pathEdgeFC: EdgeFeatureCollection\n  carTripInfo: carTrips.CarTripInfo | undefined\n  selPathId: string\n  selPath: PathFeature\n  path: PathFeature\n}\n\ninterface RoutingOd {\n  error: string | null\n  originCoords: [number, number] | null\n  destCoords: [number, number] | null\n  newlyGeocodedOrigin: OdPlace | null\n  newlyGeocodedDest: OdPlace | null\n}\n\nconst pathsReducer = (store: PathsReducer = initialPaths, action: PathsAction): PathsReducer => {\n  switch (action.type) {\n    case 'SET_AQI_STATUS':\n      return {\n        ...store,\n        cleanPathsAvailable: action.b_available,\n      }\n\n    case 'SET_TRAVEL_MODE':\n      return {\n        ...store,\n        travelMode: action.travelMode,\n      }\n\n    case 'ROUTING_STARTED':\n      return {\n        ...store,\n        waitingPaths: true,\n        routingId: action.routingId,\n        travelMode: action.travelMode,\n      }\n\n    case 'SET_SHORTEST_PATH': {\n      const cancelledRouting = store.routingId !== action.routingId\n      if (cancelledRouting) return store\n      return {\n        ...store,\n        odCoords: action.odCoords,\n        waitingPaths: false,\n        showingPaths: true,\n        carTripInfo: undefined,\n        shortPathFC: turf.asFeatureCollection(action.shortPath),\n      }\n    }\n\n    case 'SET_LENGTH_LIMITS': {\n      const cancelledRouting = store.routingId !== action.routingId\n      if (cancelledRouting) return store\n      return {\n        ...store,\n        lengthLimits: action.lengthLimits,\n        lengthLimit: action.initialLengthLimit,\n      }\n    }\n\n    case 'SET_ENV_OPTIMIZED_PATHS': {\n      const cancelledRouting = store.routingId !== action.routingId\n      if (cancelledRouting) return store\n      return {\n        ...store,\n        showingPathsOfTravelMode: action.travelMode,\n        showingPathsOfExposureMode: action.exposureMode,\n        showingStatsType: action.exposureMode,\n        envOptimizedPathFC: turf.asFeatureCollection(action.envOptimizedPaths),\n      }\n    }\n\n    case 'SET_EDGE_FC': {\n      const cancelledRouting = store.routingId !== action.routingId\n      if (cancelledRouting) return store\n      return {\n        ...store,\n        pathEdgeFC: action.pathEdgeFC ? action.pathEdgeFC : store.pathEdgeFC,\n      }\n    }\n\n    case 'SET_SELECTED_PATH': {\n      if (action.routingId) {\n        const cancelledRouting = store.routingId !== action.routingId\n        if (cancelledRouting) return store\n      }\n      // unselect path by clicking it again\n      if (clickedPathAgain(store.selPathFC, action.selPathId)) {\n        return {\n          ...store,\n          selPathFC: turf.asFeatureCollection([]),\n        }\n      } else {\n        let selPath: PathFeature[]\n        if (action.selPathId === 'fast') {\n          selPath = store.shortPathFC.features\n        } else {\n          selPath = store.envOptimizedPathFC.features.filter(\n            feat => feat.properties!.id === action.selPathId,\n          )\n        }\n        console.log('selecting path:', selPath! ? selPath![0].properties : 'no selection')\n        return {\n          ...store,\n          // if openedPath is set, change it to the selected path\n          openedPath: store.openedPath ? (selPath! ? selPath![0] : null) : null,\n          selPathFC: turf.asFeatureCollection(selPath!),\n        }\n      }\n    }\n\n    case 'SET_CAR_TRIP_INFO':\n      return {\n        ...store,\n        carTripInfo: action.carTripInfo,\n      }\n\n    case 'UNSET_SELECTED_PATH':\n      return {\n        ...store,\n        selPathFC: turf.asFeatureCollection([]),\n      }\n\n    case 'SET_OPENED_PATH':\n      return {\n        ...store,\n        selPathFC: turf.asFeatureCollection([action.path]),\n        openedPath: action.path,\n      }\n\n    case 'UNSET_OPENED_PATH':\n      return {\n        ...store,\n        openedPath: null,\n      }\n\n    case 'SET_LENGTH_LIMIT':\n      return {\n        ...store,\n        lengthLimit: action.lengthLimit,\n      }\n\n    case 'ERROR_IN_ROUTING': {\n      const travelMode = store.showingPathsOfTravelMode\n        ? store.showingPathsOfTravelMode\n        : store.travelMode\n      return { ...store, waitingPaths: false, travelMode }\n    }\n\n    case 'CLOSE_PATHS': {\n      return {\n        ...store,\n        selPathFC: { type: 'FeatureCollection', features: [] },\n        openedPath: null,\n      }\n    }\n\n    case 'RESET_PATHS':\n      return {\n        ...initialPaths,\n        cleanPathsAvailable: store.cleanPathsAvailable,\n        travelMode: store.travelMode,\n        routingId: store.routingId + 1,\n      }\n\n    default:\n      return store\n  }\n}\n\nexport const testGreenPathServiceConnection = () => {\n  return async (dispatch: any) => {\n    const startTime = performance.now()\n    try {\n      const connTestResponse = await paths.getConnectionTestResponse()\n      const tookTime = Math.round(performance.now() - startTime)\n      console.log(\n        'connection to gp service ok, response:',\n        connTestResponse,\n        'took:',\n        tookTime,\n        'ms',\n      )\n      if (tookTime < 3000) {\n        dispatch({ type: 'QP_CONNECTION_OK', tookTime })\n      } else {\n        dispatch({ type: 'QP_CONNECTION_SLOW', tookTime })\n        dispatch(showNotification('notif.error.gp_service_is_slow', 'info', 8))\n      }\n    } catch (error) {\n      const tookTime = Math.round(performance.now() - startTime)\n      console.log('error in connecting to qp service, took', tookTime, 'ms\\n', error)\n      dispatch({ type: 'QP_CONNECTION_ERROR', tookTime })\n      dispatch(showNotification('notif.error.no_connection_to_gp_service', 'error', 15))\n    }\n  }\n}\n\nexport const testCleanPathServiceStatus = () => {\n  return async (dispatch: any) => {\n    try {\n      const aqStatus = await paths.getCleanPathServiceStatus()\n      console.log('received clean path service status:', aqStatus)\n      dispatch({ type: 'SET_AQI_STATUS', b_available: aqStatus.aq_data_updated })\n      if (!aqStatus.aq_data_updated) {\n        dispatch(showNotification('notif.error.no_real_time_aq_available', 'info', 10))\n      }\n    } catch (error) {\n      dispatch({ type: 'SET_AQI_STATUS', b_available: false })\n      console.log('error in retrieving clean path service status:', error)\n    }\n  }\n}\n\nconst confirmLongDistance = (origCoords: [number, number], destCoords: [number, number]) => {\n  const distance = turf.getDistance(origCoords, destCoords)\n  if (distance > 9000) {\n    if (!window.confirm('Long distance routing may take longer to complete')) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const setTravelMode = (travelMode: TravelMode) => {\n  return { type: 'SET_TRAVEL_MODE', travelMode }\n}\n\nconst getRoutingOd = async (\n  origin: OriginReducer,\n  dest: DestinationReducer,\n): Promise<RoutingOd> => {\n  const routingOd: RoutingOd = {\n    error: null,\n    originCoords: null,\n    destCoords: null,\n    newlyGeocodedOrigin: null,\n    newlyGeocodedDest: null,\n  }\n  if (origin.originObject) {\n    routingOd.originCoords = origin.originObject.geometry.coordinates\n  } else {\n    console.log('geocoding origin input prior to routing...', origin.originInputText)\n    const originPlace = await geocoding.geocodeAddress(origin.originInputText, 1)\n    if (originPlace.length === 0) {\n      routingOd.error = 'notif.error.origin_not_found'\n      return routingOd\n    } else if (!turf.within(originPlace[0], extentFeat)) {\n      routingOd.error = 'notif.error.origin_outside_extent'\n      return routingOd\n    } else {\n      routingOd.newlyGeocodedOrigin = getOriginFromGeocodingResult(originPlace[0])\n      routingOd.originCoords = originPlace[0].geometry.coordinates\n    }\n  }\n  if (dest.destObject) {\n    routingOd.destCoords = dest.destObject.geometry.coordinates\n  } else {\n    console.log('geocoding destination input prior to routing...', dest.destInputText)\n    const destPlace = await geocoding.geocodeAddress(dest.destInputText, 1)\n    if (destPlace.length === 0) {\n      routingOd.error = 'notif.error.destination_not_found'\n      return routingOd\n    } else if (!turf.within(destPlace[0], extentFeat)) {\n      routingOd.error = 'notif.error.destination_outside_extent'\n      return routingOd\n    } else {\n      routingOd.newlyGeocodedDest = getDestinationFromGeocodingResult(destPlace[0])\n      routingOd.destCoords = destPlace[0].geometry.coordinates\n    }\n  }\n  return routingOd\n}\n\nexport const routeEnvOptimizedPaths = (\n  origin: OriginReducer,\n  dest: DestinationReducer,\n  travelMode: TravelMode,\n  exposureMode: ExposureMode,\n  prevRoutingId: number,\n) => {\n  return async (dispatch: any) => {\n    const {\n      error,\n      originCoords,\n      destCoords,\n      newlyGeocodedOrigin,\n      newlyGeocodedDest,\n    } = await getRoutingOd(origin, dest)\n    if (error) {\n      dispatch({ type: 'ERROR_IN_ROUTING' })\n      dispatch(showNotification(error, 'error', 8))\n      return\n    }\n    if (newlyGeocodedOrigin) {\n      dispatch(setOriginDuringRouting(newlyGeocodedOrigin))\n      dispatch({ type: 'SET_USED_OD', odObject: newlyGeocodedOrigin })\n    } else if (origin.originObject?.properties.locationType === LocationType.ADDRESS) {\n      dispatch({ type: 'SET_USED_OD', odObject: origin.originObject })\n    }\n    if (newlyGeocodedDest) {\n      dispatch(setDestinationDuringRouting(newlyGeocodedDest))\n      dispatch({ type: 'SET_USED_OD', odObject: newlyGeocodedDest })\n    } else if (dest.destObject?.properties.locationType === LocationType.ADDRESS) {\n      dispatch({ type: 'SET_USED_OD', odObject: dest.destObject })\n    }\n    if (!confirmLongDistance(originCoords!, destCoords!)) {\n      return\n    }\n    const routingId = prevRoutingId + 1\n    dispatch({ type: 'CLOSE_PATHS' })\n    dispatch({ type: 'ROUTING_STARTED', originCoords, destCoords, routingId, travelMode })\n    try {\n      const pathData = await paths.getPaths(originCoords!, destCoords!, travelMode, exposureMode)\n      dispatch(\n        setEnvOptimizedPaths(routingId, pathData, travelMode, exposureMode, [\n          originCoords!,\n          destCoords!,\n        ]),\n      )\n    } catch (error) {\n      console.log('caught error:', error)\n      dispatch({ type: 'ERROR_IN_ROUTING' })\n      if (typeof error === 'string') {\n        dispatch(showNotification(getErrorNotifKey(error), 'error', 8))\n      } else {\n        dispatch(showNotification('notif.error.routing.general_routing_error', 'error', 8))\n      }\n      return\n    }\n  }\n}\n\nexport const setEnvOptimizedPaths = (\n  routingId: number,\n  pathData: PathData,\n  travelMode: TravelMode,\n  exposureMode: ExposureMode,\n  odCoords: OdCoords,\n) => {\n  return async (dispatch: any) => {\n    dispatch({ type: 'CLOSE_PATHS' })\n    const pathFeats: PathFeature[] = pathData.path_FC.features\n    const shortPath = pathFeats.filter(feat => feat.properties.type === 'fast')\n    const envOptimizedPaths = pathFeats.filter(feat => {\n      return (\n        (feat.properties.type === exposureMode || feat.properties.type === ExposureMode.SAFE) &&\n        feat.properties.len_diff !== 0\n      )\n    })\n    const lengthLimits = utils.getLengthLimits(pathFeats)\n    const initialLengthLimit = utils.getInitialLengthLimit(\n      lengthLimits,\n      exposureMode,\n      envOptimizedPaths.length,\n    )\n    dispatch({ type: 'SET_LENGTH_LIMITS', lengthLimits, initialLengthLimit, routingId })\n    dispatch({ type: 'SET_SHORTEST_PATH', shortPath, odCoords, routingId })\n    dispatch({\n      type: 'SET_ENV_OPTIMIZED_PATHS',\n      routingId,\n      travelMode,\n      exposureMode,\n      envOptimizedPaths,\n    })\n    dispatch({ type: 'SET_EDGE_FC', pathEdgeFC: pathData.edge_FC, routingId })\n    if (envOptimizedPaths.length > 0) {\n      dispatch({ type: 'SET_SELECTED_PATH', selPathId: 'fast', routingId })\n    }\n    if (envOptimizedPaths.length === 0) {\n      const warn_key = noPathsErrorByExposureMode[exposureMode]\n      dispatch(showNotification(warn_key, 'info', 7))\n    }\n  }\n}\n\nexport const setCarTripInfo = (odCoords: OdCoords) => {\n  return async (dispatch: any) => {\n    const data = await carTrips.getTripInfo(odCoords[0], odCoords[1])\n    if (data) {\n      dispatch({ type: 'SET_CAR_TRIP_INFO', carTripInfo: data })\n    } else {\n      dispatch(showNotification('notif.error.no_car_trips_found', 'error', 4))\n    }\n  }\n}\n\nexport const setSelectedPath = (selPathId: string) => {\n  return { type: 'SET_SELECTED_PATH', selPathId }\n}\n\nexport const setOpenedPath = (path: PathFeature) => {\n  return { type: 'SET_OPENED_PATH', path }\n}\n\nexport const unsetOpenedPath = () => {\n  return { type: 'UNSET_OPENED_PATH' }\n}\n\nexport const setLengthLimit = (lengthLimit: number) => {\n  return { type: 'SET_LENGTH_LIMIT', lengthLimit }\n}\n\nexport const unsetSelectedPath = () => {\n  return { type: 'UNSET_SELECTED_PATH' }\n}\n\nexport const resetPaths = (odFc: OdFeatureCollection) => {\n  return async (dispatch: any) => {\n    dispatch({ type: 'RESET_PATHS' })\n    dispatch(zoomToFC(odFc))\n  }\n}\n\nconst clickedPathAgain = (storeSelPathFC: PathFeatureCollection, clickedPathId: string) => {\n  return storeSelPathFC.features[0] && clickedPathId === storeSelPathFC.features[0].properties.id\n}\n\nexport default pathsReducer\n","import Cookies from 'cookies-js'\nimport { UrlStateKey, menu } from './../constants'\nimport { setVisitedStatusVisited, getVisitedStatus } from './visitorReducer'\nimport { testGreenPathServiceConnection } from './pathsReducer'\nimport { Action } from 'redux'\nimport * as urlManager from './../utils/urlManager'\nimport { UiReducer } from '../types/types'\n\nexport enum Lang {\n  EN = 'en',\n  IT = 'it'\n}\n\nconst initialMenuState: UiReducer = {\n  lang: Lang.EN,\n  info: false,\n  odPanelHidden: false,\n  pathPanel: false,\n  pathPanelContent: null,\n}\n\ninterface UiAction extends Action {\n  lang: Lang\n  hidden: boolean\n}\n\nconst uiReducer = (store: UiReducer = initialMenuState, action: UiAction): UiReducer => {\n  switch (action.type) {\n    case 'TOGGLE_LANG':\n      return { ...store, lang: action.lang }\n\n    case 'SHOW_INFO':\n      return { ...store, info: true }\n\n    case 'HIDE_INFO':\n      return { ...store, info: false }\n\n    case 'SET_OD_PANEL_HIDDEN':\n      return { ...store, odPanelHidden: action.hidden }\n\n    case 'SET_SHORTEST_PATH':\n      return { ...store, pathPanel: true, odPanelHidden: false, pathPanelContent: menu.pathList }\n\n    case 'TOGGLE_PATH_PANEL':\n      return { ...store, pathPanel: !store.pathPanel }\n\n    case 'SHOW_PATH_LIST':\n      return { ...store, pathPanel: true, pathPanelContent: menu.pathList }\n\n    case 'SHOW_LENGTH_FILTER_SELECTOR':\n      return { ...store, pathPanel: true, pathPanelContent: menu.lengthLimitSelector }\n\n    default:\n      return store\n  }\n}\n\nexport const toggleLanguage = (lang: Lang) => {\n  return (dispatch: any) => {\n    const toggleToLang = lang === Lang.EN ? Lang.IT :  Lang.EN\n    dispatch(setLanguage(toggleToLang))\n  }\n}\n\nexport const setLanguage = (lang: Lang) => {\n  return (dispatch: any) => {\n    Cookies.set('gp-lang', lang)\n    localStorage.setItem('gp-lang', lang)\n    dispatch({ type: 'TOGGLE_LANG', lang })\n  }\n}\n\nexport const loadSelectedLanguage = () => {\n  return (dispatch: any) => {\n    const langC = Cookies.get('gp-lang')\n    const langLs = localStorage.getItem('gp-lang')\n    const lang = langC ? (langC as Lang) : (langLs as Lang)\n    if (lang && Object.values(Lang).includes(lang)) {\n      dispatch({ type: 'TOGGLE_LANG', lang })\n    }\n  }\n}\n\nexport const showInfo = () => ({ type: 'SHOW_INFO' })\n\nexport const setOdPanelHidden = (hidden: boolean, location: any, history: any) => {\n  urlManager.setBoolParam(UrlStateKey.OD_PANEL_VISIBLE, !hidden, location, history)\n  return {\n    type: 'SET_OD_PANEL_HIDDEN',\n    hidden,\n  }\n}\n\nexport const hideInfo = () => {\n  return (dispatch: any) => {\n    const visited = getVisitedStatus()\n    // if first visit, set visited cookie to yes and check connection to qp service\n    if (!visited) {\n      dispatch(setVisitedStatusVisited())\n      dispatch(testGreenPathServiceConnection())\n    }\n    dispatch({ type: 'HIDE_INFO' })\n  }\n}\n\nexport const showMaxLengthFilterSelector = () => ({ type: 'SHOW_LENGTH_FILTER_SELECTOR' })\n\nexport const showPathList = () => ({ type: 'SHOW_PATH_LIST' })\n\nexport const togglePathPanel = () => ({ type: 'TOGGLE_PATH_PANEL' })\n\nexport default uiReducer\n","import it from './it.json'\nimport en from './en.json'\nimport { Lang } from '../../reducers/uiReducer'\n\nconst langs: Record<Lang, Record<string, string>> = {\n  it: it as Record<string, string>,\n  en: en as Record<string, string>,\n}\n\nif (process.env.NODE_ENV === 'development') {\n  Object.keys(langs[Lang.EN]).forEach(key => {\n    if (!(key in langs[Lang.IT])) {\n      console.error(`missing key \"${key}\" (FI)`)\n    }\n  })\n  Object.keys(langs[Lang.IT]).forEach(key => {\n    if (!(key in langs[Lang.EN])) {\n      console.warn(`missing key \"${key}\" (EN)`)\n    }\n  })\n}\n\nexport const text = (lang: Lang, key: string): string => {\n  if (key in langs[lang]) {\n    return langs[lang][key]\n  }\n  // translate Swedish to English if translation is missing\n  if (lang === Lang.IT && key in langs[Lang.EN]) {\n    return langs[Lang.EN][key]\n  }\n  // return key if translation was not found\n  return key\n}\n\nexport const getErrorNotifKey = (errorKey: string): string => {\n  const errorNotifKey = 'notif.error.routing.' + errorKey\n  if (errorNotifKey in langs[Lang.EN]) {\n    return errorNotifKey\n  } else if (process.env.NODE_ENV === 'development') {\n    console.error('Received unknown error key:', errorNotifKey)\n  }\n  return 'notif.error.routing.general_routing_error'\n}\n\nconst dictionary = (lang: Lang) => {\n  return langs[lang]\n}\n\nexport default dictionary\n","import { PureComponent } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport dictionary from './dictionary'\nimport { Lang } from '../../reducers/uiReducer'\nimport { ReduxState } from '../../types/types'\n\ninterface PropsType {\n  children: string\n}\n\nclass Translate extends PureComponent<PropsType & PropsFromRedux> {\n  translateWord(lang: Lang, rawKey: string): string {\n    const key = rawKey.trim()\n    try {\n      const dict = dictionary(lang)\n      if (key in dict) {\n        return dict[key]\n      } else if (lang === Lang.IT && key in dictionary(Lang.EN)) {\n        // let's translate Swedish to English if missing translation\n        return dictionary(Lang.EN)[key]\n      } else {\n        return rawKey\n      }\n    } catch (err) {\n      console.error('Error while translating::translateWord', err)\n      return rawKey\n    }\n  }\n\n  render() {\n    const { lang, children } = this.props\n    if (typeof children === 'string') {\n      return this.translateWord(lang, children)\n    } else {\n      console.error('Translator child should be string')\n      return ''\n    }\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  lang: state.ui.lang,\n})\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(Translate)\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport { ReduxState } from '../types/types'\nimport T from './../utils/translator/Translator'\n\nconst OuterFlex = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 0 10px 13px 10px;\n  align-items: center;\n`\nconst StyledNotificationDiv = styled.div<{ look: string | null }>`\n  padding: 7px 13px;\n  border-radius: 5px;\n  margin: 0;\n  max-width: 80%;\n  color: white;\n  overflow-wrap: break-word;\n  background: rgba(0, 0, 0, 0.75);\n  display: inline;\n  white-space: pre-wrap;\n  line-height: 1.3;\n  font-size: 17px;\n  font-weight: 350;\n  letter-spacing: 1.2px;\n  word-break: break-word;\n  text-align: center;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.22), 0 6px 20px 0 rgba(0, 0, 0, 0.14);\n  ${props =>\n    props.look === 'error' &&\n    css`\n      color: white;\n      background-color: rgba(70, 10, 10, 0.87);\n    `}\n`\n\nconst Notification = (props: PropsFromRedux) => {\n  const { origError, destError } = props\n  const origOrDestError = origError || destError\n  if (!props.notification.text && !origOrDestError) return null\n  const look = origOrDestError ? 'error' : props.notification.look\n\n  return (\n    <OuterFlex>\n      <StyledNotificationDiv look={look}>\n        {props.notification.text && (\n          <div>\n            <T>{props.notification.text}</T>\n          </div>\n        )}\n        {origError && (\n          <div>\n            <T>{origError}</T>\n          </div>\n        )}\n        {destError && (\n          <div>\n            <T>{destError}</T>\n          </div>\n        )}\n      </StyledNotificationDiv>\n    </OuterFlex>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  notification: state.notification,\n  origError: state.origin.error,\n  destError: state.destination.error,\n})\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(Notification)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { routeEnvOptimizedPaths } from '../reducers/pathsReducer'\nimport T from './../utils/translator/Translator'\nimport { ReduxState } from '../types/types'\nimport { ExposureMode } from '../services/paths'\n\nconst OuterFlex = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  margin: 0 10px 13px 10px;\n  align-items: center;\n  @media (min-width: 550px) {\n    flex-direction: row;\n    justify-content: center;\n  }\n`\nconst Button = styled.button`\n  cursor: pointer;\n  color: white;\n  padding: 7px 18px !important;\n  border-radius: 70px !important;\n  margin: 5px 6px !important;\n  font-weight: 400 !important;\n  text-align: center !important;\n  width: max-content !important;\n  letter-spacing: 0.4 !important;\n  font-size: 28px;\n  max-width: 90%;\n  pointer-events: auto;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  border: 2px solid rgba(255, 255, 255, 0.8);\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.22), 0 6px 20px 0 rgba(0, 0, 0, 0.14);\n  background-color: #0eb139;\n  color: white;\n  &:hover {\n    background-color: #0fb93d;\n    border: 2px solid rgba(255, 255, 255, 0.95);\n  }\n  @media (max-width: 620px) {\n    font-size: 26px;\n  }\n`\nconst Tooltip = styled.div`\n  font-size: 15px;\n  color: rgba(255, 255, 255, 0.9);\n`\n\nconst FindPathsButtons = (props: PropsFromRedux) => {\n  const {\n    origin,\n    destination,\n    travelMode,\n    routingId,\n    waitingPaths,\n    showingPaths,\n    routeEnvOptimizedPaths,\n  } = props\n\n  const { originObject } = origin\n  const { destObject } = destination\n\n  const odUnset =\n    (!originObject && origin.originInputText.length < 2) ||\n    (!destObject && destination.destInputText.length < 2)\n\n  if (odUnset || showingPaths || waitingPaths || origin.error || destination.error) {\n    return null\n  }\n\n  return (\n    <OuterFlex>\n      <Button\n        onClick={() =>\n          routeEnvOptimizedPaths(origin, destination, travelMode, ExposureMode.CLEAN, routingId)\n        }\n      >\n        <T>find_fresh_air_paths_btn</T>\n        <Tooltip>\n          <T>find_fresh_air_paths_btn.tooltip</T>\n        </Tooltip>\n      </Button>\n    </OuterFlex>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  origin: state.origin,\n  destination: state.destination,\n  travelMode: state.paths.travelMode,\n  waitingPaths: state.paths.waitingPaths,\n  showingPaths: state.paths.showingPaths,\n  routingId: state.paths.routingId,\n  cleanPathsAvailable: state.paths.cleanPathsAvailable,\n})\n\nconst connector = connect(mapStateToProps, { routeEnvOptimizedPaths })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(FindPathsButtons)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { MdDirectionsBike } from 'react-icons/md'\nimport { MdDirectionsWalk } from 'react-icons/md'\nimport { setTravelMode, routeEnvOptimizedPaths } from './../../reducers/pathsReducer'\nimport { ReduxState } from '../../types/types'\nimport { TravelMode } from '../../services/paths'\n\nconst StyledBikeI = styled(MdDirectionsBike)`\n  font-size: 23px;\n  margin-top: 3px;\n  margin-bottom: -2px;\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n`\nconst StyledWalkI = styled(MdDirectionsWalk)`\n  font-size: 23px;\n  margin-top: 2px;\n  margin-bottom: -1px;\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n`\nconst ButtonRow = styled.div`\n  display: flex;\n  align-content: center;\n  margin: 2px 4px;\n`\nconst StyledIconContainer = styled.div<{ bike?: any; selected: boolean }>`\n  cursor: pointer;\n  pointer-events: auto;\n  display: flex;\n  margin: 2px 4px;\n  padding: 2px 10px;\n  border-radius: 25px;\n  height: 28px;\n  width: 32px;\n  align-content: center;\n  justify-content: center;\n  background: #f5f5f5c4;\n  border: 1px solid #f5f5f5c4;\n  transition-duration: 0.15s;\n  -webkit-transition-duration: 0.15s; /* Safari */\n  @media (min-width: 550px) {\n    &:hover {\n      border-color: black;\n    }\n  }\n  ${props =>\n    props.selected === true &&\n    css`\n      background: #eaf8ff;\n      border-color: #65a1bd;\n      pointer-events: none;\n      &:hover {\n        border-color: #65a1bd;\n      }\n    `}\n`\n\nconst getSetTravelModeFunction = (props: PropsFromRedux, travelModeOfTheButton: TravelMode) => {\n  if (props.waitingPaths) {\n    return null\n  }\n  if (!props.showingPathsOfExposureMode) {\n    return props.setTravelMode(travelModeOfTheButton)\n  } else {\n    const { origin, destination } = props\n\n    return props.routeEnvOptimizedPaths(\n      origin,\n      destination,\n      travelModeOfTheButton,\n      props.showingPathsOfExposureMode,\n      props.routingId,\n    )\n  }\n}\n\nconst TravelModeSelector = (props: PropsFromRedux) => {\n  return (\n    <ButtonRow>\n      <StyledIconContainer\n        data-cy=\"toggle-to-walk-button\"\n        onClick={() => getSetTravelModeFunction(props, TravelMode.WALK)}\n        selected={props.travelMode === TravelMode.WALK}\n      >\n        <StyledWalkI />\n      </StyledIconContainer>\n      <StyledIconContainer\n        data-cy=\"toggle-to-bike-button\"\n        onClick={() => getSetTravelModeFunction(props, TravelMode.BIKE)}\n        selected={props.travelMode === TravelMode.BIKE}\n        bike\n      >\n        <StyledBikeI />\n      </StyledIconContainer>\n    </ButtonRow>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  showingPaths: state.paths.showingPaths,\n  waitingPaths: state.paths.waitingPaths,\n  travelMode: state.paths.travelMode,\n  showingPathsOfExposureMode: state.paths.showingPathsOfExposureMode,\n  origin: state.origin,\n  destination: state.destination,\n  routingId: state.paths.routingId,\n})\n\nconst connector = connect(mapStateToProps, { setTravelMode, routeEnvOptimizedPaths })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(TravelModeSelector)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { resetPaths } from '../../reducers/pathsReducer'\nimport { IoIosArrowBack } from 'react-icons/io'\nimport { turf } from './../../utils/index'\nimport { ReduxState } from '../../types/types'\n\nconst ButtonContainer = styled.div`\n  padding: 2px 3px 2px 0px;\n  margin: 1px 5px 1px 10px;\n  cursor: pointer;\n  pointer-events: auto;\n  border-radius: 5px;\n  border: 1px solid white;\n  transition-duration: 0.15s;\n  -webkit-transition-duration: 0.15s; /* Safari */\n  @media (min-width: 550px) {\n    &:hover {\n      background: #f5f5f5c4;\n      border-color: #f5f5f5c4;\n    }\n  }\n`\n\nconst ArrowBack = styled(IoIosArrowBack)`\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n  font-size: 31px;\n`\n\nconst ResetPathsButton = ({ resetPaths, originObject, destObject }: PropsFromRedux) => {\n  const odFc = turf.asFeatureCollection([originObject!, destObject!])\n  return (\n    <ButtonContainer data-cy=\"reset-paths-container\" onClick={() => resetPaths(odFc)}>\n      <ArrowBack />\n    </ButtonContainer>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  originObject: state.origin.originObject,\n  destObject: state.destination.destObject,\n})\n\nconst connector = connect(mapStateToProps, { resetPaths })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(ResetPathsButton)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { MdNearMe } from 'react-icons/md'\nimport { zoomToUserLocation } from '../../reducers/userLocationReducer'\nimport { ReduxState } from '../../types/types'\n\nconst ButtonContainer = styled.div`\n  padding: 2px 3px 2px 2px;\n  margin: 1px 5px 1px 5px;\n  cursor: pointer;\n  pointer-events: auto;\n  border-radius: 5px;\n  border: 1px solid white;\n  transition-duration: 0.15s;\n  -webkit-transition-duration: 0.15s; /* Safari */\n  @media (min-width: 550px) {\n    &:hover {\n      background: #f5f5f5c4;\n      border-color: #f5f5f5c4;\n    }\n  }\n`\nconst Locate = styled(MdNearMe)`\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n  font-size: 28px;\n`\nconst StyledIcon = styled.div`\n  cursor: pointer;\n  pointer-events: auto;\n  margin: 0px 0px;\n  display: table;\n  color: black;\n  border-radius: 7px;\n`\n\nexport const LocateButton = ({ zoomToUserLocation, userLocation }: PropsFromRedux) => {\n  return (\n    <ButtonContainer onClick={() => zoomToUserLocation(userLocation)}>\n      <StyledIcon>\n        <Locate />\n      </StyledIcon>\n    </ButtonContainer>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  menu: state.ui,\n  userLocation: state.userLocation,\n})\n\nconst connector = connect(mapStateToProps, { zoomToUserLocation })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(LocateButton)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { toggleLanguage, Lang } from './../../reducers/uiReducer'\nimport { ReduxState } from '../../types/types'\n\nconst StyledButton = styled.div`\n  pointer-events: auto;\n  cursor: pointer;\n  padding: 3px;\n  font-size: 20px;\n  color: black;\n`\n\nconst ToggleLanguageButton = (props: PropsFromRedux) => {\n  return (\n    <StyledButton data-cy=\"toggle-lang-button\" onClick={() => props.toggleLanguage(props.lang)}>\n      {props.lang === Lang.EN ? 'IT' : 'EN'}\n    </StyledButton>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  lang: state.ui.lang,\n})\n\nconst connector = connect(mapStateToProps, { toggleLanguage })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(ToggleLanguageButton)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { FiFilter } from 'react-icons/fi'\nimport { IoIosArrowDown } from 'react-icons/io'\nimport { IoIosClose } from 'react-icons/io'\nimport { IoMdMenu } from 'react-icons/io'\n\nconst iconStyle = `\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n`\nexport const Filter = styled(FiFilter)`\n  ${iconStyle}\n  font-size: 32px;\n`\nexport const ArrowDown = styled(IoIosArrowDown)`\n  ${iconStyle}\n  font-size: 43px;\n`\nconst Close = styled(IoIosClose)`\n  ${iconStyle}\n  font-size:  ${props => props.size || '10'}px;\n`\nconst List = styled(IoMdMenu)`\n  ${iconStyle}\n  font-size: 36px;\n`\n\ntype IconButtonProps = {\n  onClick: React.MouseEventHandler<HTMLElement>\n  children: any\n  padding?: string\n  leftMargin?: string\n  hoverJump?: any\n}\n\nconst IconButton = styled.div<IconButtonProps>`\n  cursor: pointer;\n  pointer-events: auto;\n  padding: ${props => props.padding || '0px'};\n  margin-left: ${props => props.leftMargin || '0px'};\n  display: table;\n  color: black;\n  border-radius: 7px;\n  ${props =>\n    props.hoverJump &&\n    css`\n      @media (min-width: 600px) {\n        &:hover {\n          padding-bottom: 3px;\n        }\n      }\n    `}\n`\n\ntype IconProps = {\n  onClick: React.MouseEventHandler<HTMLElement>\n  size?: number\n}\n\nexport const FilterButton = ({ onClick }: IconProps) => (\n  <IconButton padding=\"5px\" onClick={onClick}>\n    <Filter />\n  </IconButton>\n)\n\nexport const CloseButton = ({ onClick, size }: IconProps) => (\n  <IconButton onClick={onClick}>\n    <Close size={size} />\n  </IconButton>\n)\n\nexport const ListButton = ({ onClick }: IconProps) => (\n  <IconButton hoverJump onClick={onClick}>\n    <List />\n  </IconButton>\n)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { ArrowDown } from './../Icons'\n\ntype IconButtonProps = {\n  onClick: React.MouseEventHandler<HTMLElement>\n  children: any\n  up: boolean\n}\n\nconst IconButton = styled.div<IconButtonProps>`\n  cursor: pointer;\n  pointer-events: auto;\n  display: table;\n  color: black;\n  margin: 6px 0px 0px 15px;\n  border-radius: 7px;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  @media (min-width: 600px) {\n    &:hover {\n      background: #f5f5f5c4;\n      border-color: #f5f5f5c4;\n    }\n  }\n  ${props =>\n    props.up &&\n    css`\n      margin: 3px 0px 0px 15px;\n      transform: rotate(180deg);\n    `}\n`\n\ntype ButtonProps = {\n  onClick: React.MouseEventHandler<HTMLElement>\n  up: boolean\n}\n\nconst ToggleOdPanelButton = ({ onClick, up }: ButtonProps) => {\n  return (\n    <IconButton up={up} onClick={onClick}>\n      <ArrowDown />\n    </IconButton>\n  )\n}\n\nexport default ToggleOdPanelButton\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport styled from 'styled-components'\nimport TravelModeSelector from './TravelModeSelector'\nimport ResetPathsButton from './ResetPathsButton'\nimport LocateButton from './LocateButton'\nimport ToggleLanguageButton from './ToggleLanguageButton'\nimport ToggleOdPanelButton from './ToggleOdPanelButton'\nimport { setOdPanelHidden } from './../../reducers/uiReducer'\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { ReduxState } from '../../types/types'\n\nconst OuterContainer = styled.div`\n  display: flex;\n`\n\nconst ResetContainer = styled.div`\n  display: flex;\n  align-items: center;\n  @media (min-width: 1099px) {\n    margin-left: 119px;\n  }\n`\n\nconst SettingsContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  border-radius: 15px;\n  padding: 4px 5px;\n  width: 80%;\n`\nconst LanguageContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  border-radius: 15px;\n  padding: 4px 11px 4px 10px;\n  width: 20%;\n`\n\nconst RoutingSettingsRow = (props: PropsFromRedux) => {\n  const { showingPaths, waitingPaths, odPanelHidden, setOdPanelHidden } = props\n\n  const location = useLocation()\n  const history = useHistory()\n  const handleSetOdPanelHidden = (hidden: boolean) => {\n    setOdPanelHidden(hidden, location, history)\n  }\n\n  return (\n    <OuterContainer>\n      <ResetContainer>{showingPaths || waitingPaths ? <ResetPathsButton /> : null}</ResetContainer>\n      <SettingsContainer>\n        <LocateButton />\n        <TravelModeSelector />\n      </SettingsContainer>\n      {!showingPaths && !waitingPaths && (\n        <ToggleOdPanelButton\n          onClick={() => handleSetOdPanelHidden(!odPanelHidden)}\n          up={!odPanelHidden}\n        />\n      )}\n      <LanguageContainer>\n        <ToggleLanguageButton />\n      </LanguageContainer>\n    </OuterContainer>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  showingPaths: state.paths.showingPaths,\n  waitingPaths: state.paths.waitingPaths,\n  odPanelHidden: state.ui.odPanelHidden,\n})\n\nconst connector = connect(mapStateToProps, { setOdPanelHidden })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(RoutingSettingsRow)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { showInfo } from './../../reducers/uiReducer'\nimport { ReduxState } from '../../types/types'\n\nconst StyledButton = styled.div`\n  margin: 17px 5px 0px 0px;\n  pointer-events: auto;\n  cursor: pointer;\n  padding: 1px 11px;\n  font-weight: 640;\n  border-radius: 8px;\n  font-size: 22px;\n  border: 2px solid black;\n  background-color: white;\n  color: black;\n  width: min-content;\n  &:before {\n    content: 'i';\n  }\n  @media (min-width: 600px) {\n    &:hover {\n      margin-right: 7px;\n    }\n  }\n`\n\nconst ShowInfoButton = (props: PropsFromRedux) => {\n  return <StyledButton data-cy=\"show-info-button\" onClick={props.showInfo} />\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  ui: state.ui,\n})\n\nconst connector = connect(mapStateToProps, { showInfo })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(ShowInfoButton)\n","import React from 'react'\nimport styled from 'styled-components'\nimport T from './../../utils/translator/Translator'\n\nconst Button = styled.div`\n  cursor: pointer;\n  padding: 3px 10px;\n  margin: 2px 0px 2px -1px;\n  color: white;\n  border-radius: 25px;\n  font-weight: 500;\n  font-size: 16px;\n  text-align: center;\n  width: max-content;\n  letter-spacing: 1px;\n  max-width: 90%;\n  font-size: 15px;\n  overflow: auto;\n  height: auto;\n  pointer-events: auto;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  background-color: #23a50d;\n  @media (min-width: 600px) {\n    &:hover {\n      background-color: #188007;\n    }\n  }\n`\n\ntype Props = {\n  handleClick: React.MouseEventHandler<HTMLElement>\n}\n\nconst UseCurrLocButton = ({ handleClick }: Props) => {\n  return (\n    <Button onClick={handleClick}>\n      <T>od_inputs.use_current_location</T>\n    </Button>\n  )\n}\n\nexport default UseCurrLocButton\n","import styled from 'styled-components'\n\nexport default styled.svg.attrs({\n  version: '1.1',\n  xmlns: 'http://www.w3.org/2000/svg',\n  xmlnsXlink: 'http://www.w3.org/1999/xlink',\n})``\n","import React from 'react'\nimport styled from 'styled-components'\nimport Icon from './Icon'\n\nconst Svg = styled(Icon)`\n  width: 54px;\n  height: 54px;\n`\n\nexport const LoadingIcon = ({ className, color }: { className?: string; color: string }) => (\n  <Svg viewBox=\"0 0 80 80\" className={className}>\n    <path\n      fill={color}\n      d=\"M40,80C17.944,80,0,62.056,0,40C0,17.944,17.944,0,40,0c22.056,0,40,17.944,40,40c0,2.209-1.791,4-4,4s-4-1.791-4-4C72,22.355,57.645,8,40,8C22.355,8,8,22.355,8,40c0,17.645,14.355,32,32,32c2.209,0,4,1.791,4,4S42.209,80,40,80z\"\n    />\n  </Svg>\n)\n","import React from 'react'\nimport styled, { keyframes, css } from 'styled-components'\nimport { LoadingIcon } from './LoadingIcon'\n\nconst spin = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`\n\nconst Spinner = styled.div`\n  svg {\n    display: block;\n    animation: ${spin} 0.9s linear infinite;\n  }\n`\n\nconst StyledLoadingIcon = styled(LoadingIcon)<{ size?: number }>`\n  ${props =>\n    props.size &&\n    css<{ size?: number }>`\n      height: ${props => props.size || '50'}px;\n      width: auto;\n    `}\n`\n\nconst LoadAnimation = ({ size, color }: { size: number; color?: string }) => {\n  return (\n    <Spinner>\n      <StyledLoadingIcon size={size} color={color ? color : '#17af40f0'} />\n    </Spinner>\n  )\n}\n\nexport default LoadAnimation\n","import React, { Component, RefObject } from 'react'\nimport styled, { css } from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { text } from '../../utils/translator/dictionary'\nimport { IoIosClose } from 'react-icons/io'\nimport UseCurrLocButton from './UseCurrLocButton'\nimport {\n  setOriginInputText,\n  setGeocodedOrigin,\n  setUsedOrigin,\n  hideOriginOptions,\n  toggleOriginOptionsVisible,\n  resetOriginInput,\n  useUserLocationOrigin,\n} from '../../reducers/originReducer'\nimport LoadAnimation from './../LoadAnimation/LoadAnimation'\nimport { OdPlace, ReduxState } from '../../types/types'\n\nconst OrigSelectorDiv = styled.div`\n  margin: 5px 5px 5px 5px;\n  position: relative;\n  width: 90%;\n  max-width: 350px;\n  z-index: 4;\n`\nconst Input = styled.input<{ onChange: Function }>`\n  padding: 10px 10px 9px 10px;\n  width: calc(100% - 20px);\n  color: black;\n  background: white;\n  border: 1px solid black;\n  font-size: 17px;\n  border-radius: 3px;\n`\nconst WaitForUserLocContainer = styled.span`\n  position: absolute;\n  top: 8px;\n  left: 20px;\n`\nconst ResetLocButton = styled.div`\n  cursor: pointer;\n  position: absolute;\n  pointer-events: auto;\n  display: flex;\n  align-items: center;\n  color: black;\n  border-radius: 7px;\n  top: 0px;\n  right: 0px;\n  height: 100%;\n`\nconst CloseIcon = styled(IoIosClose)`\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n  font-size: 41px;\n`\nconst OrigOptions = styled.ul`\n  z-index: -1;\n  border-radius: 0 0 4px 4px;\n  line-height: 1.5;\n  padding: 0;\n  padding-top: 2px;\n  margin: -3px 0px 0px 1px;\n  list-style-type: none;\n  font-weight: normal;\n  cursor: pointer;\n  position: absolute;\n  width: calc(100% - 1px);\n  background-color: #ffffff;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 6px 20px 0 rgba(0, 0, 0, 0.06);\n  max-height: calc(100vh - 57px);\n  overflow: auto;\n`\nconst OrigOption = styled.li<{ noShadow?: any }>`\n  padding: 7px 8px;\n  margin: 8px;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px 2px rgba(0, 0, 0, 0.06), 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  transition-duration: 0.15s;\n  -webkit-transition-duration: 0.15s; /* Safari */\n  @media (min-width: 600px) {\n    &:hover {\n      box-shadow: 0 1px 2px 2px rgba(0, 0, 0, 0.1), 0 1px 3px 0 rgba(0, 0, 0, 0.16);\n    }\n  }\n  ${props =>\n    props.noShadow &&\n    css`\n      box-shadow: none;\n    `}\n`\n\nclass OriginInput extends Component<PropsFromRedux> {\n  wrapperRef: RefObject<HTMLDivElement>\n  constructor(props: PropsFromRedux) {\n    super(props)\n    this.wrapperRef = React.createRef()\n    this.setWrapperRef = this.setWrapperRef.bind(this)\n    this.handleClickOutside = this.handleClickOutside.bind(this)\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClickOutside)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside)\n  }\n\n  setWrapperRef(node: any) {\n    this.wrapperRef = node\n  }\n\n  handleClickOutside(event: any) {\n    if (\n      this.wrapperRef &&\n      this.wrapperRef.current &&\n      !this.wrapperRef.current.contains(event.target)\n    ) {\n      this.props.hideOriginOptions()\n    }\n  }\n\n  render() {\n    const {\n      waitingUserLocOrigin,\n      originInputText,\n      originOptionsVisible,\n      originOptions,\n    } = this.props.origin\n    const {\n      lang,\n      destObject,\n      useUserLocationOrigin,\n      setOriginInputText,\n      setGeocodedOrigin,\n      setUsedOrigin,\n      resetOriginInput,\n      toggleOriginOptionsVisible,\n    } = this.props\n\n    return (\n      <OrigSelectorDiv data-cy=\"origin-input-container\" ref={this.wrapperRef}>\n        <Input\n          data-cy=\"origin-input\"\n          placeholder={text(lang, 'od_inputs.from_label')}\n          type=\"text\"\n          value={originInputText}\n          onClick={toggleOriginOptionsVisible}\n          onChange={setOriginInputText}\n        />\n        {waitingUserLocOrigin && (\n          <WaitForUserLocContainer>\n            <LoadAnimation size={25} />\n          </WaitForUserLocContainer>\n        )}\n        <ResetLocButton data-cy=\"reset-origin-button\" onClick={resetOriginInput}>\n          <CloseIcon />\n        </ResetLocButton>\n        {originOptionsVisible && (\n          <OrigOptions>\n            <OrigOption\n              noShadow\n              onClick={e => useUserLocationOrigin(e, this.props.userLocation, destObject)}\n            >\n              <UseCurrLocButton\n                handleClick={e => useUserLocationOrigin(e, this.props.userLocation, destObject)}\n              />\n            </OrigOption>\n            {originInputText.length < 3 &&\n              this.props.usedOds.map((odPlace: OdPlace) => (\n                <OrigOption\n                  key={odPlace.properties.label}\n                  style={{ color: '#ff38ff' }}\n                  onClick={() => setUsedOrigin(odPlace, destObject)}\n                >\n                  {odPlace.properties.label}\n                </OrigOption>\n              ))}\n            {originOptions.map(option => (\n              <OrigOption\n                key={option.properties.gid}\n                onClick={() => setGeocodedOrigin(option, destObject)}\n              >\n                {option.properties.label}\n              </OrigOption>\n            ))}\n          </OrigOptions>\n        )}\n      </OrigSelectorDiv>\n    )\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  userLocation: state.userLocation,\n  origin: state.origin,\n  destObject: state.destination.destObject,\n  usedOds: state.visitor.usedOds,\n  lang: state.ui.lang,\n})\n\nconst mapDispatchToProps = {\n  useUserLocationOrigin,\n  setOriginInputText,\n  setGeocodedOrigin,\n  setUsedOrigin,\n  hideOriginOptions,\n  toggleOriginOptionsVisible,\n  resetOriginInput,\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(OriginInput)\n","import React, { Component, RefObject } from 'react'\nimport styled from 'styled-components'\nimport { text } from '../../utils/translator/dictionary'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { IoIosClose } from 'react-icons/io'\nimport {\n  setDestinationInputText,\n  setGeocodedDestination,\n  setUsedDestination,\n  hideDestinationOptions,\n  toggleDestinationOptionsVisible,\n  resetDestinationInput,\n} from '../../reducers/destinationReducer'\nimport { ReduxState } from '../../types/types'\n\nconst DestSelectorDiv = styled.div`\n  margin: 5px 5px 5px 5px;\n  position: relative;\n  width: 90%;\n  max-width: 350px;\n  z-index: 3;\n`\nconst Input = styled.input<{ onChange: Function }>`\n  padding: 10px 10px 9px 10px;\n  width: calc(100% - 20px);\n  color: black;\n  background: white;\n  border: 1px solid black;\n  font-size: 17px;\n  border-radius: 3px;\n`\nconst ResetLocButton = styled.div`\n  cursor: pointer;\n  position: absolute;\n  pointer-events: auto;\n  display: flex;\n  align-items: center;\n  color: black;\n  border-radius: 7px;\n  top: 0px;\n  right: 0px;\n  height: 100%;\n`\nconst CloseIcon = styled(IoIosClose)`\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n  font-size: 41px;\n`\nconst DestinationOptions = styled.ul`\n  z-index: -1;\n  border-radius: 0 0 4px 4px;\n  line-height: 1.5;\n  padding: 0;\n  padding-top: 2px;\n  margin: -3px 0px 0px 1px;\n  list-style-type: none;\n  font-weight: normal;\n  cursor: pointer;\n  position: absolute;\n  width: calc(100% - 1px);\n  background-color: #ffffff;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 6px 20px 0 rgba(0, 0, 0, 0.06);\n  max-height: calc(100vh - 108px);\n  overflow: auto;\n`\nconst DestinationOption = styled.li`\n  padding: 7px 8px;\n  margin: 8px;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px 2px rgba(0, 0, 0, 0.06), 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  transition-duration: 0.15s;\n  -webkit-transition-duration: 0.15s; /* Safari */\n  @media (min-width: 600px) {\n    &:hover {\n      box-shadow: 0 1px 2px 2px rgba(0, 0, 0, 0.1), 0 1px 3px 0 rgba(0, 0, 0, 0.16);\n    }\n  }\n`\n\nclass DestinationInput extends Component<PropsFromRedux> {\n  wrapperRef: RefObject<HTMLDivElement>\n  constructor(props: PropsFromRedux) {\n    super(props)\n    this.wrapperRef = React.createRef()\n    this.setWrapperRef = this.setWrapperRef.bind(this)\n    this.handleClickOutside = this.handleClickOutside.bind(this)\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClickOutside)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside)\n  }\n\n  setWrapperRef(node: any) {\n    this.wrapperRef = node\n  }\n\n  handleClickOutside(event: any) {\n    if (\n      this.wrapperRef &&\n      this.wrapperRef.current &&\n      !this.wrapperRef.current.contains(event.target)\n    ) {\n      this.props.hideDestinationOptions()\n    }\n  }\n\n  render() {\n    const { destInputText, destOptionsVisible, destOptions } = this.props.destination\n    const {\n      lang,\n      originObject,\n      setDestinationInputText,\n      setGeocodedDestination,\n      setUsedDestination,\n      resetDestinationInput,\n      toggleDestinationOptionsVisible,\n    } = this.props\n\n    return (\n      <DestSelectorDiv data-cy=\"destination-input-container\" ref={this.wrapperRef}>\n        <Input\n          data-cy=\"destination-input\"\n          placeholder={text(lang, 'od_inputs.to_label')}\n          type=\"text\"\n          value={destInputText}\n          onClick={toggleDestinationOptionsVisible}\n          onChange={setDestinationInputText}\n        />\n        <ResetLocButton data-cy=\"reset-destination-button\" onClick={resetDestinationInput}>\n          <CloseIcon />\n        </ResetLocButton>\n        {destOptionsVisible && (\n          <DestinationOptions>\n            {destInputText.length < 3 &&\n              this.props.usedOds.map(odPlace => (\n                <DestinationOption\n                  key={odPlace.properties.label}\n                  style={{ color: '#ff38ff' }}\n                  onClick={() => setUsedDestination(odPlace, originObject)}\n                >\n                  {odPlace.properties.label}\n                </DestinationOption>\n              ))}\n            {destOptions.map(option => (\n              <DestinationOption\n                key={option.properties.gid}\n                onClick={() => setGeocodedDestination(option, originObject)}\n              >\n                {option.properties.label}\n              </DestinationOption>\n            ))}\n          </DestinationOptions>\n        )}\n      </DestSelectorDiv>\n    )\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  destination: state.destination,\n  originObject: state.origin.originObject,\n  usedOds: state.visitor.usedOds,\n  lang: state.ui.lang,\n})\n\nconst mapDispatchToProps = {\n  setDestinationInputText,\n  setGeocodedDestination,\n  setUsedDestination,\n  hideDestinationOptions,\n  toggleDestinationOptionsVisible,\n  resetDestinationInput,\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(DestinationInput)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport OriginInput from './OriginInput'\nimport DestinationInput from './DestinationInput'\nimport { ReduxState } from '../../types/types'\n\nconst OdContainer = styled.div<{ hide?: boolean }>`\n  pointer-events: auto;\n  padding: 2px 0 0 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  ${props =>\n    props.hide === true &&\n    css`\n      display: none;\n    `}\n  @media (min-width: 780px) {\n    flex-direction: row;\n    justify-content: space-evenly;\n  }\n`\n\nconst OrigDestPanel = (props: PropsFromRedux) => {\n  const { showingPaths, waitingPaths } = props\n\n  return (\n    <OdContainer data-cy=\"od-container\" hide={waitingPaths || showingPaths}>\n      <OriginInput />\n      <DestinationInput />\n    </OdContainer>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  waitingPaths: state.paths.waitingPaths,\n  showingPaths: state.paths.showingPaths,\n})\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(OrigDestPanel)\n","import React, { MouseEventHandler } from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { showInfo } from './../../reducers/uiReducer'\nimport { FaLayerGroup } from 'react-icons/fa'\nimport { ReduxState } from '../../types/types'\n\nconst StyledLayersIcon = styled(FaLayerGroup)`\n  font-size: 23px;\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n`\n\nconst StyledButton = styled.div<{ onClick: Function }>`\n  pointer-events: auto;\n  cursor: pointer;\n  padding: 5px 7px;\n  font-weight: 640;\n  border-radius: 8px;\n  font-size: 22px;\n  border: 2px solid black;\n  background-color: white;\n  color: black;\n  width: min-content;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n  @media (min-width: 600px) {\n    &:hover {\n      margin-right: 2px;\n    }\n  }\n`\n\nconst BasemapSelectorButton = (props: PropsFromRedux & { handleClick: MouseEventHandler }) => {\n  return (\n    <StyledButton data-cy=\"show-basemap-selector-button\" onClick={props.handleClick}>\n      <StyledLayersIcon />\n    </StyledButton>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  ui: state.ui,\n})\n\nconst connector = connect(mapStateToProps, { showInfo })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(BasemapSelectorButton)\n","import React, { useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { showInfo } from './../../reducers/uiReducer'\nimport { setMapId } from './../../reducers/mapReducer'\nimport BasemapSelectorButton from './BasemapSelectorButton'\nimport { CloseButton } from './../Icons'\nimport { MapId } from '../../constants'\nimport T from '../../utils/translator/Translator'\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { ReduxState } from '../../types/types'\n\nconst Wrapper = styled.div`\n  margin: 15px 5px 0px 0px;\n`\nconst OptionContainer = styled.div`\n  background: white;\n  padding: 9px;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.06), 0 6px 20px 0 rgba(0, 0, 0, 0.03);\n  pointer-events: auto;\n`\nconst BaseMapOption = styled.div<{ bike?: any; selected: boolean }>`\n  cursor: pointer;\n  pointer-events: auto;\n  display: flex;\n  margin: 7px 4px;\n  padding: 7px 13px;\n  border-radius: 25px;\n  align-content: center;\n  justify-content: center;\n  background: #f5f5f5c4;\n  border: 1px solid #f5f5f5c4;\n  transition-duration: 0.15s;\n  -webkit-transition-duration: 0.15s; /* Safari */\n  @media (min-width: 550px) {\n    &:hover {\n      border-color: black;\n    }\n  }\n  ${props =>\n    props.selected === true &&\n    css`\n      background: #eaf8ff;\n      border-color: #65a1bd;\n      pointer-events: none;\n      &:hover {\n        border-color: #65a1bd;\n      }\n    `}\n`\nconst AlignCloseButton = styled.div`\n  display: flex;\n  justify-content: center;\n  margin: -5px 0px;\n`\n\nconst BasemapSelector = (props: PropsFromRedux) => {\n  const [showOptions, setShowOptions] = useState(false)\n\n  const location = useLocation()\n  const history = useHistory()\n\n  const handleSetBasemap = (mapId: MapId) => {\n    props.setBasemapId(mapId, location, history)\n  }\n\n  return (\n    <Wrapper>\n      {!showOptions && <BasemapSelectorButton handleClick={() => setShowOptions(true)} />}\n      {showOptions && (\n        <OptionContainer>\n          <BaseMapOption\n            selected={props.mapId === MapId.CITY}\n            onClick={() => handleSetBasemap(MapId.CITY)}\n          >\n            <T>basemap_selector.option.label.city</T>\n          </BaseMapOption>\n          <BaseMapOption\n            selected={props.mapId === MapId.HEATMAP}\n            onClick={() => handleSetBasemap(MapId.HEATMAP)}\n          >\n            <T>basemap_selector.option.label.heatmap</T>\n          </BaseMapOption>\n          <BaseMapOption\n            selected={props.mapId === MapId.STREET_BY_STREET}\n            onClick={() => handleSetBasemap(MapId.STREET_BY_STREET)}\n          >\n            <T>basemap_selector.option.label.sbs</T>\n          </BaseMapOption>\n          <AlignCloseButton>\n            <CloseButton size={40} onClick={() => setShowOptions(false)} />\n          </AlignCloseButton>\n        </OptionContainer>\n      )}\n    </Wrapper>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  ui: state.ui,\n  mapId: state.map.mapId,\n})\n\nconst connector = connect(mapStateToProps, { showInfo, setBasemapId: setMapId })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(BasemapSelector)\n","export type Category = {\n  description: string\n  color: string\n}\n\nexport type Pollutant = string\n\nexport type RangeMapping = {\n  [pollutant: string]: {\n    unitOfMeasure: UnitOfMeasure\n    ranges: number[] // Array di numeri che rappresentano intervalli consecutivi [minValue1, maxValue1, minValue2, maxValue2, ...]\n  }\n}\n\nexport type UnitOfMeasure = 'µg/m³' | 'ppm' | 'mg/m³' | 'ppb'\n\nexport abstract class AirQualitySpec {\n  private static instance: AirQualitySpec | null = null\n\n  abstract getCategories(): Category[]\n  abstract getRangeMapping(): RangeMapping\n\n  getCategoryInfo(id: number): Category {\n    return this.getCategories()[id - 1]\n  }\n\n  getCategoryFromValue(pollutant: Pollutant, value: number): Category | undefined {\n    const category = this.getCategories()[this.getCategoryIndex(pollutant, value)]\n    return category\n  }\n\n  private getCategoryIndex(pollutant: Pollutant, value: number): number {\n    const rangeInfo = this.getRangeMapping()[pollutant]\n    if (!rangeInfo) {\n      throw new Error(`Range mapping not found for pollutant: ${pollutant}`)\n    }\n\n    const ranges = rangeInfo.ranges\n\n    for (let i = 0; i < ranges.length - 1; i += 1) {\n      const minValue = ranges[i]\n      const maxValue = ranges[i + 1]\n\n      if (value >= minValue && value <= maxValue) {\n        return i / 2\n      }\n    }\n\n    throw new Error(`Value ${value} does not match any range for pollutant: ${pollutant}`)\n  }\n\n  static getInstance(): AirQualitySpec {\n    if (AirQualitySpec.instance === null) {\n      // Crea l'istanza solo se non esiste già\n      AirQualitySpec.instance = new EuroAQISpec()\n    }\n    return AirQualitySpec.instance as AirQualitySpec\n  }\n}\n\nconst categories: Category[] = [\n  { description: 'Good', color: '#50f0e6' }, // Sostituisci '#HexColor' con il colore esatto\n  { description: 'Fair', color: '#50ccaa' },\n  { description: 'Moderate', color: '#f0e641' },\n  { description: 'Poor', color: '#ff5050' },\n  { description: 'Very Poor', color: '#960032' },\n  { description: 'Extremely Poor', color: '#7d2181' },\n]\n\n// Mappatura degli intervalli per ogni inquinante\nconst rangeMapping: RangeMapping = {\n  'PM2.5': {\n    unitOfMeasure: 'µg/m³',\n    ranges: [0, 10, 10, 20, 20, 25, 25, 50, 50, 75, 75, 800],\n  },\n  PM10: {\n    unitOfMeasure: 'µg/m³',\n    ranges: [0, 20, 20, 40, 40, 50, 50, 100, 100, 150, 150, 1200],\n  },\n  NO2: {\n    unitOfMeasure: 'µg/m³',\n    ranges: [0, 40, 40, 90, 90, 120, 120, 230, 230, 340, 340, 1000],\n  },\n  O3: {\n    unitOfMeasure: 'µg/m³',\n    ranges: [0, 50, 50, 100, 100, 130, 130, 240, 240, 380, 380, 800],\n  },\n  SO2: {\n    unitOfMeasure: 'µg/m³',\n    ranges: [0, 100, 100, 200, 200, 350, 350, 500, 500, 750, 750, 1250],\n  },\n}\n\nexport class EuroAQISpec extends AirQualitySpec {\n\n  getCategories(): Category[] {\n    return categories\n  }\n\n  getRangeMapping(): RangeMapping {\n    return rangeMapping\n  }\n}\n\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { Basemap } from '../../constants'\nimport LoadAnimation from './../LoadAnimation/LoadAnimation'\nimport T from '../../utils/translator/Translator'\nimport { ReduxState } from '../../types/types'\nimport { AirQualitySpec, Category } from '../../types/aqi_spec'\n\nconst Container = styled.div`\n  margin: 7px 5px 5px 5px;\n`\nconst LegendBox = styled.div`\n  background-color: #000000c2;\n  color: white;\n  padding: 8px 8px 8px 8px;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: max-content;\n`\nconst TitleRow = styled.div`\n  display: flex;\n  justify-content: center;\n  margin: 1px 5px 9px 5px;\n`\nconst ColorRow = styled.div`\n  display: flex;\n  margin-bottom: 3px;\n`\nconst ColorBox = styled.div`\n  border-radius: 4px;\n  margin: 0px 3px;\n  width: 15px;\n  height: 15px;\n`\nconst LabelRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 2px 0px 1px 0px;\n  width: calc(100% - 6px);\n`\nconst LoadAnimationWrapper = styled.div`\n  margin: 7px 6px 7px 5px;\n`\n\nconst ZoomTooltipBox = styled.div`\n  padding: 9px 11px;\n  color: white;\n  font-weight: 400;\n  text-align: center;\n  max-width: 160px;\n  letter-spacing: 1px;\n  background-color: #0000004f;\n  border-radius: 5px;\n  margin: 4px 0 0 0;\n  line-height: 120%;\n`\n\nconst formatUtcSecondsToAmPm = (utcSeconds: number): string => {\n  const date = new Date(0)\n  date.setUTCSeconds(utcSeconds)\n  let hours = date.getHours()\n  const ampm = hours >= 12 ? 'pm' : 'am'\n  hours = hours % 12\n  hours = hours ? hours : 12\n  return hours + ':30 ' + ampm\n}\n\nconst getDataAgeMinutes = (dataTimeUtcSecs: number): number => {\n  const seconds = Date.now() / 1000\n  return Math.round((seconds - dataTimeUtcSecs) / 60)\n}\n\nconst formatAqTimeInfo = (dataTimeUtcSecs: number): string => {\n  const dataAgeMinutes = getDataAgeMinutes(dataTimeUtcSecs)\n  if (dataAgeMinutes > 60) {\n    return formatUtcSecondsToAmPm(dataTimeUtcSecs)\n  } else {\n    return 'basemap.air_quality.legend.title.aq_data_time_now'\n  }\n}\n\nconst AqiMapLegend = (props: PropsFromRedux) => {\n  const { loadingData, waitingStyleUpdate, updatingStyle, dataTimeUtcSecs } = props.aqLayer\n\n  return (\n    <Container>\n      <LegendBox>\n        <TitleRow>\n          <T>basemap.air_quality.legend.title.air_quality_index</T>\n          {dataTimeUtcSecs && (\n            <span>\n              &nbsp;(<T>{formatAqTimeInfo(dataTimeUtcSecs)}</T>)\n            </span>\n          )}\n        </TitleRow>\n        <ColorRow>\n          {AirQualitySpec.getInstance().getCategories().map((k: Category) => (\n            <ColorBox key={k.description} style={{ backgroundColor: k.color }} />\n          ))}\n        </ColorRow>\n        <LabelRow>\n          <div>\n            <T>basemap.air_quality.legend.label.good</T>\n          </div>\n          <div>\n            <T>basemap.air_quality.legend.label.poor</T>\n          </div>\n        </LabelRow>\n      </LegendBox>\n      {props.mapZoom < 12 && props.basemap === Basemap.STREETS_NIGHT && (\n        <ZoomTooltipBox>\n          <T>basemap.air_quality.zoom_closer_tip</T>\n        </ZoomTooltipBox>\n      )}\n      {(loadingData || waitingStyleUpdate || updatingStyle) && props.mapZoom >= 12 && (\n        <LoadAnimationWrapper>\n          <LoadAnimation size={30} color={'white'} />\n        </LoadAnimationWrapper>\n      )}\n    </Container>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  aqLayer: state.airQualityLayer,\n  mapZoom: state.map.zoom,\n  basemap: state.map.basemap,\n})\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(AqiMapLegend)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA',\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.',\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","import React, { FC, useEffect, useRef, useState } from 'react'\nimport styled from 'styled-components'\nimport LoadAnimation from './LoadAnimation/LoadAnimation'\nimport T from '../utils/translator/Translator'\nimport * as serviceWorker from './../serviceWorkerRegistration'\n\nconst Wrapper = styled.div`\n  margin-top: 10px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  z-index: 1000;\n`\nconst Container = styled.a`\n  padding: 10px 13px;\n  cursor: pointer;\n  pointer-events: auto;\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: row;\n  color: white;\n  pointer-events: auto;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 6px 20px 0 rgba(0, 0, 0, 0.07);\n  max-width: calc(100% - 60px);\n  flex-direction: column;\n  div {\n    margin: 5px 0px 0px 0px;\n  }\n  @media (min-width: 440px) {\n    flex-direction: row;\n    div {\n      margin: 0px 0px 0px 8px;\n    }\n  }\n`\n\nconst ServiceWorkerWrapper: FC = () => {\n  const [waitingWorker, setWaitingWorker] = useState<ServiceWorker | null>(null)\n  const [showReload, setShowReload] = useState(false)\n  const [updating, setUpdating] = useState(false)\n  const updated = useRef(false)\n\n  const onSWUpdate = (registration: ServiceWorkerRegistration) => {\n    setShowReload(true)\n    setWaitingWorker(registration.waiting)\n  }\n\n  useEffect(() => {\n    serviceWorker.register({ onUpdate: onSWUpdate })\n  }, [])\n\n  const updateServiceWorker = () => {\n    setShowReload(false)\n    setUpdating(true)\n\n    if (waitingWorker) {\n      waitingWorker.postMessage({ type: 'SKIP_WAITING' })\n      // reload on service worker statechange -> activated\n      waitingWorker.addEventListener('statechange', (e: any) => {\n        if (e.target.state === 'activated') {\n          updated.current = true\n          setUpdating(false)\n          window.location.reload()\n        }\n      })\n    }\n\n    // reload after timeout if the statechange event did not fire\n    setTimeout(() => {\n      if (!updated.current) {\n        updated.current = true\n        setUpdating(false)\n        window.location.reload()\n      }\n    }, 2500)\n  }\n\n  return (\n    ((showReload || updating) && (\n      <Wrapper>\n        {showReload && (\n          <Container onClick={updateServiceWorker}>\n            <T>update_available_title</T>\n            <div>\n              <T>update_available_tooltip</T>\n            </div>\n          </Container>\n        )}\n        {updating && <LoadAnimation size={30} color={'black'} />}\n      </Wrapper>\n    )) ||\n    null\n  )\n}\n\nexport default ServiceWorkerWrapper\n","import { Action } from 'redux'\nimport { AuthReducer, User } from '../types/types'\n\n// const initialAuthState: AuthReducer = {\n//   user: {\n//     username: 'sdg',\n//     homePosition: {\n//       lat: 44.498955,\n//       lng: 11.327591,\n//     },\n//     workPosition: {\n//       lat: 44.494887,\n//       lng: 11.342023,\n//     },\n//     favouriteAddresses: [\n//       {\n//         origin: { lat: 44.498955, lng: 11.327591 },\n//         dest: { lat: 44.484526, lng: 11.342616 },\n//       },\n//       {\n//         origin: { lat: 44.498955, lng: 11.327591 },\n//         dest: { lat: 44.494887, lng: 11.342023 },\n//       },\n//     ],\n//   },\n//   showLoginModal: false,\n// }\n\nconst initialAuthState: AuthReducer = {\n  user: null,\n  showLoginModal: false,\n  showRegisterModal: false,\n}\n\ninterface AuthAction extends Action {\n  user: User\n}\n\nconst authReducer = (store: AuthReducer = initialAuthState, action: AuthAction): AuthReducer => {\n  switch (action.type) {\n    case 'LOGIN_SUCCESS':\n      return { ...store, user: action.user }\n    case 'LOGOUT_SUCCESS':\n      return { user: null, showLoginModal: false, showRegisterModal: false }\n    case 'OPEN_LOGIN_MODAL':\n      return { ...store, showLoginModal: true }\n    case 'CLOSE_LOGIN_MODAL':\n      return { ...store, showLoginModal: false }\n    case 'OPEN_REGISTER_MODAL':\n      return { ...store, showRegisterModal: true }\n    case 'CLOSE_REGISTER_MODAL':\n      return { ...store, showRegisterModal: false }\n    default:\n      return store\n  }\n}\n\n\nexport const loginSuccess = (user: User) => {\n    return { type: 'LOGIN_SUCCESS', user }\n}\n\nexport const logoutSuccess = () => {\n    return { type: 'LOGOUT_SUCCESS' }\n}\n\nexport const showLoginModal = () => {\n  return { type: 'OPEN_LOGIN_MODAL' }\n}\n\nexport const closeLoginModal = () => {\n  return { type: 'CLOSE_LOGIN_MODAL' }\n}\n\nexport const showRegisterModal = () => {\n  return { type: 'OPEN_REGISTER_MODAL' }\n}\n\nexport const closeRegisterModal = () => {\n  return { type: 'CLOSE_REGISTER_MODAL' }\n}\nexport default authReducer\n","import axios from 'axios'\nimport { User } from '../types/types'\n\nconst API_BASE_URL = 'http://localhost:5003'\nconst LOCALSTORAGE_JWT_KEY = 'ecosister-token'\n\nexport const login = async (username: string, password: string): Promise<User | null> => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/login`, { username, password }, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (response.status === 200) {\n      const data = response.data\n      localStorage.setItem(LOCALSTORAGE_JWT_KEY, data.access_token)\n      return data.user as User\n    } else {\n      return null\n    }\n  } catch (error) {\n    console.error('Login error:', error)\n    return null\n  }\n}\n\nexport const register = async (username: string, password: string): Promise<boolean> => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/register`, { username, password }, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n    return response.status === 201\n  } catch (error) {\n    console.error('Registration error:', error)\n    return false\n  }\n}\n\nexport const getUserData = async (): Promise<User | null> => {\n  const jwt = localStorage.getItem(LOCALSTORAGE_JWT_KEY)\n  if (jwt !== null || jwt !== undefined) {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/protected`, {\n        headers: {\n          Authorization: `Bearer ${jwt}`,\n        },\n      })\n\n      if (response.status === 200) {\n        const data = response.data\n        return data as User\n      }\n      return null\n    } catch (error) {\n      console.error('Error fetching user data:', error)\n      return null\n    }\n  } else {\n    return null\n  }\n}\n\nexport const logout = (): void => {\n  localStorage.removeItem(LOCALSTORAGE_JWT_KEY)\n}\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { ReduxState } from '../../types/types'\nimport { logoutSuccess, showLoginModal } from '../../reducers/authReducer'\nimport { logout } from '../../services/auth'\n\nconst UserStatus: React.FC = () => {\n  const user = useSelector((state: ReduxState) => state.auth.user)\n  const dispatch = useDispatch()\n\n  const handleLogout = () => {\n    logout() // Chiamata al servizio di logout (potrebbe essere asincrona)\n    dispatch(logoutSuccess()) // Aggiorna lo stato Redux\n  }\n\n  const handleLogin = () => {\n    dispatch(showLoginModal())\n  }\n\n  return (\n    <div>\n      {user ? (\n        <div>\n          <span onClick={handleLogout}>{user.username}</span>\n        </div>\n      ) : (\n        <span onClick={handleLogin}>login/register</span>\n      )}\n    </div>\n  )\n}\n\nexport default UserStatus\n","import { MouseEventHandler } from 'react'\nimport styled from 'styled-components'\nimport { FaStar } from 'react-icons/fa'\n\nconst StyledFavouritesIcon = styled(FaStar)`\n  font-size: 23px;\n  vertical-align: middle;\n  display: table-cell;\n  text-align: center;\n`\n\nconst StyledButton = styled.div<{ onClick: Function }>`\n  pointer-events: auto;\n  cursor: pointer;\n  padding: 5px 7px;\n  font-weight: 640;\n  border-radius: 8px;\n  font-size: 22px;\n  border: 2px solid black;\n  background-color: white;\n  color: black;\n  width: min-content;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n  @media (min-width: 600px) {\n    &:hover {\n      margin-right: 2px;\n    }\n  }\n`\n\nconst FavouritesButton = (props: { handleClick: MouseEventHandler }) => {\n  return (\n    <StyledButton onClick={props.handleClick}>\n      <StyledFavouritesIcon />\n    </StyledButton>\n  )\n}\n\nexport default FavouritesButton\n","import axios from 'axios'\n\nconst API_BASE_URL = process.env.REACT_APP_ROUTES_SERVER || '/users'\n\nexport const updateHomePosition = async (homePosition: { lat: number; lng: number }) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/update_home`, { homePosition }, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('ecosister-token')}`,\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (response.status === 200) {\n      console.log(response.data)\n      return response.data\n    } else {\n      throw new Error('Update home position failed')\n    }\n  } catch (error) {\n    console.error('Update home position error:', error)\n    return null\n  }\n}\n\nexport const updateWorkPosition = async (workPosition : { lat: number; lng: number }) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/update_work`, { workPosition }, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('ecosister-token')}`,\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (response.status === 200) {\n      return response.data\n    } else {\n      throw new Error('Update work position failed')\n    }\n  } catch (error) {\n    console.error('Update work position error:', error)\n    return null\n  }\n}\n\nexport const addFavouriteAddress = async (address: {name: string; origin:{ lat: number; lng: number };dest:{ lat: number; lng: number }}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/add_favourite_path`, { address }, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('ecosister-token')}`,\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (response.status === 200) {\n      return response.data\n    } else {\n      throw new Error('Add favourite address failed')\n    }\n  } catch (error) {\n    console.error('Add favourite address error:', error)\n    return null\n  }\n}\n\nexport const removeFavouriteAddress = async (address: {origin:{ lat: number; lng: number };dest:{ lat: number; lng: number }}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/remove_favourite_path`, { address }, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('ecosister-token')}`,\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (response.status === 200) {\n      return response.data\n    } else {\n      throw new Error('Remove favourite address failed')\n    }\n  } catch (error) {\n    console.error('Remove favourite address error:', error)\n    return null\n  }\n}\n","import { Action } from 'redux'\nimport { AirQualityLayerReducer } from '../types/types'\nimport { showNotification } from './notificationReducer'\n\nconst initialAirQualityLayer: AirQualityLayerReducer = {\n  hasData: false,\n  loadingData: false,\n  dataTimeUtcSecs: undefined,\n  styleUpdateDelays: 0,\n  waitingStyleUpdate: false,\n  updatingStyle: false,\n}\n\ninterface AqAction extends Action {\n  loadingData: boolean\n  waitingStyleUpdate: boolean\n  updatingStyle: boolean\n  dataTimeUtcSecs: number\n}\n\nconst airQualityLayerReducer = (\n  store: AirQualityLayerReducer = initialAirQualityLayer,\n  action: AqAction,\n): AirQualityLayerReducer => {\n  switch (action.type) {\n    case 'SET_LOADING_DATA':\n      return { ...store, loadingData: action.loadingData }\n\n    case 'AQI_MAP_DATA_NOT_AVAILABLE':\n      return initialAirQualityLayer\n\n    case 'SET_DATA_LOADED':\n      return { ...store, hasData: true, dataTimeUtcSecs: action.dataTimeUtcSecs }\n\n    case 'SET_WAITING':\n      return { ...store, waitingStyleUpdate: action.waitingStyleUpdate }\n\n    case 'SET_UPDATING_STYLE':\n      return { ...store, updatingStyle: action.updatingStyle }\n\n    case 'SET_STYLE_UPDATE_DELAY':\n      return { ...store, styleUpdateDelays: store.styleUpdateDelays + 1, waitingStyleUpdate: true }\n\n    case 'FINISH_STYLE_UPDATE_DELAY': {\n      const styleUpdateDelays = store.styleUpdateDelays < 1 ? 0 : store.styleUpdateDelays - 1\n      return { ...store, styleUpdateDelays }\n    }\n\n    default:\n      return store\n  }\n}\n\nexport const setLoadingData = (loadingData: boolean) => ({ type: 'SET_LOADING_DATA', loadingData })\n\nexport const setDataLoaded = (dataTimeUtcSecs: number) => {\n  return { type: 'SET_DATA_LOADED', dataTimeUtcSecs }\n}\n\nexport const setWaitingStyleUpdate = (waitingStyleUpdate: boolean) => ({\n  type: 'SET_WAITING',\n  waitingStyleUpdate,\n})\n\nexport const setUpdatingStyle = (updatingStyle: boolean) => ({\n  type: 'SET_UPDATING_STYLE',\n  updatingStyle,\n})\n\nexport const setDelayedStyleUpdate = (time: number) => {\n  return (dispatch: any) => {\n    dispatch({ type: 'SET_STYLE_UPDATE_DELAY' })\n    setTimeout(() => dispatch({ type: 'FINISH_STYLE_UPDATE_DELAY' }), time)\n  }\n}\n\nexport const handleDataNotAvailable = () => {\n  return (dispatch: any) => {\n    dispatch({ type: 'AQI_MAP_DATA_NOT_AVAILABLE' })\n    dispatch(showNotification('notif.error.no_aq_map_data_available', 'error', 8))\n  }\n}\n\nexport default airQualityLayerReducer\n","import { Action } from 'redux'\nimport { PathListReducer } from '../types/types'\n\nconst initialPathList: PathListReducer = {\n  scrollToPath: '',\n  routingId: 0,\n}\n\ninterface PathListAction extends Action {\n  pathId: string\n}\n\nconst pathListReducer = (\n  store: PathListReducer = initialPathList,\n  action: PathListAction,\n): PathListReducer => {\n  switch (action.type) {\n    case 'SCROLL_TO_PATH':\n      return { ...store, scrollToPath: action.pathId }\n\n    default:\n      return store\n  }\n}\n\nexport const scrollToPath = (pathId: string) => {\n  return { type: 'SCROLL_TO_PATH', pathId }\n}\n\nexport default pathListReducer\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk'\nimport mapReducer from './reducers/mapReducer'\nimport authReducer from './reducers/authReducer'\nimport airQualityLayerReducer from './reducers/airQualityLayerReducer'\nimport userLocationReducer from './reducers/userLocationReducer'\nimport notificationReducer from './reducers/notificationReducer'\nimport pathsReducer from './reducers/pathsReducer'\nimport pathListReducer from './reducers/pathListReducer'\nimport originReducer from './reducers/originReducer'\nimport destinationReducer from './reducers/destinationReducer'\nimport mapPopupReducer from './reducers/mapPopupReducer'\nimport visitorReducer from './reducers/visitorReducer'\nimport uiReducer from './reducers/uiReducer'\n\nconst reducer = combineReducers({\n  auth: authReducer,\n  map: mapReducer,\n  airQualityLayer: airQualityLayerReducer,\n  userLocation: userLocationReducer,\n  notification: notificationReducer,\n  paths: pathsReducer,\n  pathList: pathListReducer,\n  origin: originReducer,\n  destination: destinationReducer,\n  mapPopup: mapPopupReducer,\n  visitor: visitorReducer,\n  ui: uiReducer,\n})\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)))\n\nexport default store\n","// @ts-nocheck\nimport React, { useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { useSelector } from 'react-redux'\nimport FavouritesButton from './FavouritesButton'\nimport { ReduxState, User } from '../../types/types'\nimport { CloseButton } from './../Icons'\nimport { addFavouriteAddress } from '../../services/userInfo'\nimport { loginSuccess } from '../../reducers/authReducer'\nimport { setOriginFromCoordinates } from '../../reducers/originReducer'\nimport { setDestinationFromCoordinates } from '../../reducers/destinationReducer'\nimport store from '../../store'\nimport T from '../../utils/translator/Translator'\nconst Wrapper = styled.div`\n  margin: 15px 5px 0px 0px;\n`\n\nconst OptionContainer = styled.div`\n  background: white;\n  padding: 9px;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.06), 0 6px 20px 0 rgba(0, 0, 0, 0.03);\n  pointer-events: auto;\n`\n\nconst FavouriteOption = styled.div<{ bike?: any; disabled: boolean }>`\n  cursor: pointer;\n  pointer-events: auto;\n  display: flex;\n  margin: 7px 4px;\n  padding: 7px 13px;\n  border-radius: 25px;\n  align-content: center;\n  justify-content: center;\n  background: #f5f5f5c4;\n  border: 1px solid #f5f5f5c4;\n  transition-duration: 0.15s;\n  -webkit-transition-duration: 0.15s;\n  @media (min-width: 550px) {\n    &:hover {\n      border-color: black;\n    }\n  }\n  ${props =>\n    props.disabled === true &&\n    css`\n      background: #eaf8ff;\n      border-color: #65a1bd;\n      pointer-events: none;\n      &:hover {\n        border-color: #65a1bd;\n      }\n    `}\n`\n\nconst AlignCloseButton = styled.div`\n  display: flex;\n  justify-content: center;\n  margin: -5px 0px;\n`\n\nconst Input = styled.input<{ hasError: boolean }>`\n  padding: 7px 13px;\n  margin: 7px 4px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  align-content: center;\n  justify-content: center\n  width: 100%;\n  ${props =>\n    props.hasError &&\n    css`\n      border-color: red;\n    `}\n`\n\nconst FavouritesSelector = () => {\n  const [showFavouriteOptions, setShowFavouriteOptions] = useState(false)\n  const [showFavouritePathOptions, setShowFavouritePathOptions] = useState(false)\n  const [showSaveFields, setShowSaveFields] = useState(false) // Add state for showing save field\n  const [newFavouriteName, setNewFavouriteName] = useState('') // State for the new favourite name\n  const user = useSelector((store: ReduxState) => store.auth.user)\n  const origin = useSelector((store: ReduxState) => store.origin.originObject)\n  const destination = useSelector((store: ReduxState) => store.destination.destObject)\n\n  const setAsFavouriteAddress = async (name: string) => {\n    if (origin != null && destination !== null) {\n      const user: User = await addFavouriteAddress({\n        name: name,\n        origin: {\n          lat: origin?.geometry.coordinates[0],\n          lng: origin?.geometry.coordinates[1],\n        },\n        dest: {\n          lat: destination?.geometry.coordinates[0],\n          lng: destination?.geometry.coordinates[1],\n        },\n      })\n      store.dispatch(loginSuccess(user))\n    }\n  }\n\n  const showOnlyFavouritesButton = () => {\n    setShowFavouriteOptions(false)\n    setShowFavouritePathOptions(false)\n    setShowSaveFields(false)\n    setNewFavouriteName('')\n  }\n\n  const showOnlyFavouriteOptions = () => {\n    setShowFavouriteOptions(true)\n    setShowFavouritePathOptions(false)\n    setShowSaveFields(false)\n    setNewFavouriteName('')\n  }\n\n  const showOnlyFavouritePathOptions = () => {\n    setShowFavouriteOptions(false)\n    setShowFavouritePathOptions(true)\n    setShowSaveFields(false)\n    setNewFavouriteName('')\n  }\n\n  const showOnlySaveFields = () => {\n    setShowFavouriteOptions(false)\n    setShowFavouritePathOptions(false)\n    setShowSaveFields(true)\n    setNewFavouriteName('')\n  }\n  return (\n    <Wrapper>\n      {!showFavouriteOptions && !showFavouritePathOptions && !showSaveFields && user !== null && (\n        <FavouritesButton handleClick={() => setShowFavouriteOptions(true)} />\n      )}\n      {showFavouriteOptions && (\n        <OptionContainer>\n          <FavouriteOption\n            disabled={\n              user === null ||\n              user.favouriteAddresses === undefined ||\n              user?.favouriteAddresses.length === 0\n            }\n            onClick={() => {\n              showOnlyFavouritePathOptions()\n            }}\n          >\n            <T>favourites_popup.favourite_option.select_path</T>\n          </FavouriteOption>\n          <FavouriteOption\n            disabled={user === null || destination === null || origin === null}\n            onClick={() => {\n              showOnlySaveFields()\n            }}\n          >\n            <T>favourites_popup.favourite_option.save_as_favourite</T>\n          </FavouriteOption>\n          <AlignCloseButton>\n            <CloseButton\n              size={40}\n              onClick={() => {\n                showOnlyFavouritesButton()\n              }}\n            />\n          </AlignCloseButton>\n        </OptionContainer>\n      )}\n      {showSaveFields && (\n        <OptionContainer>\n          <Input\n            hasError={false}\n            onChange={e => {\n              setNewFavouriteName(e.target.value)\n            }}\n          />\n          <FavouriteOption\n            disabled={newFavouriteName === ''}\n            onClick={() => {\n              setAsFavouriteAddress(newFavouriteName)\n              showOnlyFavouritesButton()\n            }}\n          >\n            <T>favourites_popup.favourite_option.save_as_favourite.save</T>\n          </FavouriteOption>\n          <AlignCloseButton>\n            <CloseButton\n              size={40}\n              onClick={() => {\n                showOnlyFavouriteOptions()\n              }}\n            />\n          </AlignCloseButton>\n        </OptionContainer>\n      )}\n      {showFavouritePathOptions && (\n        <OptionContainer>\n          {user?.favouriteAddresses !== undefined &&\n            user?.favouriteAddresses.map(\n              (\n                p: {\n                  name: string\n                  origin: { lat: number; lng: number }\n                  dest: { lat: number; lng: number }\n                },\n                i: number,\n              ) => {\n                return (\n                  <FavouriteOption\n                    key={`favourite ${p.name}`}\n                    disabled={false}\n                    onClick={() => {\n                      store.dispatch(setOriginFromCoordinates(p.origin.lat, p.origin.lng))\n                      store.dispatch(setDestinationFromCoordinates(p.dest.lat, p.dest.lng))\n                      showOnlyFavouritesButton()\n                    }}\n                  >\n                    {p.name}\n                  </FavouriteOption>\n                )\n              },\n            )}\n          <AlignCloseButton>\n            <CloseButton\n              size={40}\n              onClick={() => {\n                showOnlyFavouriteOptions()\n              }}\n            />\n          </AlignCloseButton>\n        </OptionContainer>\n      )}\n    </Wrapper>\n  )\n}\n\nexport default FavouritesSelector\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport Favicon from './favicon-32x32.png'\nimport RoutingSettingsRow from './RoutingSettingsRow'\nimport ShowInfoButton from './ShowInfoButton'\nimport OrigDestPanel from './OrigDestPanel'\nimport BasemapSelector from './BasemapSelector'\nimport AqiMapLegend from './AqiMapLegend'\nimport { Basemap } from '../../constants'\nimport { ReduxState } from '../../types/types'\nimport { ExposureMode } from '../../services/paths'\nimport ServiceWorkerWrapper from '../ServiceWorkerWrapper'\nimport UserStatus from '../Auth/UserStatus'\nimport FavouritesSelector from './FavouritesSelector'\n\nconst VisiblePanel = styled.div`\n  background-color: rgba(255, 255, 255, 0.98);\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 6px 20px 0 rgba(0, 0, 0, 0.06);\n  pointer-events: auto;\n`\nconst LogoRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: left;\n  font-weight: 500;\n  font-size: 13px;\n  padding: 6px 4px 0px 9px;\n  @media (min-width: 600px) {\n    justify-content: flex-start;\n    font-size: 14px;\n    font-weight: 450;\n    padding-bottom: 2px;\n  }\n  @media (min-width: 1100px) {\n    margin-bottom: -20px;\n  }\n`\nconst LogoImg = styled.img`\n  @media (min-width: 600px) {\n    width: 20px;\n    height: auto;\n  }\n`\nconst EcosisterLabel = styled.div`\n  margin-left: 3px;\n  letter-spacing: -0.6px;\n`\n\nconst LogoContainer = styled.div`\n  display: flex;\n  justify-content: right;\n`\n\nconst LowerTransparentPanel = styled.div`\n  position: relative;\n`\nconst LowerWidePanel = styled.div`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  left: 0px;\n`\nconst LowerLeftPanel = styled.div`\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n`\nconst LowerRightPanel = styled.div`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n`\n\nconst showAqiMapLegend = (props: PropsFromRedux): boolean => {\n  return (\n    props.basemap === Basemap.STREETS_NIGHT ||\n    (props.showingPathsOfExposureMode === ExposureMode.CLEAN &&\n      (props.basemap === Basemap.STREETS || props.basemap === Basemap.SATELLITE))\n  )\n}\n\nconst TopPanel = (props: PropsFromRedux) => {\n  return (\n    <div>\n      <VisiblePanel>\n        <LogoRow>\n          <LogoContainer>\n            <LogoImg src={Favicon} width=\"15\" height=\"15\" alt=\"Ecosister app logo\" />\n            <EcosisterLabel>Ecosister</EcosisterLabel>\n          </LogoContainer>\n          <UserStatus></UserStatus>\n        </LogoRow>\n        {!props.odPanelHidden && <OrigDestPanel />}\n        <RoutingSettingsRow />\n      </VisiblePanel>\n      <LowerTransparentPanel>\n        <LowerLeftPanel>{showAqiMapLegend(props) && <AqiMapLegend />}</LowerLeftPanel>\n        <LowerRightPanel>\n          <ShowInfoButton />\n          <BasemapSelector />\n          <FavouritesSelector />\n        </LowerRightPanel>\n        <LowerWidePanel>\n          <ServiceWorkerWrapper />\n        </LowerWidePanel>\n      </LowerTransparentPanel>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  basemap: state.map.basemap,\n  odPanelHidden: state.ui.odPanelHidden,\n  showingPathsOfExposureMode: state.paths.showingPathsOfExposureMode,\n})\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(TopPanel)\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAe1BMVEUAMzMAWiYAcR4ANjIAzwAAMDAAyAEAMDT///8AzgAAPy8AqwoAwgMAtgceS0sASisAiRYAzQDj6OgAmhAQQEAIOjrL1dX6/Px6lZUAYCQAaCEAexsAZyLX4OCTqampurq3xsYrVlbBzs5oh4dxjo5bfHxEaWk3Xl4yW1tucUJ/AAABYElEQVQ4y41TB5KDMAw04IYNBgymJPS0+/8Lzy2N5HLRDINBK8larQC4G4mCMk3LLiLgvWV5EkMYJ3n2zkvYPo0h5hzDON2zbRIS9byABe8Z6+xht6kTlCYwNIGEhWkBcRk8F4fwXppsvsHOFHcRSNs94875++RaEwFxPgv98ndKLIJxmPhbL6NsGjkuvqsEcqYPHS5ym120klqTrbB18gJ3BJDQvoA61ZQ26/G4NpTWJ+VCQwcINKDV/4dDhVB1GDRy1IDgEaBWnXsSpgsx6eOsNoCqNtWHgxA2wXwBrwBpPFK6K6A3gNm3cW3iFRCBpZ2mdrkyHmDcPwEUMDzbR1VmRGUfgVsXMx1cZsP4ZZo0EZEduQego+3SUTpKWlc3qXiiRP1MlLJODzBUo591Q7URcfY4rGo7LK0b3eaHcWsdGcAHwRQ8IxvJAae4m4i/FO3/sv9icf5dvS+W96/1/wUOmCIcZo++HgAAAABJRU5ErkJggg==\"","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { LengthLimit } from '../../types/types'\nimport { Filter } from './../Icons'\n\nconst StyledButton = styled.div<{ disabled: boolean }>`\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  pointer-events: auto;\n  padding: 5px;\n  margin-right: -30px;\n  color: black;\n  ${props =>\n    props.disabled === true &&\n    css`\n      color: #989898;\n      pointer-events: none;\n    `}\n  @media (min-width: 600px) {\n    &:hover {\n      padding-top: 3px;\n    }\n  }\n`\nconst FilterCount = styled.div`\n  letter-spacing: 1px;\n  font-size: 14px;\n  margin-left: 1px;\n`\n\ninterface FilterButtonProps {\n  onClick: any\n  envOptimizedPathCount: number\n  lengthLimit: LengthLimit\n  lengthLimits: LengthLimit[]\n}\n\nconst FilterButton = (props: FilterButtonProps) => {\n  const { onClick, envOptimizedPathCount, lengthLimit, lengthLimits } = props\n  const disabled = lengthLimits.length <= 1\n  return (\n    <StyledButton data-cy=\"filter-by-length-button\" disabled={disabled} onClick={onClick}>\n      <Filter />\n      <FilterCount>\n        {lengthLimit.count}/{envOptimizedPathCount + 1}\n      </FilterCount>\n    </StyledButton>\n  )\n}\n\nexport default FilterButton\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { ArrowDown } from './../Icons'\n\ntype IconButtonProps = {\n  onClick: React.MouseEventHandler<HTMLElement>\n  children: any\n  up: boolean\n}\n\nconst IconButton = styled.div<IconButtonProps>`\n  cursor: pointer;\n  pointer-events: auto;\n  display: table;\n  color: black;\n  margin-left: 15px;\n  border-radius: 7px;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  @media (min-width: 600px) {\n    &:hover {\n      padding-bottom: 3px;\n    }\n  }\n  ${props =>\n    props.up &&\n    css`\n      transform: rotate(180deg);\n    `}\n`\n\ntype ButtonProps = {\n  onClick: React.MouseEventHandler<HTMLElement>\n  up: boolean\n}\n\nconst ToggleBottomPanelButton = ({ onClick, up }: ButtonProps) => {\n  return (\n    <IconButton up={up} onClick={onClick}>\n      <ArrowDown />\n    </IconButton>\n  )\n}\n\nexport default ToggleBottomPanelButton\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { routeEnvOptimizedPaths } from '../../reducers/pathsReducer'\nimport T from './../../utils/translator/Translator'\nimport { EnvExposureMode, ReduxState } from '../../types/types'\nimport { ExposureMode } from '../../services/paths'\n\nconst Button = styled.div`\n  cursor: pointer;\n  padding: 5px 11px;\n  color: white;\n  border-radius: 30px;\n  margin: 0px;\n  font-weight: 500;\n  font-size: 14px;\n  text-align: center;\n  width: max-content;\n  letter-spacing: 1px;\n  max-width: 90%;\n  overflow: auto;\n  height: auto;\n  pointer-events: auto;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  background-color: #2d2d2d;\n  @media (min-width: 600px) {\n    &:hover {\n      margin-bottom: 3px;\n    }\n  }\n`\n\ninterface LabelProps {\n  toggleToExposureMode: ExposureMode\n}\n\nconst StyledPathTypeLabel = styled.span<LabelProps>`\n  color: green;\n  ${props =>\n    props.toggleToExposureMode === ExposureMode.CLEAN &&\n    css`\n      color: #baff4f;\n    `}\n`\n\nconst getToggleToExposureMode = (\n  showingPathsOfExposureMode: EnvExposureMode,\n  cleanPathsAvailable: boolean,\n): EnvExposureMode => {\n  return ExposureMode.CLEAN\n}\n\nconst buttonLabelByExposureMode: Record<EnvExposureMode, string> = {\n  [ExposureMode.CLEAN]: 'toggle_paths_exposure.label.fresh_air',\n}\n\nconst getPathToggleFunc = (toggleToPathType: EnvExposureMode, props: PropsFromRedux) => {\n  const { routeEnvOptimizedPaths, travelMode, origin, destination, routingId } = props\n  return routeEnvOptimizedPaths(origin, destination, travelMode, toggleToPathType, routingId)\n}\n\nconst TogglePathsButton = (props: PropsFromRedux) => {\n  const { cleanPathsAvailable, showingPathsOfExposureMode } = props\n  const toggleToExposureMode = getToggleToExposureMode(\n    showingPathsOfExposureMode!,\n    cleanPathsAvailable,\n  )\n  const toggleLabel = buttonLabelByExposureMode[toggleToExposureMode]\n  return (\n    <Button\n      data-cy=\"toggle-paths-exposure\"\n      onClick={() => getPathToggleFunc(toggleToExposureMode, props)}\n    >\n      <T>toggle_paths_exposure.label.show</T>\n      <StyledPathTypeLabel toggleToExposureMode={toggleToExposureMode}>\n        {' '}\n        <T>{toggleLabel}</T>{' '}\n      </StyledPathTypeLabel>\n      {toggleToExposureMode === ExposureMode.CLEAN && (\n        <T>toggle_paths_exposure.label.(fresh_air).paths</T>\n      )}\n    </Button>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  cleanPathsAvailable: state.paths.cleanPathsAvailable,\n  routingId: state.paths.routingId,\n  travelMode: state.paths.travelMode,\n  showingPathsOfExposureMode: state.paths.showingPathsOfExposureMode,\n  origin: state.origin,\n  destination: state.destination,\n})\n\nconst connector = connect(mapStateToProps, { routeEnvOptimizedPaths })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(TogglePathsButton)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { menu } from './../../constants'\nimport FilterButton from './FilterButton'\nimport { ListButton } from './../Icons'\nimport ToggleBottomPanelButton from './ToggleBottomPanelButton'\nimport TogglePathsButton from './TogglePathsButton'\nimport {\n  togglePathPanel,\n  showPathList,\n  showMaxLengthFilterSelector,\n} from './../../reducers/uiReducer'\nimport { ReduxState } from '../../types/types'\n\nconst ControlPanel = styled.div<{ pathPanelVisible: boolean }>`\n  background: rgba(255, 255, 255, 0.98);\n  height: 53px;\n  margin-left: 0px;\n  display: flex;\n  pointer-events: auto;\n  box-shadow: 0 -4px 8px 0 rgba(0, 0, 0, 0.07), 0 -6px 20px 0 rgba(0, 0, 0, 0.04);\n  border: 1px solid #d0d0d0;\n  border-top-right-radius: ${props => (props.pathPanelVisible === true ? '0px' : '6px')};\n  @media (min-width: 600px) {\n    width: 380px;\n    padding: 0px 6px 0px 6px;\n    border: none;\n  }\n`\nconst ButtonFlex = styled.div`\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  width: 100%;\n`\n\nconst BottomControlPanel = (props: propsFromRedux) => {\n  const {\n    showingPaths,\n    pathPanelVisible,\n    pathPanelContent,\n    envOptimizedPathCount,\n    lengthLimit,\n    lengthLimits,\n    togglePathPanel,\n    showPathList,\n    showMaxLengthFilterSelector,\n  } = props\n\n  if (!showingPaths) return null\n\n  return (\n    <ControlPanel pathPanelVisible={pathPanelVisible}>\n      <ButtonFlex>\n        {pathPanelContent === menu.lengthLimitSelector ? (\n          <ListButton onClick={showPathList} />\n        ) : (\n          <FilterButton\n            envOptimizedPathCount={envOptimizedPathCount}\n            lengthLimit={lengthLimit}\n            lengthLimits={lengthLimits}\n            onClick={showMaxLengthFilterSelector}\n          />\n        )}\n        <ToggleBottomPanelButton\n          up={!pathPanelVisible}\n          onClick={togglePathPanel}\n        ></ToggleBottomPanelButton>\n        <TogglePathsButton />\n      </ButtonFlex>\n    </ControlPanel>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  showingPaths: state.paths.showingPaths,\n  showingPathsOfExposureMode: state.paths.showingPathsOfExposureMode,\n  pathPanelVisible: state.ui.pathPanel,\n  pathPanelContent: state.ui.pathPanelContent,\n  envOptimizedPathCount: state.paths.envOptimizedPathFC.features.length,\n  lengthLimit: state.paths.lengthLimit,\n  lengthLimits: state.paths.lengthLimits,\n})\n\nconst connector = connect(mapStateToProps, {\n  togglePathPanel,\n  showPathList,\n  showMaxLengthFilterSelector,\n})\n\ntype propsFromRedux = ConnectedProps<typeof connector>\nexport default connector(BottomControlPanel)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { LengthLimit } from '../../types/types'\nimport { CloseButton } from '../Icons'\nimport T from './../../utils/translator/Translator'\n\nconst OuterDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n`\nconst FlexRow = styled.div`\n  display: flex;\n  align-items: center;\n`\nconst CloseButtonBox = styled.div`\n  margin: 1px -10px 4px 5px;\n`\nconst TooltipStyle = styled.div`\n  font-weight: 500;\n  text-align: center;\n  max-width: 250px;\n  margin: 2px 0px 7px 0px;\n`\nconst StyledMaxLengthOption = styled.div<{ selected?: boolean }>`\n  pointer-events: auto;\n  cursor: pointer;\n  padding: 5px 10px;\n  width: max-content;\n  border-radius: 29px;\n  margin: 3px 3px 3px 3px;\n  background-color: white;\n  border: 1px solid black;\n  color: black;\n  ${props =>\n    props.selected === true &&\n    css`\n      background-color: #0b5d21;\n      border-color: #0b5d21;\n      color: white;\n    `}\n  @media (min-width: 600px) {\n    &:hover {\n      margin-left: 6px;\n    }\n  }\n`\n\ninterface IMaxLengthOption {\n  ll: LengthLimit\n  selected: boolean\n  setLengthLimit: Function\n}\n\nconst MaxLengthOption = ({ ll, selected, setLengthLimit }: IMaxLengthOption) => {\n  return (\n    <StyledMaxLengthOption selected={selected} onClick={() => setLengthLimit(ll)}>\n      {ll.label}\n    </StyledMaxLengthOption>\n  )\n}\n\ninterface MaxLengthFilterSelectorProps {\n  lengthLimit: LengthLimit\n  lengthLimits: LengthLimit[]\n  setLengthLimit: Function\n  showPathList: React.MouseEventHandler<HTMLElement>\n}\n\nconst MaxLengthFilterSelector = ({\n  lengthLimit,\n  lengthLimits,\n  setLengthLimit,\n  showPathList,\n}: MaxLengthFilterSelectorProps) => {\n  return (\n    <OuterDiv>\n      <FlexRow>\n        <TooltipStyle>\n          <T>filter_paths_by_distance.tooltip</T>\n        </TooltipStyle>\n        <CloseButtonBox data-cy=\"close-filter-panel\">\n          <CloseButton size={50} onClick={showPathList} />\n        </CloseButtonBox>\n      </FlexRow>\n      {lengthLimits.map(ll => (\n        <MaxLengthOption\n          key={ll.label}\n          ll={ll}\n          selected={lengthLimit.limit === ll.limit}\n          setLengthLimit={setLengthLimit}\n        />\n      ))}\n    </OuterDiv>\n  )\n}\n\nexport default MaxLengthFilterSelector\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport styled from 'styled-components'\nimport { setCarTripInfo } from '../../../reducers/pathsReducer'\nimport { ReduxState } from '../../../types/types'\nimport T from './../../../utils/translator/Translator'\n\nconst PathRowFlex = styled.div`\n  display: flex;\n  justify-content: space-around;\n`\nconst CarTripInfoBox = styled.div`\n  padding: 0.5em 1.3em;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 12px 0px;\n  border-radius: 1px;\n  border-left: 3px solid;\n  border-image: linear-gradient(to bottom, #5e6069, #cecece) 1 100%;\n  border-width: 0px 0px 0px 3px;\n  margin: 13px 10px;\n  line-height: 133%;\n  font-size: 14px;\n`\n\nconst CarTripInfoButton = styled.button`\n  margin: 11px;\n  cursor: pointer;\n  padding: 4px 11px;\n  border-radius: 30px;\n  font-weight: 500;\n  font-size: 14px;\n  text-align: center;\n  width: max-content;\n  letter-spacing: 1px;\n  max-width: 90%;\n  overflow: auto;\n  height: auto;\n  pointer-events: auto;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  outline: none;\n  color: black;\n  border: 1px solid black;\n  background-color: white;\n  &:focus {\n    background-color: #f1f1f1;\n  }\n`\n\nexport const formatDurationMins = (timeSecs: number): string => {\n  const timeMin = timeSecs / 60\n  return String(Math.round(timeMin)) + ' min'\n}\n\nconst CarTripInfo = (props: PropsFromRedux) => {\n  const { odCoords, carTripInfo, setCarTripInfo } = props\n\n  return (\n    <PathRowFlex>\n      {!carTripInfo && (\n        <CarTripInfoButton onClick={() => setCarTripInfo(odCoords!)}>\n          <T>compare-to-car-trip.button.label</T>\n        </CarTripInfoButton>\n      )}\n      {carTripInfo && (\n        <CarTripInfoBox>\n          <div style={{ fontWeight: 550 }}>\n            <T>compare-to-car-trip.with-car.label</T>\n          </div>\n          <div>\n            <T>compare-to-car-trip.duration.label</T>: {formatDurationMins(carTripInfo.duration)}\n          </div>\n          <div>\n            C02: {carTripInfo.co2min}-{carTripInfo.co2max} g\n          </div>\n        </CarTripInfoBox>\n      )}\n    </PathRowFlex>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  odCoords: state.paths.odCoords,\n  carTripInfo: state.paths.carTripInfo,\n})\n\nconst connector = connect(mapStateToProps, { setCarTripInfo })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(CarTripInfo)\n","import React from 'react'\nimport styled from 'styled-components'\nimport T from '../../utils/translator/Translator'\n\nconst Meter = styled.div`\n  width: 100%;\n  height: 9px;\n  position: relative;\n  background: #e2e2e2;\n  -moz-border-radius: 25px;\n  -webkit-border-radius: 25px;\n  border-radius: 25px;\n  padding: 5px 6px;\n  box-shadow: inset 0 -1px 1px rgba(255, 255, 255, 0.3);\n`\n\nconst Bar = styled.span<{ width: number; filter: string }>`\n  display: block;\n  height: 100%;\n  border-top-right-radius: 8px;\n  border-bottom-right-radius: 8px;\n  border-top-left-radius: 20px;\n  border-bottom-left-radius: 20px;\n  background-color: rgb(12, 223, 68);\n  box-shadow: inset 0 2px 7px rgba(255, 255, 255, 0.1), inset 0 -2px 6px rgba(0, 0, 0, 0.2);\n  position: relative;\n  overflow: hidden;\n  width: ${props => props.width}%;\n  filter: ${props => props.filter};\n`\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`\n\nconst Label = styled.div`\n  color: #464646;\n  margin: 2px 0px 4px 0px;\n  white-space: nowrap;\n  font-size: 13px;\n  @media (max-width: 350px) {\n    font-size: 12px;\n  }\n`\n\nconst getGrayscaleFilter = (expScorePct: number): number => {\n  // get grayscale filter value from range 0% to 100%\n  if (expScorePct > 0) {\n    const saturation = (expScorePct / 40) * 100 //0-100\n    return Math.min(100, Math.round((100 - saturation) * 1.3))\n  }\n  return 0\n}\n\ninterface Props {\n  expScorePct: number\n  labelKey: string\n  lowScoreDim: boolean\n}\n\nconst ExposureScoreBar = ({ expScorePct, labelKey, lowScoreDim }: Props) => {\n  const filter =\n    lowScoreDim && expScorePct <= 40 ? `grayscale(${getGrayscaleFilter(expScorePct)}%)` : 'none'\n\n  return (\n    <Container>\n      <Label>\n        <T>{labelKey}</T>\n      </Label>\n      <Meter>\n        <Bar width={expScorePct} filter={filter} />\n      </Meter>\n    </Container>\n  )\n}\n\nExposureScoreBar.defaultProps = { lowScoreDim: true }\nexport default ExposureScoreBar\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { IoIosArrowForward } from 'react-icons/io'\nimport { IoIosArrowBack } from 'react-icons/io'\n\nconst iconStyle = `\n  display: inline-block;\n  vertical-align: middle;\n  font-size: 31px;\n`\nconst ArrowForward = styled(IoIosArrowForward)`\n  ${iconStyle}\n`\nconst ArrowBack = styled(IoIosArrowBack)`\n  ${iconStyle}\n`\nconst StyledOpenClosePathBox = styled.button<{ close?: any; disabled?: boolean }>`\n  display: inline-block;\n  align-items: center;\n  pointer-events: auto;\n  cursor: pointer;\n  width: 37px;\n  height: 45px;\n  border-radius: 5px;\n  background-color: white;\n  border: 2px solid transparent;\n  color: black;\n  padding: 0 0 0 1px;\n  transition-duration: 0.12s;\n  box-shadow: 0 -1px 6px 0 rgb(0 0 0 / 8%), 0 3px 4px 0 rgb(0 0 0 / 8%);\n  @media (min-width: 600px) {\n    &:hover {\n      box-shadow: 0 -1px 7px 0 rgb(0 0 0 / 9%), 0 3px 5px 0 rgb(0 0 0 / 10%);\n    }\n  }\n  @media (max-width: 350px) {\n    width: 33px;\n  }\n  ${props =>\n    props.close &&\n    css`\n      padding: 0px 1px 0px 0px;\n      margin-top: 2px;\n    `}\n  ${props =>\n    props.disabled === true &&\n    css`\n      color: gray;\n      cursor: default;\n      pointer-events: none;\n      &:hover {\n        box-shadow: 0 -1px 6px 0 rgb(0 0 0 / 8%), 0 3px 4px 0 rgb(0 0 0 / 8%);\n      }\n    `}\n`\n\nexport const OpenPathBox = ({\n  disabled,\n  handleClick,\n}: {\n  disabled: boolean\n  handleClick: React.MouseEventHandler<HTMLElement>\n}) => {\n  return (\n    <StyledOpenClosePathBox data-cy=\"open-path-button\" disabled={disabled} onClick={handleClick}>\n      <ArrowForward />\n    </StyledOpenClosePathBox>\n  )\n}\n\nexport const ClosePathBox = ({\n  handleClick,\n}: {\n  handleClick: React.MouseEventHandler<HTMLElement>\n}) => {\n  return (\n    <StyledOpenClosePathBox data-cy=\"close-path-button\" close onClick={handleClick}>\n      <ArrowBack />\n    </StyledOpenClosePathBox>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { utils } from '../../../utils/index'\nimport ExposureScoreBar from './../ExposureScoreBar'\nimport { OpenPathBox } from '../OpenClosePathBoxes'\nimport { PathFeature, PathProperties } from '../../../types/types'\nimport { ExposureMode, TravelMode } from '../../../services/paths'\n\ntype PathBoxProps = {\n  selected: boolean\n  children: any\n}\nconst StyledPathListPathBox = styled.div.attrs((props: PathBoxProps) => ({\n  style: {\n    border: props.selected ? '2px solid black' : '',\n    boxShadow: props.selected\n      ? '0 -1px 6px 0 rgba(0, 0, 0, 0.1), 0 3px 4px 0 rgba(0, 0, 0, 0.13)'\n      : '',\n  },\n}))<PathBoxProps>`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-evenly;\n  pointer-events: auto;\n  border-radius: 5px;\n  margin: 4px 0px 4px 0px;\n  background-color: white;\n  border: 2px solid transparent;\n  padding: 9px 4px;\n  color: black;\n  cursor: default;\n  transition-duration: 0.12s;\n  box-shadow: 0 -1px 6px 0 rgba(0, 0, 0, 0.1), 0 3px 4px 0 rgba(0, 0, 0, 0.13);\n  width: 100%;\n  @media (max-width: 360px) {\n    width: calc(100% - 8px);\n  }\n  @media (min-width: 600px) {\n    &:hover {\n      cursor: pointer;\n      box-shadow: 0 -1px 6px 1px rgba(0, 0, 0, 0.12), 0 3px 6px 1px rgba(0, 0, 0, 0.18);\n    }\n  }\n`\nconst TripInfo = styled.div`\n  margin: 0 7px 0 4px;\n  display: flex;\n  width: 48px;\n  align-content: flex-end;\n  flex-direction: column;\n  text-align: right;\n  @media (max-width: 350px) {\n    margin: 0 4px 0 3px;\n  }\n`\nconst TravelTime = styled.div`\n  font-size: 13px;\n  color: black;\n  margin-bottom: 3px;\n  @media (max-width: 350px) {\n    line-height: 100%;\n  }\n`\nconst Distance = styled.div`\n  font-size: 11px;\n  color: grey;\n`\nconst MetersContainer = styled.div`\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n  width: calc(100% - 48px);\n`\nconst MeterWrapper = styled.div`\n  flex-grow: 1;\n  flex-basis: 0;\n  margin: 2px 10px;\n  @media (max-width: 350px) {\n    margin: 2px 9px;\n  }\n`\nconst OpenPathInfoWrapper = styled.div`\n  margin: 0 7px 0 7px;\n  display: flex;\n  width: 30px;\n  flex-direction: column;\n  justify-content: center;\n  @media (max-width: 350px) {\n    margin: 0 2px 0 5px;\n  }\n`\n\nconst roundTo = (number: number, digits: number): number => {\n  return Math.round(number * (10 * digits)) / (10 * digits)\n}\n\nconst getFormattedDistanceString = (m: number): string => {\n  let distance\n  let unit\n  if (Math.abs(m) >= 950) {\n    const km = m / 1000\n    distance = roundTo(km, 1)\n    unit = ' km'\n  } else if (Math.abs(m) > 60) {\n    distance = Math.round(m / 10) * 10\n    unit = ' m'\n  } else {\n    distance = Math.round(m)\n    unit = ' m'\n  }\n  return String(distance) + unit\n}\n\nconst openPathDisabled = (\n  showingPathsOfExposureMode: ExposureMode,\n  pathProps: PathProperties,\n): boolean => {\n  if (showingPathsOfExposureMode === ExposureMode.CLEAN) {\n    return pathProps.missing_aq\n  }\n  return false\n}\n\ninterface PathBoxProperties {\n  path: PathFeature\n  selected: boolean\n  travelMode: TravelMode\n  showingPathsOfExposureMode: ExposureMode\n  handleClick: React.MouseEventHandler<HTMLElement>\n  setOpenedPath: React.MouseEventHandler<HTMLElement>\n}\n\nconst PathListPathBox = ({\n  path,\n  selected,\n  travelMode,\n  showingPathsOfExposureMode,\n  handleClick,\n  setOpenedPath,\n}: PathBoxProperties) => {\n  const handleSetOpenedPath = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    e.stopPropagation()\n    setOpenedPath(e)\n  }\n\n  return (\n    <StyledPathListPathBox\n      selected={selected}\n      data-cy={`path-box-selected-${selected}`}\n      onClick={handleClick}\n    >\n      <TripInfo>\n        <TravelTime>\n          {utils.formatDuration(utils.getSecsFromModeLengths(path.properties.mode_lengths))}\n        </TravelTime>\n        <Distance>{getFormattedDistanceString(path.properties.length)}</Distance>\n      </TripInfo>\n      <MetersContainer>\n        {path.properties.aqScore && (\n          <MeterWrapper>\n            <ExposureScoreBar\n              expScorePct={path.properties.aqScore}\n              labelKey={'exposure_score_label.air_quality'}\n            />\n          </MeterWrapper>\n        )}\n        <OpenPathInfoWrapper>\n          <OpenPathBox\n            handleClick={handleSetOpenedPath}\n            disabled={openPathDisabled(showingPathsOfExposureMode, path.properties)}\n          />\n        </OpenPathInfoWrapper>\n      </MetersContainer>\n    </StyledPathListPathBox>\n  )\n}\n\nexport default PathListPathBox\n","import React, { createRef, Fragment, RefObject } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport styled from 'styled-components'\nimport { setSelectedPath, setOpenedPath } from '../../../reducers/pathsReducer'\nimport { ReduxState } from '../../../types/types'\nimport CarTripInfo from './CarTripInfo'\nimport PathListPathBox from './PathListPathBox'\n\nconst PathRowFlex = styled.div`\n  display: flex;\n  justify-content: space-around;\n`\n\ntype State = {\n  linkVisible: boolean\n  pathRefs: { [key: string]: RefObject<any> }\n}\n\nclass PathList extends React.Component<PropsFromRedux, State> {\n  constructor(props: PropsFromRedux) {\n    super(props)\n    this.state = {\n      linkVisible: true,\n      pathRefs: { fast: createRef() },\n    }\n  }\n\n  componentDidUpdate(prevProps: PropsFromRedux) {\n    const { envOptimizedPathFC } = this.props.paths\n    let pathRefs = this.state.pathRefs\n    let updateRefs = false\n\n    for (let feat of envOptimizedPathFC.features) {\n      if (!(feat.properties.id in pathRefs)) {\n        pathRefs[feat.properties.id] = createRef()\n        updateRefs = true\n      }\n    }\n    if (updateRefs) {\n      this.setState({ pathRefs })\n    }\n    if (prevProps.scrollToPath !== this.props.scrollToPath) {\n      this.state.pathRefs[this.props.scrollToPath].current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'nearest',\n        inline: 'start',\n      })\n    }\n  }\n\n  render() {\n    const { paths, setSelectedPath, setOpenedPath } = this.props\n    const {\n      showingPathsOfExposureMode,\n      showingPathsOfTravelMode,\n      shortPathFC,\n      envOptimizedPathFC,\n      selPathFC,\n      lengthLimit,\n    } = paths\n\n    const selPathId = selPathFC.features.length > 0 ? selPathFC.features[0].properties.id : 'none'\n\n    const shortPath = shortPathFC.features[0]\n    const envOptimizedPaths = envOptimizedPathFC.features.filter(\n      path => path.properties.length <= lengthLimit.limit,\n    )\n\n    return (\n      <Fragment>\n        <PathRowFlex data-cy=\"shortest-path-box\" ref={this.state.pathRefs[shortPath.properties.id]}>\n          <PathListPathBox\n            path={shortPath}\n            travelMode={showingPathsOfTravelMode!}\n            showingPathsOfExposureMode={showingPathsOfExposureMode!}\n            handleClick={() => setSelectedPath(shortPath.properties.id)}\n            selected={shortPath.properties.id === selPathId}\n            setOpenedPath={() => setOpenedPath(shortPath)}\n          />\n        </PathRowFlex>\n        {envOptimizedPaths.map(path => (\n          <PathRowFlex\n            data-cy=\"env-optimized-path-box\"\n            key={path.properties.id}\n            ref={this.state.pathRefs[path.properties.id]}\n          >\n            <PathListPathBox\n              path={path}\n              travelMode={showingPathsOfTravelMode!}\n              showingPathsOfExposureMode={showingPathsOfExposureMode!}\n              handleClick={() => setSelectedPath(path.properties.id)}\n              selected={path.properties.id === selPathId}\n              setOpenedPath={() => setOpenedPath(path)}\n            />\n          </PathRowFlex>\n        ))}\n        <CarTripInfo />\n      </Fragment>\n    )\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  paths: state.paths,\n  scrollToPath: state.pathList.scrollToPath,\n})\n\nconst mapDispatchToProps = {\n  setSelectedPath,\n  setOpenedPath,\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(PathList)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { AirQualitySpec, Category } from '../../types/aqi_spec'\n\nconst StyledAqBar = styled.div<{ withMargins?: boolean }>`\n  display: flex;\n  width: 94%;\n  ${props =>\n    props.withMargins === true &&\n    css`\n      margin: 3px 0px 3px 0px;\n    `}\n`\nconst StyledAqPc = styled.div<{ first: boolean; last: boolean; pc: number; aqCl: Category}>`\n  height: 8px;\n  box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.05), 0 3px 4px 0 rgba(0, 0, 0, 0.01);\n  width: ${props => props.pc || '0'}%;\n  background-color: ${props => props.aqCl.color || 'grey'};\n  ${props =>\n    props.first &&\n    css`\n      border-radius: 8px 0px 0px 8px;\n    `}\n  ${props =>\n    props.last &&\n    css`\n      border-radius: 0px 8px 8px 0px;\n    `}\n  ${props =>\n    props.first &&\n    props.last &&\n    css`\n      border-radius: 8px;\n    `}\n`\n\ninterface Props {\n  withMargins?: boolean\n  aqiPcts: any\n}\n\nexport const PathAqBar = ({ aqiPcts, withMargins }: Props) => {\n  const aqs = AirQualitySpec.getInstance().getCategories()\n\n\n  return (\n    <StyledAqBar withMargins={withMargins}>\n      {aqs.map((aqCl, i) => {\n        const first = i === 0\n        const last = i === aqs.length - 1\n        console.log(aqCl)\n        return (\n          <StyledAqPc first={first} last={last} key={aqCl.description} aqCl={aqCl} pc={aqiPcts[i+1]} />\n        )\n      })}\n    </StyledAqBar>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { TravelMode } from '../../../services/paths'\nimport { AqiClass, PathFeature } from '../../../types/types'\nimport { utils } from '../../../utils/index'\n\nimport T from './../../../utils/translator/Translator'\nimport { AirQualitySpec } from '../../../types/aqi_spec'\n\nconst StyledOpenedPathExposures = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-evenly;\n  pointer-events: auto;\n  border-radius: 5px;\n  margin: 4px 0px 4px 0px;\n  border: 2px solid transparent;\n  padding: 1px 0px 2px 4px;\n  color: black;\n  cursor: default;\n  transition-duration: 0.12s;\n  width: 95%;\n  margin: auto;\n`\nconst PathPropsRow = styled.div`\n  display: flex;\n  justify-content: space-around;\n  font-size: 14px;\n  width: 100%;\n`\nconst FlexCols = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 0px 1px 0px 1px;\n  justify-content: space-evenly;\n`\nconst StyledAqLabelBox = styled.div<{ aqCl: AqiClass }>`\n  border-radius: 8px;\n  margin: 0px 3px 0px 3px;\n  padding: 5px 7px;\n  background-color: ${props => AirQualitySpec.getInstance().getCategories()[props.aqCl].color || 'grey'};\n`\nconst StyledAqExposureBox = styled.div`\n  border-radius: 8px;\n  margin: 0px 3px 0px 3px;\n  padding: 5px 7px;\n`\nconst StyledAqExposureRow = styled.div`\n  display: flex;\n  margin: 2px 0 4px 0px;\n  flex-direction: row;\n`\n\nconst AqClLabelBox = ({ aqCl }: { aqCl: AqiClass }) => {\n  console.log(`aqCL ${aqCl}`)\n  return (\n    <StyledAqLabelBox aqCl={aqCl}>\n      <T>{AirQualitySpec.getInstance().getCategories()[aqCl].description}</T> ({aqCl})\n    </StyledAqLabelBox>\n  )\n}\n\ninterface AqExposureRowProps {\n  aqCl: AqiClass\n  aqClExp: number\n  travelMode: TravelMode\n}\n\nconst AqExposureRow = ({ aqCl, aqClExp, travelMode }: AqExposureRowProps) => {\n  return (\n    <StyledAqExposureRow>\n      <AqClLabelBox aqCl={aqCl} />\n      <StyledAqExposureBox>\n        {utils.formatDuration(utils.getSecsFromLength(aqClExp, travelMode), true)}\n      </StyledAqExposureBox>\n    </StyledAqExposureRow>\n  )\n}\n\nexport const OpenedPathAqExps = ({\n  path,\n  travelMode,\n}: {\n  path: PathFeature\n  travelMode: TravelMode\n}) => {\n  const aqClExps = path.properties.aq_cl_exps\n  const aqKeys = Object.keys(aqClExps)\n  const aqCls = aqKeys.map(aq => Number(aq)).sort() as AqiClass[]\n\n  return (\n    <StyledOpenedPathExposures>\n      <StyledOpenedPathExposures>\n        <PathPropsRow>\n          <FlexCols>\n            {aqCls.map(aqCL => (\n              <AqExposureRow\n                key={aqCL}\n                aqCl={aqCL}\n                aqClExp={aqClExps[aqCL]}\n                travelMode={travelMode}\n              />\n            ))}\n          </FlexCols>\n        </PathPropsRow>\n      </StyledOpenedPathExposures>\n    </StyledOpenedPathExposures>\n  )\n}\n","import React, { Fragment } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport styled from 'styled-components'\nimport { unsetOpenedPath } from '../../../reducers/pathsReducer'\nimport { PathAqBar } from './../PathAqBar'\nimport { OpenedPathAqExps } from './OpenedPathAqExps'\nimport { ClosePathBox } from './../OpenClosePathBoxes'\nimport T from './../../../utils/translator/Translator'\nimport { PathFeature, ReduxState } from '../../../types/types'\nimport { ExposureMode, TravelMode } from '../../../services/paths'\n\nconst PathRowFlex = styled.div<{ padding?: string }>`\n  display: flex;\n  justify-content: space-around;\n  padding: ${props => (props.padding ? props.padding : 'initial')};\n`\nconst ExposureBarsFlex = styled.div`\n  display: flex;\n  width: calc(90% - 21px);\n  min-height: 56px;\n  flex-direction: column;\n  justify-content: space-around;\n  margin: 3px 0px 1px 0px;\n`\nconst BarsLabel = styled.div`\n  font-size: 14px;\n  margin: 1px 0px 5px 0px;\n`\n\nconst OpenedPathInfo = ({ paths, unsetOpenedPath }: PropsFromRedux) => {\n  const { shortPathFC, openedPath, showingStatsType, showingPathsOfTravelMode } = paths\n  const openedIsShortest = openedPath!.properties.type === ExposureMode.FAST\n  const shortPath = shortPathFC.features[0]\n\n  switch (showingStatsType) {\n    case ExposureMode.CLEAN: {\n      return (\n        <PathAqExposures\n          openedIsShortest={openedIsShortest}\n          path={openedPath!}\n          shortPath={openedIsShortest ? null : shortPath}\n          travelMode={showingPathsOfTravelMode!}\n          unsetOpenedPath={unsetOpenedPath}\n        />\n      )\n    }\n    default:\n      return null\n  }\n}\n\ninterface PathExposureProps {\n  openedIsShortest: boolean\n  path: PathFeature\n  shortPath: PathFeature | null\n  travelMode: TravelMode\n  unsetOpenedPath: React.MouseEventHandler<HTMLElement>\n}\n\n\nconst PathAqExposures = ({\n  openedIsShortest,\n  path,\n  shortPath,\n  travelMode,\n  unsetOpenedPath,\n}: PathExposureProps) => {\n  return (\n    <Fragment>\n      <PathRowFlex>\n        <ClosePathBox handleClick={unsetOpenedPath} />\n        <ExposureBarsFlex>\n          <BarsLabel>\n            <T>\n              {openedIsShortest\n                ? 'opened_shortest_clean_path.tooltip'\n                : 'opened_clean_path.tooltip'}\n            </T>\n          </BarsLabel>\n          <PathAqBar aqiPcts={path.properties.aq_cl_pcts} withMargins={true} />\n          {!openedIsShortest && shortPath && (\n            <PathAqBar aqiPcts={path.properties.aq_cl_pcts} withMargins={true} />\n          )}\n        </ExposureBarsFlex>\n      </PathRowFlex>\n      <OpenedPathAqExps path={path} travelMode={travelMode} />\n    </Fragment>\n  )\n}\n\n\nconst mapStateToProps = (state: ReduxState) => ({\n  paths: state.paths,\n})\n\nconst mapDispatchToProps = {\n  unsetOpenedPath,\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(OpenedPathInfo)\n","import React, { Fragment } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { menu } from '../../constants'\nimport PathList from './PathList/PathList'\nimport OpenedPathInfo from './OpenedPathInfo/OpenedPathInfo'\nimport { ReduxState } from '../../types/types'\n\nconst PathInfoPanel = (props: PropsFromRedux) => {\n  const { openedPath, pathPanelContent } = props\n  const showingPathList = pathPanelContent === menu.pathList && !openedPath\n  const showingOpenedPath = openedPath && !(pathPanelContent === menu.lengthLimitSelector)\n\n  return (\n    <Fragment>\n      {showingPathList && <PathList />}\n      {showingOpenedPath && <OpenedPathInfo />}\n    </Fragment>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  openedPath: state.paths.openedPath,\n  pathPanelContent: state.ui.pathPanelContent,\n})\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(PathInfoPanel)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { menu } from './../../constants'\nimport { setLengthLimit } from './../../reducers/pathsReducer'\nimport { showPathList } from './../../reducers/uiReducer'\nimport MaxLengthFilterSelector from './MaxLengthFilterSelector'\nimport PathInfoPanel from './PathInfoPanel'\nimport LoadAnimation from './../LoadAnimation/LoadAnimation'\nimport { ReduxState } from '../../types/types'\n\nconst PathPanelContainer = styled.div<{ showingOpenedPath?: boolean }>`\n  margin: 0px;\n  background: rgba(255, 255, 255, 0.95);\n  overflow: auto;\n  width: auto;\n  max-height: 184px;\n  pointer-events: auto;\n  padding: 6px 6px 3px 6px;\n  box-shadow: 0 -4px 8px 0 rgba(0, 0, 0, 0.07), 0 -6px 20px 0 rgba(0, 0, 0, 0.04);\n  @media (min-width: 600px) {\n    width: 380px;\n    max-height: calc(100vh - 230px);\n    border-top-right-radius: 6px;\n    border-top-left-radius: 6px;\n  }\n  ${props =>\n    props.showingOpenedPath === true &&\n    css`\n      max-height: calc(100vh - 121px);\n      height: min-content;\n    `}\n`\nconst LoadAnimationContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 12px 0px 20px 0px;\n`\n\nconst PathPanel = (props: PropsFromRedux) => {\n  const { paths, pathPanelVisible, pathPanelContent } = props\n  const { setLengthLimit, showPathList } = props\n  const { waitingPaths, showingPaths, openedPath, lengthLimit, lengthLimits } = paths\n\n  if (waitingPaths) {\n    return (\n      <PathPanelContainer>\n        <LoadAnimationContainer>\n          <LoadAnimation size={57} />\n        </LoadAnimationContainer>\n      </PathPanelContainer>\n    )\n  }\n\n  if (!showingPaths || !pathPanelVisible) return null\n\n  const showingOpenedPath = openedPath !== null && !(pathPanelContent === menu.lengthLimitSelector)\n\n  return (\n    <PathPanelContainer data-cy=\"path-panel-container\" showingOpenedPath={showingOpenedPath}>\n      {pathPanelContent === menu.lengthLimitSelector ? (\n        <MaxLengthFilterSelector\n          lengthLimit={lengthLimit}\n          lengthLimits={lengthLimits}\n          setLengthLimit={setLengthLimit}\n          showPathList={showPathList}\n        />\n      ) : null}\n      <PathInfoPanel />\n    </PathPanelContainer>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  paths: state.paths,\n  scrollToPath: state.pathList.scrollToPath,\n  pathPanelVisible: state.ui.pathPanel,\n  pathPanelContent: state.ui.pathPanelContent,\n})\n\nconst mapDispatchToProps = {\n  setLengthLimit,\n  showPathList,\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(PathPanel)\n","import React, { Component, ReactElement } from 'react'\nimport MapboxGL from 'mapbox-gl'\nimport { Feature, LineString } from 'geojson'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { initializeMap, updateCamera, setLayerLoaded } from './../../reducers/mapReducer'\nimport { debugNearestEdgeAttrs } from '../../services/paths'\nimport { unsetSelectedPath } from './../../reducers/pathsReducer'\nimport { initialMapCenter, initialMapZoom, Basemap, LayerId, MapId } from './../../constants'\nimport { utils } from './../../utils/index'\nimport { clickTol } from './../../constants'\nimport { MbMap } from '../../types/types'\nimport Area from '../../Borders.json'\n\n\nMapboxGL.accessToken =\n  process.env.REACT_APP_MB_ACCESS || 'pk.eyJ1Ijoiam9vc2UiLCJhIjoiY2pkaWtwMWU1MGFjYzMzcXB6cDI4cG4ybCJ9.TZX6Fjx5bqDG32SzEyURDw'\n\ninterface PropsType {\n  children: ReactElement[]\n}\n\ninterface Props {\n  basemap: Basemap | undefined\n  mapId: MapId | undefined\n}\n\ntype State = {\n  loaded: boolean\n  isReady: boolean\n  flying: boolean\n}\n\nclass Map extends Component<PropsType & Props & PropsFromRedux, State> {\n  map: MbMap = null\n  mapContainer: any\n\n  state: State = {\n    isReady: false,\n    loaded: false,\n    flying: false,\n  }\n\n  componentDidMount() {\n    this.setupMapWindow()\n\n    this.map = new MapboxGL.Map({\n      container: this.mapContainer,\n      style: this.props.basemap || Basemap.STREETS,\n      center: initialMapCenter,\n      zoom: initialMapZoom,\n      boxZoom: false,\n      trackResize: true,\n      attributionControl: false,\n    })\n\n    this.map.on('style.load', () => {\n      console.log('map style loaded')\n      this.addCityBounds()\n      this.props.setLayerLoaded(LayerId.BASEMAP)\n    })\n\n    this.map.on('render', () => {\n      if (!this.state.isReady) this.setState({ isReady: true })\n    })\n\n    this.map.on('load', () => {\n      this.setState({ loaded: true, isReady: true })\n      this.map!.touchZoomRotate.disableRotation()\n      this.map!.dragRotate.disable()\n      this.props.initializeMap()\n    })\n\n    this.map.on('moveend', () => {\n      this.props.updateCamera(this.map!.getCenter(), this.map!.getZoom())\n    })\n\n    this.map.on('click', (e: any) => {\n      if (process.env.REACT_APP_DEBUG_GRAPH === 'True') {\n        debugNearestEdgeAttrs(e.lngLat)\n      }\n      const features = utils.getLayersFeaturesAroundClickE(\n        [LayerId.GREEN_PATHS, LayerId.SHORT_PATH],\n        e,\n        clickTol,\n        this.map!,\n      )\n      if (features.length === 0) {\n        this.props.unsetSelectedPath()\n      }\n    })\n  }\n\n  addCityBounds() {\n    const lineGeoJSON: Feature<LineString> = {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'LineString',\n        coordinates: Area.features[0].geometry.coordinates[0],\n      },\n    }\n\n    this.map!.addSource('line-source', {\n      type: 'geojson',\n      data: lineGeoJSON,\n    })\n\n    this.map!.addLayer({\n      id: 'line-layer',\n      type: 'line',\n      source: 'line-source',\n      layout: {},\n      paint: {\n        'line-color': '#000', // Line color\n        'line-width': 5, // Line width for a bold line\n      },\n    })\n  }\n\n  componentDidUpdate(prevProps: PropsFromRedux, prevState: State) {\n    if (!this.map) return\n\n    if (!prevState.isReady && this.state.isReady) {\n      this.props.updateCamera(this.map!.getCenter(), this.map!.getZoom())\n    }\n  }\n\n  setupMapWindow = () => {\n    this.updateWindowDimensions()\n    window.addEventListener('resize', this.updateWindowDimensions)\n    window.addEventListener('orientationchange', this.updateWindowDimensions)\n    this.mapContainer.addEventListener(\n      'touchmove',\n      (e: any) => {\n        e.preventDefault()\n      },\n      { passive: false },\n    )\n  }\n\n  updateWindowDimensions = () => {\n    if (!this.map) return\n    this.forceUpdate()\n    setTimeout(() => {\n      this.resizeMap()\n    }, 300)\n  }\n\n  resizeMap = () => {\n    if (!this.map) return\n    this.map.resize()\n  }\n\n  componentWillUnmount() {\n    setTimeout(() => this.map!.remove(), 300)\n    window.removeEventListener('resize', this.updateWindowDimensions)\n    window.removeEventListener('orientationchange', this.updateWindowDimensions)\n  }\n\n  render() {\n    const mapStyle: any = {\n      position: 'relative',\n      top: 0,\n      bottom: 0,\n      right: 0,\n      left: 0,\n      margin: 0,\n      width: '100%',\n      height: window.innerHeight,\n      overflow: 'hidden',\n      touchAction: 'none',\n    }\n\n    const children = React.Children.map(this.props.children, (child: ReactElement) =>\n      React.cloneElement(child, { map: this.map }),\n    )\n\n    return (\n      <div\n        style={mapStyle}\n        ref={el => {\n          this.mapContainer = el\n        }}\n      >\n        {this.state.isReady && this.map !== null && children}\n      </div>\n    )\n  }\n}\n\nconst mapDispatchToProps = {\n  initializeMap,\n  updateCamera,\n  unsetSelectedPath,\n  setLayerLoaded,\n}\n\nconst connector = connect(null, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(Map)\n","import { Component } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { LayerId } from '../../constants'\nimport { MbMap, ReduxState } from '../../types/types'\nimport { setBaseMapChanged, unloadLayers } from './../../reducers/mapReducer'\n\nclass MapControl extends Component<PropsFromRedux & { map?: MbMap }> {\n  getFitBoundsOptions = (showingPaths: boolean) => {\n    if (window.innerWidth < 544) {\n      if (showingPaths) {\n        return { padding: { top: 110, bottom: 280, left: 40, right: 40 } }\n      } else {\n        return { padding: { top: 190, bottom: 170, left: 40, right: 40 } }\n      }\n    } else return { padding: { top: 120, bottom: 90, left: 390, right: 70 } }\n  }\n\n  componentDidUpdate = (prevProps: PropsFromRedux) => {\n    const { map, showingPaths, unloadLayers, loadedLayers } = this.props\n    const { zoomToBbox } = this.props.mapState\n\n    const { userLocHistory } = this.props.userLocation\n\n    if (userLocHistory.length === 1 && prevProps.userLocation.userLocHistory.length === 0) {\n      map!.easeTo({ center: userLocHistory[0], zoom: 13.7 })\n    }\n\n    if (zoomToBbox !== prevProps.mapState.zoomToBbox) {\n      map!.fitBounds(zoomToBbox, this.getFitBoundsOptions(showingPaths))\n    }\n\n    if (\n      prevProps.mapState.basemap &&\n      this.props.mapState.basemap &&\n      prevProps.mapState.basemap !== this.props.mapState.basemap\n    ) {\n      unloadLayers()\n      map!.setStyle(this.props.mapState.basemap)\n      map!.once('styledataloading', () => {\n        map!.once('styledata', () => {\n          this.props.setBaseMapChanged()\n        })\n      })\n    }\n\n    if (loadedLayers.length === 7 && prevProps.loadedLayers.length < 7) {\n      map!.moveLayer(LayerId.USER_LOC)\n      map!.moveLayer(LayerId.ORIG_DEST, LayerId.USER_LOC)\n      map!.moveLayer(LayerId.PATHS_EDGES, LayerId.ORIG_DEST)\n      map!.moveLayer(LayerId.GREEN_PATHS, LayerId.PATHS_EDGES)\n      map!.moveLayer(LayerId.SHORT_PATH, LayerId.GREEN_PATHS)\n      map!.moveLayer(LayerId.SELECTED_PATH, LayerId.SHORT_PATH)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  userLocation: state.userLocation,\n  mapState: state.map,\n  showingPaths: state.paths.waitingPaths || state.paths.showingPaths,\n  loadedLayers: state.map.loadedLayers,\n})\n\nconst connector = connect(mapStateToProps, { setBaseMapChanged, unloadLayers })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(MapControl)\n","import { Component } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport mapboxgl from 'mapbox-gl'\nimport sensorIcon from './sensorIcon.png'\n\n\nimport {\n  setLoadingData,\n  handleDataNotAvailable,\n  setDataLoaded,\n  setDelayedStyleUpdate,\n  setWaitingStyleUpdate,\n  setUpdatingStyle,\n} from './../../reducers/airQualityLayerReducer'\nimport { MbMap, ReduxState } from '../../types/types'\n\ntype Sensor = {\n  AQI_american: number\n  AQI_european: number\n  name: string\n  pollutants: {\n    CO: number\n    NO2: number\n    O3: number\n    PM10: number\n    'PM2.5': number\n    SO2: number\n  }\n  position: [number, number]\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  basemap: state.map.basemap,\n  layer: state.airQualityLayer,\n  mapCenter: state.map.center,\n})\n\nconst mapDispatchToProps = {\n  setLoadingData,\n  handleDataNotAvailable,\n  setDataLoaded,\n  setWaitingStyleUpdate,\n  setUpdatingStyle,\n  setDelayedStyleUpdate,\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\n\ntype Props = PropsFromRedux & {\n  map?: MbMap\n}\n\nclass AirQualitySensors extends Component<Props> {\n  intervalId: number | null = null\n\n  componentDidMount() {\n    this.fetchSensorsData()\n    this.intervalId = window.setInterval(this.fetchSensorsData, 60000)\n  }\n\n  componentWillUnmount() {\n    if (this.intervalId !== null) {\n      window.clearInterval(this.intervalId)\n    }\n  }\n\n  fetchSensorsData = async () => {\n    try {\n      this.props.setLoadingData(true)\n      const response = await fetch('http://localhost:5001/sensors')\n      if (!response.ok) throw new Error('Network response was not ok')\n      const data = await response.json()\n      this.displaySensorsOnMap(data.sensors)\n    } catch (error) {\n      console.error('There has been a problem with your fetch operation:', error)\n      this.props.handleDataNotAvailable()\n    } finally {\n      this.props.setLoadingData(false)\n    }\n  }\n\n  displaySensorsOnMap = (sensors: Sensor[]) => {\n    const { map } = this.props\n    if (!map) return\n\n    sensors.forEach((sensor) => {\n      const el = document.createElement('div')\n      el.className = 'home-marker'\n      el.style.width = '32px' // Adjust the width and height as needed\n      el.style.height = '32px'\n      el.style.backgroundImage = `url(${sensorIcon})` // Use the imported custom image\n      el.style.backgroundSize = 'cover'\n\n      // Crea il contenuto del Popup\n      const description = `<strong>${sensor.name}</strong><br>` +\n        `AQI US: ${sensor.AQI_american}, AQI EU: ${sensor.AQI_european}<br>` +\n        Object.entries(sensor.pollutants).map(([key, value]) => `${key}: ${value}`).join('<br>')\n\n      // Crea il Popup\n      const popup = new mapboxgl.Popup({ offset: 25 })\n        .setHTML(description)\n\n      // Aggiungi il marker e il popup alla mappa\n      new mapboxgl.Marker(el)\n        .setLngLat(sensor.position)\n        .setPopup(popup) // Collega il Popup al Marker\n        .addTo(map)\n    })\n  }\n\n  render() {\n    return null\n  }\n}\n\nexport default connector(AirQualitySensors)\n","export default \"data:image/png;base64,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\"","import axios from 'axios'\n\nconst serverUrl = process.env.REACT_APP_ROUTES_SERVER || '/routes'\nconst aqServiceUrl = process.env.REACT_APP_AQ_SERVER || '/aq'\n\nexport interface AqMapDataStatus {\n  aq_map_data_available: boolean\n  aq_map_data_datetime: number | null\n}\n\nexport const getAqMapDataStatus = async (): Promise<AqMapDataStatus> => {\n  try {\n    const response = await axios.get(serverUrl.concat('aq-map-data-status'))\n    if (response.data) {\n      return response.data as AqMapDataStatus\n    }\n  } catch (error) {\n    console.error('could not fetch AQI map data status')\n  }\n  return { aq_map_data_available: false, aq_map_data_datetime: null }\n}\n\nexport const getAqLayerData = async (): Promise<Map<number, number> | undefined> => {\n  const response = await axios.get(serverUrl.concat('aq-map-data'))\n  console.log(response)\n  if (response.data) {\n    const dataMap = new Map<number, number>()\n    for (const e of response.data.data) {\n      dataMap.set(e.id_ig, e['aq']['AQI_european'])\n    }\n    return dataMap\n  } else {\n    console.error('no AQI map data available')\n  }\n}\n\nexport async function interpolatePositions(positions: number[][]): Promise<any> {\n  const url = `${aqServiceUrl}/interpolate`\n  const requestData = {\n    positions,\n  }\n\n  try {\n    const response = await axios.post(url, requestData)\n    if (response.status !== 200) {\n      throw new Error(`Errore nella richiesta: ${response.status} ${response.statusText}`)\n    }\n\n    return response.data\n  } catch (error) {\n    console.error('Errore durante la richiesta:', error)\n    throw error\n  }\n}\n","import { Component } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport {\n  setLoadingData,\n  handleDataNotAvailable,\n  setDataLoaded,\n  setDelayedStyleUpdate,\n  setWaitingStyleUpdate,\n  setUpdatingStyle,\n} from './../../reducers/airQualityLayerReducer'\nimport { setLayerLoaded } from './../../reducers/mapReducer'\nimport { MapId, LayerId } from '../../constants'\nimport * as aq from '../../services/aq'\nimport { MbMap, ReduxState } from '../../types/types'\nimport Area from '../../Borders.json'\nimport * as turf from '@turf/turf'\nimport { AirQualitySpec } from '../../types/aqi_spec'\n\nfunction getColorFromValue(value: number) {\n  return AirQualitySpec.getInstance().getCategoryInfo(value).color\n}\n\nclass AirQualityHeatmap extends Component<PropsFromRedux & { map?: MbMap }> {\n  layerId = LayerId.HEATMAP\n  source = 'turfgrid'\n  data: any | undefined = undefined\n  dataTimeUtcSecs: number | null = null\n\n  hideLayer(map: any) {\n    map.setLayoutProperty(this.layerId, 'visibility', 'none')\n  }\n\n  createGrid = (polygon: any, gridSize: any) => {\n    const grid = turf.featureCollection([])\n\n    // Determina i limiti del poligono\n    const bbox = turf.bbox(polygon)\n    const [minX, minY, maxX, maxY] = bbox\n\n    // Loop per generare la griglia\n    for (let x = minX; x < maxX; x += gridSize) {\n      for (let y = minY; y < maxY; y += gridSize) {\n        // Crea un quadrato\n        const square = turf.polygon([\n          [\n            [x, y],\n            [x + gridSize, y],\n            [x + gridSize, y + gridSize],\n            [x, y + gridSize],\n            [x, y], // Chiude il poligono ripetendo il primo punto\n          ],\n        ])\n\n        // Verifica se il centro del quadrato è all'interno del poligono\n        const center = turf.point([x + gridSize / 2, y + gridSize / 2])\n        if (turf.booleanPointInPolygon(center, polygon)) {\n          grid.features.push(square)\n        }\n      }\n    }\n\n    return grid\n  }\n\n  gridPolygons = this.createGrid(Area.features[0].geometry, 0.001)\n\n  assignGradientColors(grid: any, values: any) {\n    grid.features.forEach((polygon: any) => {\n      const centroid = turf.centroid(polygon).geometry.coordinates\n      const matchingValue = values.find(\n        (v: any) => v.coordinates[0] === centroid[0] && v.coordinates[1] === centroid[1],\n      )\n      const color = matchingValue ? getColorFromValue(matchingValue.value) : '#00E400' // Usa un colore di default se non c'è corrispondenza\n      polygon.properties = { color }\n    })\n  }\n\n  updateAqState = (map: any, gridPolygons: any) => {\n    this.props.setUpdatingStyle(true)\n    this.props.setWaitingStyleUpdate(false)\n\n    this.assignGradientColors(this.gridPolygons, this.data)\n\n    if (!map.getLayer(this.layerId)) {\n      map.addSource(this.source, {\n        type: 'geojson',\n        data: gridPolygons,\n      })\n\n      map.addLayer({\n        id: this.layerId,\n        type: 'fill',\n        source: this.source,\n        paint: {\n          'fill-color': ['get', 'color'],\n          'fill-opacity': 0.5, // Set opacity to 0.5\n          'fill-outline-color': 'rgba(0, 0, 0, 0)', // Transparent outline\n        },\n      })\n      this.props.setLayerLoaded(this.layerId)\n    } else {\n      map.getSource(this.source).setData(gridPolygons)\n    }\n\n    this.props.setUpdatingStyle(false)\n  }\n\n  /**\n   * Triggers AQI map data fetch/update if new or initial AQI data is available.\n   */\n  maybeUpdateAqData = async (repeat: boolean = true) => {\n    if (this.props.mapId === MapId.HEATMAP && !this.props.layer.loadingData) {\n      const server = await aq.getAqMapDataStatus()\n      console.log('fetching new AQI map data:', server.aq_map_data_datetime)\n      this.props.setLoadingData(true)\n      try {\n        this.data = await aq.interpolatePositions(\n          this.gridPolygons.features.map(p => turf.centroid(p)).map(f => f.geometry.coordinates),\n        )\n        this.data = this.data.positions.map((p: any) => {\n          return {\n            coordinates: p.position,\n            value: p.AQI_european,\n          }\n        })\n        this.props.setDelayedStyleUpdate(100)\n      } catch (error) {\n        console.log('error in fetching new AQI map data')\n      }\n      this.props.setLoadingData(false)\n    }\n    if (repeat) {\n      setTimeout(this.maybeUpdateAqData, 4000)\n    }\n  }\n\n  componentDidMount = async () => {\n    setTimeout(this.maybeUpdateAqData, 400)\n    this.props.map!.on('sourcedata', e => {\n      if (e.isSourceLoaded && this.props.mapId === MapId.HEATMAP && this.data) {\n        this.props.setDelayedStyleUpdate(500)\n      }\n    })\n  }\n\n  /**\n   * Let's update AQI features' states only after a short delay after either changed map view or new\n   * source data download. This way we can avoid unnecessarily updating the feature states multiple\n   * times due to single change in map view.\n   */\n  componentDidUpdate = async (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    //hidden the layer if the map is not selected\n    if (this.props.mapId !== MapId.HEATMAP) {\n      if (map?.getLayer(this.layerId) !== undefined)\n        map.setLayoutProperty(this.layerId, 'visibility', 'none')\n      return\n    }\n\n    //if layer exist and map is selected set visible true\n    if (map?.getLayer(this.layerId) !== undefined)\n      map.setLayoutProperty(this.layerId, 'visibility', 'visible')\n\n    // add delayed AQI map update to \"queue\" if basemap changes\n    if (prevProps.mapId !== MapId.HEATMAP) {\n      if (!this.data) {\n        await this.maybeUpdateAqData(false)\n      } else {\n        this.props.setDelayedStyleUpdate(200)\n      }\n      if (!this.data) {\n        this.props.handleDataNotAvailable()\n      }\n    }\n\n    // add delayed AQI map update to \"queue\" if map center changes\n    if (JSON.stringify(prevProps.mapCenter) !== JSON.stringify(this.props.mapCenter) && this.data) {\n      this.props.setDelayedStyleUpdate(1300)\n    }\n\n    // implement the AQI style update if and only after all update delays have passed\n    if (\n      this.props.layer.waitingStyleUpdate &&\n      this.props.layer.styleUpdateDelays === 0 &&\n      prevProps.layer.styleUpdateDelays > 0 &&\n      this.props.map &&\n      this.data\n    ) {\n      // trigger AQI map style update if necessary\n      this.updateAqState(this.props.map, this.gridPolygons)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  mapId: state.map.mapId,\n  layer: state.airQualityLayer,\n  mapCenter: state.map.center,\n})\n\nconst connector = connect(mapStateToProps, {\n  setLoadingData,\n  handleDataNotAvailable,\n  setDataLoaded,\n  setWaitingStyleUpdate,\n  setUpdatingStyle,\n  setDelayedStyleUpdate,\n  setLayerLoaded,\n})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(AirQualityHeatmap)\n","import { Component } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport {\n  setLoadingData,\n  handleDataNotAvailable,\n  setDataLoaded,\n  setDelayedStyleUpdate,\n  setWaitingStyleUpdate,\n  setUpdatingStyle,\n} from './../../reducers/airQualityLayerReducer'\nimport { LayerId, MapId } from '../../constants'\nimport * as aq from '../../services/aq'\nimport { MbMap, ReduxState } from '../../types/types'\nimport Streets from '../../streets.json'\nimport { Feature, FeatureCollection, GeoJsonProperties, LineString } from 'geojson'\nimport { AirQualitySpec, Category } from '../../types/aqi_spec'\n\nconst aqLineColor = [\n  'match',\n  ['feature-state', 'aq'],\n  ...AirQualitySpec.getInstance()\n    .getCategories()\n    .flatMap((c: Category, id: number) => {\n      return [id + 1, c.color]\n    }),\n  '#CCCCCC',\n]\n\nconst getUniqueFeatureIds = (features: any[]) => {\n  const existingFeatureKeys: Map<number, boolean> = new Map()\n  return features\n    .map(feat => feat.id)\n    .filter(id => {\n      if (existingFeatureKeys.has(id)) {\n        return false\n      } else {\n        existingFeatureKeys.set(id, true)\n        return true\n      }\n    })\n}\n\nclass AirQualityStreetByStreet extends Component<PropsFromRedux & { map?: MbMap }> {\n  layerId = LayerId.STREETS_MAP\n  sourceId = this.layerId\n  data: Map<number, number> | undefined = undefined\n  dataTimeUtcSecs: number | null = null\n\n  addStreetsLayer(map: any) {\n    if (!map.getLayer(this.layerId)) {\n      const streetsFeature = Streets.features\n        .filter(f => f.geometry != null)\n        .map(f => {\n          const res: Feature<LineString> = {\n            id: f.properties!.id_ig,\n            type: 'Feature',\n            properties: f.properties,\n            geometry: {\n              type: 'LineString',\n              coordinates: f.geometry!.coordinates,\n            },\n          }\n          return res\n        })\n\n      const s: FeatureCollection<LineString, GeoJsonProperties> = {\n        type: 'FeatureCollection',\n        features: streetsFeature,\n      }\n\n      map!.addSource(this.sourceId, {\n        type: 'geojson',\n        data: s,\n      })\n\n      map!.addLayer({\n        id: this.layerId,\n        type: 'line',\n        source: this.sourceId,\n        layout: {},\n        paint: {\n          'line-width': 1, // Line width for a bold line\n        },\n      })\n    }\n  }\n\n  updateAqState = (map: any) => {\n    this.props.setUpdatingStyle(true)\n    this.props.setWaitingStyleUpdate(false)\n    this.addStreetsLayer(map)\n    this.props.map!.setPaintProperty(this.layerId, 'line-color', aqLineColor)\n    const features = map!.queryRenderedFeatures(undefined, {\n      layers: [this.layerId],\n    })\n    const uniqIds = getUniqueFeatureIds(features)\n    // update feature states with new AQI values\n    uniqIds.forEach((id, i) => {\n      const aq = this.data!.get(id) !== undefined ? this.data!.get(id) : 3\n      //const aq = 1\n      if (aq) {\n        map.setFeatureState(\n          {\n            source: this.sourceId,\n            id: id,\n          },\n          { aq },\n        )\n      } else {\n        console.log('Missing id for AQ feature')\n      }\n    })\n    console.log('Updated AQIs to feature states')\n    this.props.setUpdatingStyle(false)\n  }\n\n  /**\n   * Triggers AQI map data fetch/update if new or initial AQI data is available.\n   */\n  maybeUpdateAqData = async (repeat: boolean = true) => {\n    if (this.props.mapId === MapId.STREET_BY_STREET && !this.props.layer.loadingData) {\n      this.props.setLoadingData(true)\n      try {\n        this.data = await aq.getAqLayerData()\n        this.props.setDelayedStyleUpdate(100)\n      } catch (error) {\n        console.log(error)\n        console.log('error in fetching new AQI map data')\n      }\n      this.props.setLoadingData(false)\n    }\n    if (repeat) {\n      setTimeout(this.maybeUpdateAqData, 4000)\n    }\n  }\n\n  componentDidMount = async () => {\n    setTimeout(this.maybeUpdateAqData, 400)\n    this.props.map!.on('sourcedata', (e: any) => {\n      if (\n        e.isSourceLoaded &&\n        e.sourceId === this.sourceId &&\n        this.props.mapId === MapId.STREET_BY_STREET\n\n      ) {\n        this.props.setDelayedStyleUpdate(500)\n      }\n    })\n  }\n\n  /**\n   * Let's update AQI features' states only after a short delay after either changed map view or new\n   * source data download. This way we can avoid unnecessarily updating the feature states multiple\n   * times due to single change in map view.\n   */\n  componentDidUpdate = async (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    //hidden the layer if the map is not selected\n    if (this.props.mapId !== MapId.STREET_BY_STREET) {\n      if (map?.getLayer(this.layerId) !== undefined)\n        map.setLayoutProperty(this.layerId, 'visibility', 'none')\n      return\n    }\n\n    //if layer exist and map is selected set visible true\n    if (map?.getLayer(this.layerId) !== undefined)\n      map.setLayoutProperty(this.layerId, 'visibility', 'visible')\n\n    // add delayed AQI map update to \"queue\" if basemap changes\n    if (prevProps.mapId !== MapId.STREET_BY_STREET) {\n      console.log('Changed basemap to AIR QUALITY')\n      if (!this.data) {\n        await this.maybeUpdateAqData(false)\n      } else {\n        this.props.setDelayedStyleUpdate(200)\n      }\n      if (!this.data) {\n        this.props.handleDataNotAvailable()\n      }\n    }\n\n    // add delayed AQI map update to \"queue\" if map center changes\n    if (JSON.stringify(prevProps.mapCenter) !== JSON.stringify(this.props.mapCenter) && this.data) {\n      this.props.setDelayedStyleUpdate(1300)\n    }\n\n    // implement the AQI style update if and only after all update delays have passed\n    if (\n      this.props.layer.waitingStyleUpdate &&\n      this.props.layer.styleUpdateDelays === 0 &&\n      prevProps.layer.styleUpdateDelays > 0 &&\n      this.props.map &&\n      this.data\n    ) {\n      // trigger AQI map style update if necessary\n      this.updateAqState(this.props.map)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  mapId: state.map.mapId,\n  layer: state.airQualityLayer,\n  mapCenter: state.map.center,\n})\n\nconst connector = connect(mapStateToProps, {\n  setLoadingData,\n  handleDataNotAvailable,\n  setDataLoaded,\n  setWaitingStyleUpdate,\n  setUpdatingStyle,\n  setDelayedStyleUpdate,\n})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(AirQualityStreetByStreet)\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { GeoJSONSource } from 'mapbox-gl'\nimport { setLayerLoaded } from './../../reducers/mapReducer'\nimport { LayerId } from '../../constants'\nimport { ReduxState } from '../../types/types'\n\nclass UserLocation extends React.Component<PropsFromRedux> {\n  layerId = LayerId.USER_LOC\n  source: GeoJSONSource | undefined\n  circleStyle = {\n    'circle-stroke-color': '#ff38ff',\n    'circle-color': 'transparent',\n    'circle-radius': 10,\n    'circle-stroke-width': 2.5,\n  }\n\n  loadLayerToMap(map: any) {\n    // Add layer\n    map.addSource(this.layerId, { type: 'geojson', data: this.props.userLocFC })\n    this.source = map.getSource(this.layerId)\n    map.addLayer({\n      id: this.layerId,\n      source: this.layerId,\n      type: 'circle',\n      paint: this.circleStyle,\n    })\n    this.props.setLayerLoaded(this.layerId)\n  }\n\n  updateLayerData(map: any) {\n    const { userLocFC } = this.props\n\n    if (this.source !== undefined) {\n      this.source.setData(userLocFC)\n    } else {\n      map.once('sourcedata', () => {\n        if (this.source) {\n          this.source.setData(userLocFC)\n        }\n      })\n    }\n  }\n\n  componentDidMount() {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    map.once('load', () => {\n      this.loadLayerToMap(map)\n    })\n  }\n\n  componentDidUpdate = (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    if (this.props.basemapChangeId !== prevProps.basemapChangeId) {\n      this.loadLayerToMap(map)\n    } else {\n      this.updateLayerData(map)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  userLocFC: state.userLocation.userLocFC,\n  basemapChangeId: state.map.basemapChangeId,\n})\n\nconst connector = connect(mapStateToProps, { setLayerLoaded })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(UserLocation)\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { GeoJSONSource, MapMouseEvent } from 'mapbox-gl'\nimport { setSelectedPath } from './../../reducers/pathsReducer'\nimport { scrollToPath } from './../../reducers/pathListReducer'\nimport { setLayerLoaded } from './../../reducers/mapReducer'\nimport { clickTol, LayerId } from './../../constants'\nimport { utils } from './../../utils/index'\nimport { ReduxState } from '../../types/types'\n\nclass PathShort extends React.Component<PropsFromRedux> {\n  layerId = LayerId.SHORT_PATH\n  source: GeoJSONSource | undefined\n  paint = {\n    'line-width': 4.3,\n    'line-opacity': 1,\n    'line-color': '#252525',\n  }\n  layout = {\n    'line-join': 'round',\n    'line-cap': 'round',\n  }\n\n  loadLayerToMap(map: any) {\n    // Add layer\n    const { shortPathFC } = this.props\n    map.addSource(this.layerId, { type: 'geojson', data: shortPathFC })\n    this.source = map.getSource(this.layerId)\n    map.addLayer({\n      id: this.layerId,\n      source: this.layerId,\n      type: 'line',\n      paint: this.paint,\n      layout: this.layout,\n    })\n    this.props.setLayerLoaded(this.layerId)\n  }\n\n  updateLayerData(map: any) {\n    const { shortPathFC, lengthLimit } = this.props\n\n    if (this.source !== undefined) {\n      // @ts-ignore - it's valid geojson\n      this.source.setData(shortPathFC)\n      map.setFilter(this.layerId, ['<=', 'length', lengthLimit.limit])\n    } else {\n      map.once('sourcedata', () => {\n        if (this.source) {\n          // @ts-ignore - it's valid geojson\n          this.source.setData(shortPathFC)\n        }\n      })\n      map.setFilter(this.layerId, ['<=', 'length', lengthLimit.limit])\n    }\n  }\n\n  componentDidMount() {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n    this.loadLayerToMap(map)\n\n    const { setSelectedPath, scrollToPath } = this.props\n    map.once('load', () => {\n      map.on('mouseenter', this.layerId, () => {\n        map.getCanvas().style.cursor = 'pointer'\n      })\n      map.on('mouseleave', this.layerId, () => {\n        map.getCanvas().style.cursor = ''\n      })\n      map.on('click', (e: MapMouseEvent) => {\n        const features = utils.getLayersFeaturesAroundClickE([this.layerId], e, clickTol, map)\n        if (features.length > 0) {\n          const clickedFeat = features[0]\n          setSelectedPath(clickedFeat.properties!.id)\n          scrollToPath(clickedFeat.properties!.id)\n        }\n      })\n    })\n  }\n\n  componentDidUpdate = (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    if (this.props.basemapChangeId !== prevProps.basemapChangeId) {\n      this.loadLayerToMap(map)\n      this.updateLayerData(map)\n    } else {\n      this.updateLayerData(map)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  shortPathFC: state.paths.shortPathFC,\n  lengthLimit: state.paths.lengthLimit,\n  basemapChangeId: state.map.basemapChangeId,\n})\n\nconst connector = connect(mapStateToProps, { setSelectedPath, scrollToPath, setLayerLoaded })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(PathShort)\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { GeoJSONSource } from 'mapbox-gl'\nimport { setLayerLoaded } from './../../reducers/mapReducer'\nimport { LayerId } from '../../constants'\nimport { ReduxState } from '../../types/types'\n\nclass PathSelected extends React.Component<PropsFromRedux> {\n  layerId = LayerId.SELECTED_PATH\n  source: GeoJSONSource | undefined\n  layout = {\n    'icon-image': 'circle-15',\n    'icon-size': 0.7,\n    'symbol-placement': 'line',\n    'symbol-spacing': 22,\n    'icon-allow-overlap': true,\n    'icon-ignore-placement': true,\n  }\n\n  loadLayerToMap(map: any) {\n    map.addSource(this.layerId, { type: 'geojson', data: this.props.selPathFC })\n    this.source = map.getSource(this.layerId)\n    map.addLayer({\n      id: this.layerId,\n      source: this.layerId,\n      type: 'symbol',\n      layout: this.layout,\n    })\n    this.props.setLayerLoaded(this.layerId)\n  }\n\n  updateLayerData(map: any) {\n    const { selPathFC, lengthLimit } = this.props\n\n    if (this.source !== undefined) {\n      // @ts-ignore - it's valid geojson\n      this.source.setData(selPathFC)\n      map.setFilter(this.layerId, ['<=', 'length', lengthLimit.limit])\n    } else {\n      map.once('sourcedata', () => {\n        if (this.source) {\n          // @ts-ignore - it's valid geojson\n          this.source.setData(selPathFC)\n        }\n      })\n      map.setFilter(this.layerId, ['<=', 'length', lengthLimit.limit])\n    }\n  }\n\n  componentDidMount() {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n    map.once('load', () => {\n      this.loadLayerToMap(map)\n    })\n  }\n\n  componentDidUpdate = (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    if (this.props.basemapChangeId !== prevProps.basemapChangeId) {\n      this.loadLayerToMap(map)\n      this.updateLayerData(map)\n    } else {\n      this.updateLayerData(map)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  selPathFC: state.paths.selPathFC,\n  lengthLimit: state.paths.lengthLimit,\n  basemapChangeId: state.map.basemapChangeId,\n})\n\nconst connector = connect(mapStateToProps, { setLayerLoaded })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(PathSelected)\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { GeoJSONSource, MapMouseEvent } from 'mapbox-gl'\nimport { setSelectedPath } from '../../reducers/pathsReducer'\nimport { scrollToPath } from '../../reducers/pathListReducer'\nimport { setLayerLoaded } from './../../reducers/mapReducer'\nimport { clickTol, LayerId } from '../../constants'\nimport { utils } from '../../utils/index'\nimport { ReduxState } from '../../types/types'\nimport GeoJSON from 'geojson'\n\nclass PathsEnvOptimized extends React.Component<PropsFromRedux> {\n  layerId = LayerId.GREEN_PATHS\n  source: GeoJSONSource | undefined\n  paint = {\n    'line-width': 4.3,\n    'line-opacity': 1,\n    'line-color': '#252525',\n  }\n  layout = {\n    'line-join': 'round',\n    'line-cap': 'round',\n  }\n\n  loadLayerToMap(map: any) {\n    map.addSource(this.layerId, { type: 'geojson', data: this.props.envOptimizedPathFC })\n    this.source = map.getSource(this.layerId)\n    map.addLayer({\n      id: this.layerId,\n      source: this.layerId,\n      type: 'line',\n      paint: this.paint,\n      layout: this.layout,\n    })\n    this.props.setLayerLoaded(this.layerId)\n  }\n\n  updateLayerData(map: any) {\n    const { envOptimizedPathFC, lengthLimit } = this.props\n\n    if (this.source !== undefined) {\n      this.source.setData(envOptimizedPathFC as GeoJSON.FeatureCollection<GeoJSON.Geometry>)\n      map.setFilter(this.layerId, ['<=', 'length', lengthLimit.limit])\n    } else {\n      map.once('sourcedata', () => {\n        if (this.source) {\n          this.source.setData(envOptimizedPathFC as GeoJSON.FeatureCollection<GeoJSON.Geometry>)\n        }\n      })\n      map.setFilter(this.layerId, ['<=', 'length', lengthLimit.limit])\n    }\n  }\n\n  componentDidMount() {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n    const { setSelectedPath, scrollToPath } = this.props\n\n    map.once('load', () => {\n      this.loadLayerToMap(map)\n\n      map.on('mouseenter', this.layerId, () => {\n        map.getCanvas().style.cursor = 'pointer'\n      })\n      map.on('mouseleave', this.layerId, () => {\n        map.getCanvas().style.cursor = ''\n      })\n      map.on('click', (e: MapMouseEvent) => {\n        const features = utils.getLayersFeaturesAroundClickE([this.layerId], e, clickTol, map)\n        if (features.length > 0) {\n          const clickedFeat = features[0]\n          setSelectedPath(clickedFeat.properties!.id)\n          scrollToPath(clickedFeat.properties!.id)\n        }\n      })\n    })\n  }\n\n  componentDidUpdate = (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    if (this.props.basemapChangeId !== prevProps.basemapChangeId) {\n      this.loadLayerToMap(map)\n      this.updateLayerData(map)\n    } else {\n      this.updateLayerData(map)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  showingPathsOfExposureMode: state.paths.showingPathsOfExposureMode,\n  envOptimizedPathFC: state.paths.envOptimizedPathFC,\n  lengthLimit: state.paths.lengthLimit,\n  basemapChangeId: state.map.basemapChangeId,\n})\n\nconst connector = connect(mapStateToProps, { setSelectedPath, scrollToPath, setLayerLoaded })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(PathsEnvOptimized)\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { GeoJSONSource } from 'mapbox-gl'\nimport { setSelectedPath } from '../../reducers/pathsReducer'\nimport { setLayerLoaded } from './../../reducers/mapReducer'\nimport { LayerId } from '../../constants'\nimport { EnvExposureMode, ReduxState } from '../../types/types'\nimport GeoJSON from 'geojson'\nimport { ExposureMode } from '../../services/paths'\nimport { AirQualitySpec, Category } from '../../types/aqi_spec'\n\n// prettier-ignore\nconst aqLineColors = [\n  'match',\n  ['get', 'value'],\n  ...AirQualitySpec.getInstance()\n    .getCategories()\n    .flatMap((c: Category, id: number) => {\n      return [id + 1, c.color]\n    }),\n  /* other */ 'white',\n]\n\ntype EdgeColors = typeof aqLineColors\n\nconst colorScaleByExposureMode: Record<EnvExposureMode, EdgeColors> = {\n  [ExposureMode.CLEAN]: aqLineColors,\n}\n\nclass PathsEdges extends React.Component<PropsFromRedux> {\n  layerId = LayerId.PATHS_EDGES\n  source: GeoJSONSource | undefined\n  paint = {\n    'line-width': 2.2,\n    'line-opacity': 1,\n    'line-color': aqLineColors,\n  }\n  layout = {\n    'line-join': 'round',\n    'line-cap': 'round',\n  }\n\n  loadLayerToMap(map: any) {\n    // Add layer\n    map.addSource(this.layerId, { type: 'geojson', data: this.props.pathEdgeFC })\n    this.source = map.getSource(this.layerId)\n    map.addLayer({\n      id: this.layerId,\n      source: this.layerId,\n      type: 'line',\n      paint: this.paint,\n      layout: this.layout,\n    })\n    this.props.setLayerLoaded(this.layerId)\n  }\n\n  updateLayerData(map: any) {\n    const { showingPathsOfExposureMode, pathEdgeFC, lengthLimit } = this.props\n\n    const lineColor = showingPathsOfExposureMode\n      ? colorScaleByExposureMode[showingPathsOfExposureMode]\n      : 'white'\n\n      if (this.source !== undefined) {\n      this.source.setData(pathEdgeFC as GeoJSON.FeatureCollection<GeoJSON.Geometry>)\n      map.setFilter(this.layerId, ['<=', 'p_length', lengthLimit.limit])\n      map.setPaintProperty(this.layerId, 'line-color', lineColor)\n    } else {\n      map.once('sourcedata', () => {\n        if (this.source) {\n          this.source.setData(pathEdgeFC as GeoJSON.FeatureCollection<GeoJSON.Geometry>)\n        }\n      })\n      map.setFilter(this.layerId, ['<=', 'p_length', lengthLimit.limit])\n      map.setPaintProperty(this.layerId, 'line-color', lineColor)\n    }\n  }\n\n  componentDidMount() {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n    map.once('load', () => {\n      this.loadLayerToMap(map)\n    })\n  }\n\n  componentDidUpdate = (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    if (this.props.basemapChangeId !== prevProps.basemapChangeId) {\n      this.loadLayerToMap(map)\n      this.updateLayerData(map)\n    } else {\n      this.updateLayerData(map)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  showingPathsOfExposureMode: state.paths.showingPathsOfExposureMode,\n  pathEdgeFC: state.paths.pathEdgeFC,\n  lengthLimit: state.paths.lengthLimit,\n  basemapChangeId: state.map.basemapChangeId,\n})\n\nconst connector = connect(mapStateToProps, { setSelectedPath, setLayerLoaded })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(PathsEdges)\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { GeoJSONSource, MapMouseEvent } from 'mapbox-gl'\nimport { setMapReferenceForPopups, setSelectLocationsPopup } from './../../reducers/mapPopupReducer'\nimport { setLayerLoaded } from './../../reducers/mapReducer'\nimport { clickTol, LayerId } from './../../constants'\nimport { utils, turf } from './../../utils/index'\nimport { OdPlace, ReduxState } from '../../types/types'\n\nclass OrigDest extends React.Component<PropsFromRedux> {\n  layerId = LayerId.ORIG_DEST\n  source: GeoJSONSource | undefined = undefined\n  circleStyle = {\n    'circle-color': [\n      'match',\n      ['get', 'odType'],\n      'orig',\n      '#00fffa',\n      'dest',\n      '#00ff4c',\n      /* other */ '#51ff7c',\n    ],\n    'circle-stroke-color': 'black',\n    'circle-radius': 5,\n    'circle-stroke-width': 2,\n  }\n\n  loadLayerToMap(map: any) {\n    const { originPoint, destinationPoint, setLayerLoaded } = this.props\n    // @ts-ignore\n    const odFeatures: OdPlace[] = [originPoint, destinationPoint].filter(od => od)\n    const origDestFC = turf.asFeatureCollection(odFeatures)\n    // Add layer\n    map.addSource(this.layerId, { type: 'geojson', data: origDestFC })\n    this.source = map.getSource(this.layerId)\n    map.addLayer({\n      id: this.layerId,\n      source: this.layerId,\n      type: 'circle',\n      paint: this.circleStyle,\n    })\n    setLayerLoaded(this.layerId)\n  }\n\n  updateLayerData(map: any) {\n    const { originPoint, destinationPoint } = this.props\n    // @ts-ignore\n    const odFeatures: OdPlace[] = [originPoint, destinationPoint].filter(od => od)\n    const origDestFC = turf.asFeatureCollection(odFeatures)\n\n    if (this.source !== undefined) {\n      this.source.setData(origDestFC)\n    } else {\n      map.once('sourcedata', () => {\n        if (this.source) {\n          this.source.setData(origDestFC)\n        }\n      })\n    }\n  }\n\n  componentDidMount() {\n    // @ts-ignore - this is given to all children of Map\n    const { map } = this.props\n\n    this.loadLayerToMap(map)\n\n    const { setSelectLocationsPopup } = this.props\n\n    map.once('load', () => {\n      setMapReferenceForPopups(map)\n      map.on('click', (e: MapMouseEvent) => {\n        // show popup only if path was not clicked\n        const features = utils.getLayersFeaturesAroundClickE(\n          [LayerId.GREEN_PATHS, LayerId.SHORT_PATH],\n          e,\n          clickTol,\n          map,\n        )\n        if (features.length === 0) {\n          setSelectLocationsPopup(e.lngLat)\n        }\n      })\n    })\n  }\n\n  componentDidUpdate = (prevProps: PropsFromRedux) => {\n    // @ts-ignore - map is given to all children of Map\n    const { map } = this.props\n\n    this.updateLayerData(map)\n\n    if (this.props.basemapChangeId !== prevProps.basemapChangeId) {\n      this.loadLayerToMap(map)\n    }\n  }\n\n  render() {\n    return null\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  originPoint: state.origin.originObject,\n  destinationPoint: state.destination.destObject,\n  basemapChangeId: state.map.basemapChangeId,\n})\n\nconst connector = connect(mapStateToProps, { setSelectLocationsPopup, setLayerLoaded })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(OrigDest)\n","import styled, { css } from 'styled-components'\n\ninterface Props {\n  visible?: boolean\n  border?: any\n  small?: any\n  smaller?: any\n  smallest?: any\n  green?: any\n  white?: any\n  bold?: any\n  shadow?: any\n  disabled?: boolean\n}\n\nexport const Button = styled.div.attrs((props: Props) => ({\n  style: ({ display: props.visible ? '' : 'none' }),\n})) <Props>`\n  cursor: pointer;\n  padding: 6px 14px;\n  color: white;\n  border-radius: 30px;\n  margin: 5px 6px;\n  font-weight: 400;\n  font-size: 28px;\n  text-align: center;\n  width: max-content;\n  letter-spacing: 1px;\n  max-width: 90%;\n  overflow: auto;\n  height: auto;\n  pointer-events: auto;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  &:hover { \n    background-color: #119034e8;\n  }\n  ${props => props.border && css`\n    border: 1px solid white;\n  `}\n  ${props => props.small && css`\n  font-size: 20px;\n  `}\n  ${props => props.smaller && css`\n  padding: 4px 12px;\n  font-size: 20px;\n  `}\n  ${props => props.smallest && css`\n    font-size: 18px;\n  `}\n  ${props => props.green && css`\n    background-color: #17af40e8;\n    color: white;\n    &:hover { \n      background-color: #128a32e8;\n    }\n  `}\n  ${props => props.white && css`\n    background-color: white;\n    color: black;\n    border: 2px solid black;\n    &:hover { \n      color: white\n      background-color: black;\n    }\n  `}\n  ${props => props.bold && css`\n    font-weight: 500;\n  `}\n  ${props => props.shadow && css`\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.22), 0 6px 20px 0 rgba(0,0,0,0.14);\n  `}\n`\n\nButton.defaultProps = {\n  visible: true,\n}\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport styled from 'styled-components'\nimport { disableAnalyticsCookies } from './../../reducers/visitorReducer'\nimport T from '../../utils/translator/Translator'\n\nconst SmallText = styled.div`\n  font-size: 12px;\n`\nconst DisableGaWrapper = styled.div`\n  display: grid;\n  justify-items: center;\n  width: 95%;\n`\nconst DisableGaButton = styled.div`\n  cursor: pointer;\n  padding: 6px 13px;\n  margin: 7px 0 0 0;\n  color: black;\n  border-radius: 30px;\n  font-weight: 400;\n  text-align: center;\n  width: max-content;\n  letter-spacing: 1px;\n  border: 1px solid black;\n  pointer-events: auto;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n`\n\nconst CookieConsent = (props: PropsFromRedux) => {\n  return (\n    <SmallText>\n      <T>info_modal.cookie.info</T>\n      <DisableGaWrapper>\n        <DisableGaButton onClick={props.disableAnalyticsCookies}>\n          <T>info_modal.cookie.disable_button_label</T>\n        </DisableGaButton>\n      </DisableGaWrapper>\n    </SmallText>\n  )\n}\n\nconst connector = connect(null, { disableAnalyticsCookies })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(CookieConsent)\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { setLanguage, Lang } from './../../reducers/uiReducer'\nimport { ReduxState } from '../../types/types'\n\nconst ButtonPair = styled.div`\n  display: flex;\n`\n\nconst StyledButton = styled.button<{ selected: boolean; size: number }>`\n  pointer-events: auto;\n  cursor: pointer;\n  padding: 3px 1px 2px 1px;\n  font-size: 18px;\n  color: black;\n  text-decoration: none;\n  font-weight: 400;\n  font-size: ${props => (props.size ? props.size : '16')}px;\n  background-color: white;\n  margin: 2px 3px 2px 3px;\n  border: 1px solid white;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  ${props =>\n    props.selected &&\n    css`\n      border-bottom: 1px solid black;\n    `}\n  @media (min-width: 600px) {\n    &:hover {\n      border-bottom: 1px solid black;\n    }\n  }\n`\n\nconst ToggleLanguageButtons = (props: PropsFromRedux & { size: number }) => {\n  return (\n    <ButtonPair>\n      <StyledButton\n        data-cy=\"set-lang-it-button\"\n        size={props.size}\n        disabled={props.lang === Lang.IT}\n        selected={props.lang === Lang.IT}\n        onClick={() => props.setLanguage(Lang.IT)}\n      >\n        IT\n      </StyledButton>\n      <StyledButton\n        data-cy=\"set-lang-en-button\"\n        size={props.size}\n        disabled={props.lang === Lang.EN}\n        selected={props.lang === Lang.EN}\n        onClick={() => props.setLanguage(Lang.EN)}\n      >\n        EN\n      </StyledButton>\n    </ButtonPair>\n  )\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  lang: state.ui.lang,\n})\n\nconst connector = connect(mapStateToProps, { setLanguage })\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(ToggleLanguageButtons)\n","import { useDispatch, useSelector } from 'react-redux'\nimport { RiErrorWarningLine } from 'react-icons/ri'\nimport styled, { css } from 'styled-components'\nimport { Button } from '../../components/Button'\nimport { hideInfo } from './../../reducers/uiReducer'\nimport CookieConsent from './CookieConsent'\nimport ToggleLanguageButtons from './ToggleLanguageButtons'\nimport T from '../../utils/translator/Translator'\nimport { ReduxState } from '../../types/types'\n\nconst InfoWrapper = styled.div`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  z-index: 10;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  flex-wrap: wrap;\n  pointer-events: none;\n`\nconst InfoContainer = styled.div<{ gaDisabled: boolean }>`\n  width: 750px;\n  max-width: calc(90% - 60px);\n  display: flex;\n  flex-direction: column;\n  letter-spacing: 0.6px;\n  padding: 18px 27px 5px 27px;\n  background-color: rgba(255, 255, 255, 1);\n  border-radius: 8px;\n  font-weight: 300;\n  font-size: 14px;\n  color: black;\n  height: min-content;\n  pointer-events: auto;\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.22), 0 6px 20px 0 rgba(0,0,0,0.14);\n  ${props => props.gaDisabled === true && css`\n    width: 670px;\n  `}\n`\nconst ContentContainer = styled.div`\n  max-height: 68vh;\n  overflow: -moz-scrollbars-vertical; \n  overflow-y: scroll;\n`\nconst Title = styled.div`\n  font-weight: 300;\n  font-size: 21px;\n  padding: 9px 0 11px 0;\n`\n// const SubHeading = styled.div`\n//   margin: 7px 0px 0px 0px;\n//   font-weight: 550;\n// `\nconst P = styled.div`\n  padding: 7px 0px 5px 0;\n  line-height: 1.3;\n  font-weight: 350;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n  color: rgb(40, 40, 40);\n  `\n\nconst WarningP = styled(P)`\n  font-weight: 450;\n  padding: 15px;;\n  border-radius: 3px;\n  background-color: #fffbe6;\n  border: 1px solid #ffe58f;\n  margin-bottom: 12px;\n  display: flex;\n  gap: 15px;\n  align-items: center;\n`\n\n// const SponsorsDiv = styled.div<{ raiseLogos: boolean }>`\n//   position: initial;\n//   bottom: 0;\n//   background: rgba(255, 255, 255, 0.97);\n//   width: 100%;\n//   padding-top: 12px;\n//   transition-duration: 0.2s;\n//   -webkit-transition-duration: 0.2s; /* Safari */\n//   ${props => props.raiseLogos && css`\n//     position: sticky;\n//   `}\n// `\nconst ButtonDiv = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding: 9px 0 5px 0px;\n`\n// const Link = styled.a`\n//   color: black;\n// `\n//Useful for next implementation\n\n// const LogoFlex = styled.div`\n//   display: flex;\n//   margin: 0px 0px 6px 0px;\n//   align-items: center;\n//   max-width: 100%;\n//   flex-wrap: wrap;\n//   justify-content: space-evenly;\n//   border-top: 1px solid black;\n//   padding-top: 15px;\n// `\n// const LogoWrapper = styled.div`\n//   margin: 0 5px 0 5px;\n// `\n// const StyledLogoLink = styled.a`\n//   margin: 0 5px 0 5px;\n//   pointer-events: auto;\n//   cursor: pointer;\n// `\n// const SmallText = styled.div`\n//   font-size: 12px;\n// `\n\nconst WelcomeInfo = () => {\n  const dispatch = useDispatch()\n\n  const visitedBefore = useSelector((state: ReduxState) => state.visitor.visitedBefore)\n  const gaDisabled = useSelector((state: ReduxState) => state.visitor.gaDisabled)\n  const ui = useSelector((state: ReduxState) => state.ui)\n\n  if (!ui.info) return null\n\n  return (\n    <InfoWrapper>\n      <InfoContainer gaDisabled={gaDisabled}>\n        <ContentContainer data-cy=\"welcome-info-content\">\n          <ToggleLanguageButtons size={16} />\n          <Title><T>info_modal.welcome.title</T>!</Title>\n          <WarningP>\n            <div><RiErrorWarningLine color=\"#faad14\" size={25}/></div>\n            <div><T>info_modal.dev_status_info</T></div>\n          </WarningP>\n          {!visitedBefore && !gaDisabled && <P><CookieConsent /></P>}\n          {/* <SubHeading><T>info_modal.problem.title</T></SubHeading>\n          <P>\n            <T>info_modal.problem.content</T>\n          </P>\n          <SubHeading><T>info_modal.solution.title</T></SubHeading>\n          <P>\n            <T>info_modal.solution.content</T>\n          </P>\n          <SubHeading><T>info_modal.method.title</T></SubHeading>\n          <P>\n            <T>info_modal.method.content.osm.description</T> <Link href='https://www.openstreetmap.org/copyright' target='_blank' rel='noopener noreferrer'>\n              OpenStreetMap</Link><T>info_modal.method.content.osm.suffix</T>(CC-BY-SA) <T>info_modal.method.content.otp.description_1</T>{' '}<Link href='https://www.opentripplanner.org/' target='_blank' rel='noopener noreferrer'>\n              OpenTripPlanner</Link><T>info_modal.method.content.otp.description_2</T>.\n          </P>\n          <P>\n            <T>info_modal.method.content.enfuser.description</T> <Link href='https://en.ilmatieteenlaitos.fi/environmental-information-fusion-service' target='_blank' rel='noopener noreferrer'>\n              <T>info_modal.method.content.enfuser.link_label</T></Link>.\n          </P>\n          <P>\n            <Link href='https://hri.fi/data/en_GB/dataset/helsingin-kaupungin-meluselvitys-2017' target='_blank' rel='noopener noreferrer'>\n              <T>info_modal.method.content.noise_data.link_label</T></Link>{' '} <T>info_modal.method.content.noise_data.description</T>{' '}\n            <Link href='https://en.wikipedia.org/wiki/Day%E2%80%93evening%E2%80%93night_noise_level' target='_blank' rel='noopener noreferrer'>\n              <T>info_modal.method.content.noise_data.Lden</T></Link>.\n          </P>\n          <P>\n            <T>info_modal.method.content.gvi.description_1</T>{' '} <Link href='https://doi.org/10.1016/j.dib.2020.105601' target='_blank' rel='noopener noreferrer'>\n              <T>info_modal.method.content.gvi.gsv_link_label</T></Link> <T>info_modal.method.content.gvi.land_cover</T>{' '}<Link href='https://hri.fi/data/en_GB/dataset/paakaupunkiseudun-maanpeiteaineisto' target='_blank' rel='noopener noreferrer'>\n            <T>info_modal.method.content.gvi.land_cover_link_label</T></Link>.\n          </P>\n          <SubHeading><T>info_modal.team.title</T></SubHeading>\n          <P>\n            <T>info_modal.team.content.developed_by</T> <Link href='https://www.helsinki.fi/en/researchgroups/digital-geography-lab' target='_blank' rel='noopener noreferrer'>\n              Digital Geography Lab</Link><T>info_modal.team.content.developed_by.suffix</T> <T>info_modal.team.content.within_the</T> <Link href='https://ilmanlaatu.eu/briefly-in-english/' target='_blank' rel='noopener noreferrer'>\n              Urban Innovative Action: HOPE</Link>{' '} – <T>info_modal.team.content.hope_description</T>\n          </P>\n          <SubHeading data-cy=\"info-code-title\"> <T>info_modal.code.title</T> </SubHeading>\n          <P>\n            <Link href='https://github.com/DigitalGeographyLab/hope-green-path-server' target='_blank' rel='noopener noreferrer'>DigitalGeographyLab/hope-green-path-server</Link>{' '}\n            <br />\n            <Link href='https://github.com/DigitalGeographyLab/hope-green-path-ui' target='_blank' rel='noopener noreferrer'>DigitalGeographyLab/hope-green-path-ui</Link>{' '}\n          </P>\n          {visitedBefore && !gaDisabled && <P style={{ marginTop: '6px' }}><CookieConsent /></P>}\n          <SmallText style={{ marginTop: '8px' }}>\n            <T>info_modal.funded_by</T>\n          </SmallText> */}\n          {/* <SponsorsDiv data-cy=\"sponsor-logos\" raiseLogos={raiseLogos}></SponsorsDiv> */}\n        </ContentContainer>\n        <ButtonDiv data-cy='hide-welcome-button'>\n          <Button small green onClick={() => dispatch(hideInfo())}>OK</Button>\n        </ButtonDiv>\n    </InfoContainer>\n  </InfoWrapper>\n  )\n}\n\nexport default WelcomeInfo","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport styled from 'styled-components'\nimport { ReduxState } from '../../types/types'\n\nconst DimDiv = styled.div<{ visible?: boolean }>`\n  visibility: ${props => (props.visible ? 'visible' : 'hidden')};\n  pointer-events: ${props => (props.visible ? 'auto' : 'none')};\n  opacity: ${props => (props.visible ? 1 : 0)};\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  right: 0px;\n  left: 0px;\n  margin: 0px;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n  z-index: 8;\n  transition: visibility 0.7s linear, opacity 0.7s linear;\n  transition-duration: 0.2s;\n  -webkit-transition-duration: 0.2s; /* Safari */\n  background: rgba(5, 5, 5, 0.5);\n`\n\nconst DimLayer = (props: PropsFromRedux) => {\n  return <DimDiv visible={props.ui.info} />\n}\n\nconst mapStateToProps = (state: ReduxState) => ({ ui: state.ui })\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(DimLayer)\n","import styled from 'styled-components'\n\nconst Container = styled.div`\n  position: absolute;\n  bottom: 3px;\n  left: 0px;\n  right: 0px;\n  z-index: 2;\n  display: flex;\n  justify-content: center;\n  pointer-events: none;\n  justify-content: flex-end;\n  align-items: flex-end;\n`\n\nconst OsmLinkContainer = styled.div`\n  display: flex;\n  max-width: 60%;\n  flex-wrap: wrap;\n  margin-right: 2px;\n  @media (max-width: 400px) {\n    max-width: 50%;\n  }\n`\nconst OsmLink = styled.a`\n  color: black;\n  font-size: 12px;\n  margin: 1px 3px;\n  padding: 0px 1px 1px 1px;\n  border-radius: 2px;\n  pointer-events: auto;\n  background: rgba(255, 255, 255, 0.4);\n  @media (max-width: 400px) {\n    font-size: 11px;\n  }\n`\n\nconst Attribution = () => {\n  return (\n    <Container>\n      <OsmLinkContainer role=\"list\">\n        <OsmLink href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\">\n          © Mapbox\n        </OsmLink>\n        <OsmLink href=\"http://www.openstreetmap.org/about/\" target=\"_blank\" rel=\"noreferrer\">\n          © OpenStreetMap\n        </OsmLink>\n        <OsmLink\n          href=\"https://apps.mapbox.com/feedback/?owner=joose&amp;id=cjvbyzwuk31oe1fohk6s9ev4b&amp;access_token=pk.eyJ1Ijoiam9vc2UiLCJhIjoiY2pkaWtwMWU1MGFjYzMzcXB6cDI4cG4ybCJ9.TZX6Fjx5bqDG32SzEyURDw\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          title=\"Map feedback\"\n          aria-label=\"Map feedback\"\n        >\n          Improve this map\n        </OsmLink>\n      </OsmLinkContainer>\n    </Container>\n  )\n}\n\nexport default Attribution\n","import React, { useState, useEffect, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { ReduxState } from '../../types/types'\nimport { loginSuccess, closeLoginModal, showRegisterModal } from '../../reducers/authReducer'\nimport { login } from '../../services/auth'\nimport { User } from '../../types/types'\nimport styled, { css } from 'styled-components'\n\nconst ModalBackground = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 5;\n`\n\nconst ModalContent = styled.div`\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  max-width: 400px;\n  width: calc(100% - 70px);\n  height: calc(100% - 150px);\n  overflow-y: auto;\n  margin: 10vh auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 6;\n`\nconst Input = styled.input<{ hasError: boolean }>`\n  padding: 8px;\n  margin: 10px 0;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  width: 100%;\n  ${props =>\n    props.hasError &&\n    css`\n      border-color: red;\n    `}\n`\n\nconst LoginButton = styled.button`\n  padding: 10px 20px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 10px;\n  width: 100%;\n`\nconst RegisterLink = styled.span`\n  margin-top: 10px;\n  text-align: center;\n  color: #007bff;\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n`\n\nconst LoginModal: React.FC = () => {\n  const showLoginModal = useSelector((state: ReduxState) => state.auth.showLoginModal)\n  const dispatch = useDispatch()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [loginFailed, setLoginFailed] = useState(false)\n  const modalContentRef = useRef<HTMLDivElement | null>(null)\n\n  const handleLogin = async () => {\n    const user: User | null = await login(username, password)\n    if (user) {\n      dispatch(loginSuccess(user))\n      setLoginFailed(false)\n      closeModal()\n    } else {\n      setLoginFailed(true)\n    }\n  }\n\n  const closeModal = () => {\n    dispatch(closeLoginModal())\n    setLoginFailed(false)\n    clearFields() // Chiamiamo la funzione per cancellare i campi\n  }\n\n  const closeModalOnTouchOutside = (e: MouseEvent) => {\n    if (modalContentRef.current && !modalContentRef.current.contains(e.target as Node)) {\n      closeModal()\n    }\n  }\n\n  const openRegisterModal = () => {\n    closeModal()\n    dispatch(showRegisterModal())\n  }\n\n  const clearFields = () => {\n    setUsername('')\n    setPassword('')\n  }\n\n  useEffect(() => {\n    if (showLoginModal) {\n      document.addEventListener('mousedown', closeModalOnTouchOutside)\n    } else {\n      document.removeEventListener('mousedown', closeModalOnTouchOutside)\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', closeModalOnTouchOutside)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showLoginModal])\n\n  if (!showLoginModal) {\n    return null\n  }\n\n  return (\n    <ModalBackground>\n      <ModalContent ref={modalContentRef}>\n        <Input\n          type=\"text\"\n          value={username}\n          onChange={e => setUsername(e.target.value)}\n          placeholder=\"Username\"\n          hasError={loginFailed}\n        />\n        <Input\n          type=\"password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          placeholder=\"Password\"\n          hasError={loginFailed}\n        />\n        <LoginButton onClick={handleLogin}>Login</LoginButton>\n        <RegisterLink onClick={openRegisterModal}>Register</RegisterLink>\n      </ModalContent>\n    </ModalBackground>\n  )\n}\n\nexport default LoginModal\n","import React, { useState, useEffect, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { ReduxState } from '../../types/types'\nimport { closeRegisterModal } from '../../reducers/authReducer'\nimport { showLoginModal } from '../../reducers/authReducer'\nimport styled, { css } from 'styled-components'\nimport { register } from '../../services/auth'\n\nconst ModalBackground = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 5;\n`\n\nconst ModalContent = styled.div`\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  max-width: 400px;\n  width: calc(100% - 70px);\n  height: calc(100% - 150px);\n  overflow-y: auto;\n  margin: 10vh auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 6;\n`\n\nconst Input = styled.input<{ hasError: boolean }>`\n  padding: 8px;\n  margin: 10px 0;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  width: 100%;\n  ${props =>\n    props.hasError &&\n    css`\n      border-color: red;\n    `}\n`\n\nconst RegisterButton = styled.button`\n  padding: 10px 20px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 10px;\n  width: 100%;\n`\n\nconst RegisterModal: React.FC = () => {\n  const showRegisterModal = useSelector((state: ReduxState) => state.auth.showRegisterModal)\n  const dispatch = useDispatch()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [registrationFailed, setRegistrationFailed] = useState(false)\n  const modalContentRef = useRef<HTMLDivElement | null>(null)\n\n  const handleRegister = async () => {\n    const registrationSuccess = await register(username, password)\n\n    if (registrationSuccess) {\n      closeModal()\n      dispatch(showLoginModal())\n    } else {\n      setRegistrationFailed(true)\n    }\n  }\n\n  const closeModal = () => {\n    dispatch(closeRegisterModal())\n    setUsername('')\n    setPassword('')\n    setRegistrationFailed(false)\n  }\n\n  const closeModalOnTouchOutside = (e: MouseEvent) => {\n    if (modalContentRef.current && !modalContentRef.current.contains(e.target as Node)) {\n      closeModal()\n    }\n  }\n\n  useEffect(() => {\n    if (showRegisterModal) {\n      document.addEventListener('mousedown', closeModalOnTouchOutside)\n    } else {\n      document.removeEventListener('mousedown', closeModalOnTouchOutside)\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', closeModalOnTouchOutside)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showRegisterModal])\n\n  if (!showRegisterModal) {\n    return null\n  }\n\n  return (\n    <ModalBackground>\n      <ModalContent ref={modalContentRef}>\n        <Input\n          type=\"text\"\n          value={username}\n          onChange={e => setUsername(e.target.value)}\n          placeholder=\"Username\"\n          hasError={registrationFailed}\n        />\n        <Input\n          type=\"password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          placeholder=\"Password\"\n          hasError={registrationFailed}\n        />\n        <RegisterButton onClick={handleRegister}>Register</RegisterButton>\n      </ModalContent>\n    </ModalBackground>\n  )\n}\n\nexport default RegisterModal\n","import React, { useEffect, useRef } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { loginSuccess } from '../../reducers/authReducer'\nimport { getUserData } from '../../services/auth'\n\nconst UserRecover: React.FC = () => {\n  const firstTime = useRef(true)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    const recoverData = async () => {\n      if (firstTime.current) {\n        firstTime.current = false\n        const user = await getUserData()\n        console.log(user)\n        if (user) {\n          dispatch(loginSuccess(user))\n        }\n      }\n    }\n\n    recoverData()\n  }, [dispatch])\n\n  return null\n}\n\nexport default UserRecover\n","import React, { useEffect, useRef } from 'react'\nimport { useSelector } from 'react-redux'\nimport mapboxgl from 'mapbox-gl'\nimport homeIcon from './homeIcon.png'\n\nimport { ReduxState } from '../../types/types'\n\ntype Props = {\n  map?: mapboxgl.Map\n}\n\nconst WorkMarker: React.FC<Props> = ({ map }) => {\n  const user = useSelector((state: ReduxState) => state.auth.user)\n  const markerRef = useRef<mapboxgl.Marker | null>(null)\n\n  useEffect(() => {\n    if (user && user.homePosition && map) {\n      const { homePosition } = user\n\n      // Create a custom marker icon using the custom image\n      const el = document.createElement('div')\n      el.className = 'home-marker'\n      el.style.width = '32px' // Adjust the width and height as needed\n      el.style.height = '32px'\n      el.style.backgroundImage = `url(${homeIcon})` // Use the imported custom image\n      el.style.backgroundSize = 'cover'\n\n      // Remove the previous marker if it exists\n      if (markerRef.current) {\n        markerRef.current.remove()\n      }\n\n      // Create a new marker and add it to the map\n      markerRef.current = new mapboxgl.Marker(el).setLngLat(homePosition).addTo(map)\n    }\n  }, [user, map])\n\n  return null\n}\n\nexport default WorkMarker\n","export default \"data:image/png;base64,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\"","import React, { useEffect, useRef } from 'react'\nimport { useSelector } from 'react-redux'\nimport mapboxgl from 'mapbox-gl'\nimport workIcon from './workIcon.png'\n\nimport { ReduxState } from '../../types/types'\n\ntype Props = {\n  map?: mapboxgl.Map\n}\n\nconst WorkMarker: React.FC<Props> = ({ map }) => {\n  const user = useSelector((state: ReduxState) => state.auth.user)\n  const markerRef = useRef<mapboxgl.Marker | null>(null)\n\n  useEffect(() => {\n    if (user && user.workPosition && map) {\n      const { workPosition } = user\n\n      // Create a custom marker icon using the custom image\n      const el = document.createElement('div')\n      el.className = 'work-marker'\n      el.style.width = '32px' // Adjust the width and height as needed\n      el.style.height = '32px'\n      el.style.backgroundImage = `url(${workIcon})` // Use the imported custom image\n      el.style.backgroundSize = 'cover'\n\n      // Remove the previous marker if it exists\n      if (markerRef.current) {\n        markerRef.current.remove()\n      }\n\n      // Create a new marker and add it to the map\n      markerRef.current = new mapboxgl.Marker(el).setLngLat(workPosition).addTo(map)\n    }\n  }, [user, map])\n\n  return null\n}\n\nexport default WorkMarker\n","export default \"data:image/png;base64,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\"","import React, { Component, Fragment } from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { getStateFromUrl } from './utils/urlManager'\nimport Notification from './components/Notification'\nimport FindPathsButtons from './components/FindPathsButtons'\nimport TopPanel from './components/TopPanel/TopPanel'\nimport BottomControlPanel from './components/BottomControlPanel/BottomControlPanel'\nimport PathPanel from './components/PathPanel/PathPanel'\nimport Map from './components/Map/Map'\nimport MapControl from './components/Map/MapControl'\nimport AirqualitySensors from './components/Map/AirqualitySensors'\nimport AirQualityHeatmap from './components/Map/AirQualityHeatmap'\nimport AirQualityStreetByStreet from './components/Map/AirQualityStreetByStreet'\nimport UserLocation from './components/Map/UserLocation'\nimport PathShort from './components/Map/PathShort'\nimport PathSelected from './components/Map/PathSelected'\nimport PathsEnvOptimized from './components/Map/PathsEnvOptimized'\nimport PathsEdges from './components/Map/PathsEdges'\nimport OrigDestPoints from './components/Map/OrigDestPoints'\nimport WelcomeInfo from './scenes/WelcomeInfo/WelcomeInfo'\nimport DimLayer from './scenes/Home/DimLayer'\nimport Attribution from './scenes/Home/Attribution'\nimport { loadSelectedLanguage } from './reducers/uiReducer'\nimport { testGreenPathServiceConnection, testCleanPathServiceStatus } from './reducers/pathsReducer'\nimport {\n  setStateFromUrl,\n  showWelcomeIfFirstVisit,\n  maybeDisableAnalyticsCookies,\n} from './reducers/visitorReducer'\nimport { UrlState } from './types/types'\nimport LoginModal from './components/Auth/LoginModal'\nimport RegisterModal from './components/Auth/RegisterModal'\nimport UserRecover from './components/Auth/UserRecover'\nimport HomeMarker from './components/Map/HomeMarker'\nimport WorkMarker from './components/Map/WorkMarker'\n\n\nconst AbsoluteContainer = styled.div`\n  position: absolute;\n  pointer-events: none;\n`\nconst TopPanelContainer = styled(AbsoluteContainer)`\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  z-index: 4;\n`\nconst BottomPanel = styled(AbsoluteContainer)`\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  z-index: 3;\n`\n\ntype State = {\n  urlState: UrlState | null\n}\n\nclass App extends Component<PropsFromRedux & RouteComponentProps, State> {\n  constructor(props: PropsFromRedux & RouteComponentProps) {\n    super(props)\n    this.state = { urlState: null }\n  }\n\n  componentDidMount() {\n    const urlState = getStateFromUrl(this.props.location)\n    this.setState({ urlState })\n    this.props.setStateFromUrl(urlState, this.props.location, this.props.history)\n    this.props.loadSelectedLanguage()\n    this.props.maybeDisableAnalyticsCookies()\n    this.props.showWelcomeIfFirstVisit()\n    this.props.testCleanPathServiceStatus()\n    this.props.testGreenPathServiceConnection()\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <DimLayer />\n        <Attribution />\n        {this.state.urlState && (\n          <Map basemap={this.state.urlState.basemap} mapId={this.state.urlState.mapId}>\n            <MapControl />\n            <AirQualityStreetByStreet />\n            <AirqualitySensors />\n            <AirQualityHeatmap />\n            <PathSelected />\n            <PathsEnvOptimized />\n            <PathShort />\n            <PathsEdges />\n            <OrigDestPoints />\n            <UserLocation />\n            <HomeMarker />\n            <WorkMarker />\n          </Map>\n        )}\n        <WelcomeInfo />\n        <BottomPanel>\n          <Notification />\n          <FindPathsButtons />\n          <PathPanel />\n          <BottomControlPanel />\n        </BottomPanel>\n        <TopPanelContainer>\n          <TopPanel />\n        </TopPanelContainer>\n        <LoginModal />\n        <RegisterModal />\n        <UserRecover />\n      </Fragment>\n    )\n  }\n}\n\nconst mapDispatchToProps = {\n  loadSelectedLanguage,\n  showWelcomeIfFirstVisit,\n  maybeDisableAnalyticsCookies,\n  testGreenPathServiceConnection,\n  testCleanPathServiceStatus,\n  setStateFromUrl,\n}\n\nconst connector = connect(null, mapDispatchToProps)\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(App)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\nimport App from './App'\n\nconst Root = ({ store }: { store: any }) => (\n  <Provider store={store}>\n    <Router>\n      <Route path=\"/\" component={App} />\n    </Router>\n  </Provider>\n)\n\nRoot.propTypes = {\n  store: PropTypes.object.isRequired,\n}\n\nexport default Root\n","// @ts-nocheck\nimport React from 'react'\nimport styled from 'styled-components'\nimport { connect, ConnectedProps } from 'react-redux'\nimport store from '../../store'\nimport { setOriginFromMap } from '../../reducers/originReducer'\nimport { setDestinationFromMap } from '../../reducers/destinationReducer'\nimport { loginSuccess } from '../../reducers/authReducer'\nimport { Button } from '../Button'\nimport T from '../../utils/translator/Translator'\nimport { ReduxState, User } from '../../types/types'\nimport { updateHomePosition, updateWorkPosition } from '../../services/userInfo'\n\nconst StyledPopupDiv = styled.div`\n  margin: -5px 11px -10px -6px;\n`\n\nclass SelectLocationsPopup extends React.Component<PropsFromRedux> {\n  render() {\n    const { visible, lngLat } = this.props\n    if (!visible) return null\n\n    return (\n      <StyledPopupDiv>\n        <Button\n          smallest\n          border\n          green\n          disabled={false}\n          onClick={() => store.dispatch(setOriginFromMap(lngLat))}\n        >\n          <T>map_od_popup.button.set_origin.label</T>\n        </Button>\n        <Button\n          smallest\n          border\n          green\n          disabled={false}\n          onClick={() => store.dispatch(setDestinationFromMap(lngLat))}\n        >\n          <T>map_od_popup.button.set_destination.label</T>\n        </Button>\n        {this.props.user && <><Button\n          smallest\n          border\n          green\n          disabled={false}\n          onClick={async () => {\n            var user: User = await updateHomePosition({\n              lng: lngLat.lng,\n              lat: lngLat.lat,\n            })\n            store.dispatch(loginSuccess(user))\n          }}\n        >\n          <T>map_od_popup.button.set_as_home.label</T>\n        </Button>\n        <Button\n          smallest\n          border\n          green\n          disabled={false}\n          onClick={async () => {\n            var user: User = await updateWorkPosition({\n              lng: lngLat.lng,\n              lat: lngLat.lat,\n            })\n            store.dispatch(loginSuccess(user))\n          }}\n          >\n          <T>map_od_popup.button.set_as_work.label</T>\n        </Button></>}\n      </StyledPopupDiv>\n    )\n  }\n}\n\nconst mapStateToProps = (state: ReduxState) => ({\n  visible: state.mapPopup.visible,\n  lngLat: state.mapPopup.lngLat,\n  user: state.auth.user,\n})\n\nconst connector = connect(mapStateToProps, {})\ntype PropsFromRedux = ConnectedProps<typeof connector>\nexport default connector(SelectLocationsPopup)\n","import React, { Fragment } from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport Root from './Root'\nimport store from './store'\nimport SelectLocationsPopup from './components/Map/SelectLocationsPopup'\nimport './index.css'\n\nconst render = () => {\n  ReactDOM.render(<Root store={store} />, document.getElementById('root'))\n  // render popup in a separate div created by mapbox\n  const popupElement = document.getElementById('popup')\n  if (popupElement) {\n    ReactDOM.render(\n      <Provider store={store}>\n        <Fragment>\n          <SelectLocationsPopup />\n        </Fragment>\n      </Provider>,\n      popupElement,\n    )\n  }\n}\n\nrender()\nstore.subscribe(render)\n"],"sourceRoot":""}